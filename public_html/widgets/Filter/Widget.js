// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/FilterParameters":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/promise/all dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dijit/registry jimu/filterUtils jimu/utils ./_SingleFilterParameter ./_filter/ValueProviderFactory".split(" "),function(k,s,f,p,n,l,c,t,a,m,d,g,q,e,h,r,b){return n([l,c,t,s],{baseClass:"jimu-filter-parameters",templateString:'\x3cdiv\x3e\x3ctable style\x3d"width:100%;border-collapse:collapse;"\x3e\x3ctbody data-dojo-attach-point\x3d"tbody"\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e',
_filterUtils:null,_spObj:null,nls:null,partsObj:null,layerInfo:null,OPERATORS:null,url:null,featureLayerId:null,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;this._filterUtils=new e;this.OPERATORS=a.clone(this._filterUtils.OPERATORS);this._spObj={}},destroy:function(){this.clear();this._filterUtils=null;this.inherited(arguments)},getFilterExpr:function(){var b=this._getNewValidPartsObj(this.partsObj,!0);return b?this._getFilterExprByPartsObj(b):null},getValueProviders:function(){for(var b=
[],e=this._getAllInteractiveSinglePartArray(this.partsObj),a=0;a<e.length;a++){var g=e[a].spId;g&&(g=this._getSingleFilterParameterBySpId(g),b.push(g))}return b},_getNewValidPartsObj:function(b,e){b=a.clone(b);for(var g={logicalOperator:b.logicalOperator,parts:[]},h=a.hitch(this,function(b){if(b.spId){var e=this._getSingleFilterParameterBySpId(b.spId);b.valueObj=e.getValueObject();return e.getStatus()}return b.valueObj?1:-1}),r=a.hitch(this,function(b){var e=h(b);0<e&&g.parts.push(b);return e}),c=
a.hitch(this,function(b){var e=[];b.parts=d.filter(b.parts,a.hitch(this,function(b){b=h(b);e.push(b);return 0<b}));1===b.parts.length?g.parts.push(b.parts[0]):2<=b.parts.length&&g.parts.push(b);return Math.min.apply(e,e)}),q=0;q<b.parts.length;q++){var m=b.parts[q];if(m.parts){if(0>c(m)&&e)return null}else if(0>r(m)&&e)return null}return g},_getFilterExprByPartsObj:function(b){this._filterUtils.isHosted=h.isHostedService(this.url);return this._filterUtils.getExprByFilterObj(b)},_getSingleFilterParameterBySpId:function(b){return this._spObj[b]},
_getCascadeFilterExpr:function(b){var e="1\x3d1",g={logicalOperator:this.partsObj.logicalOperator,parts:[]},h=a.clone(this.partsObj),q,r,c;q="none";b.interactiveObj&&b.interactiveObj.cascade&&(q=b.interactiveObj.cascade);if("previous"===q)for(q=0;q<h.parts.length;q++)r=h.parts[q],r.majorCascadeIndex<b.majorCascadeIndex?g.parts.push(r):r.parts&&r.majorCascadeIndex===b.majorCascadeIndex&&(c=a.clone(r),c.parts=d.filter(c.parts,a.hitch(this,function(e){return e.minorCascadeIndex<b.minorCascadeIndex})),
g.parts.push(c));else if("all"===q)for(q=0;q<h.parts.length;q++)r=h.parts[q],r.majorCascadeIndex!==b.majorCascadeIndex?g.parts.push(r):r.majorCascadeIndex===b.majorCascadeIndex&&r.parts&&(c=a.clone(r),d.some(r.parts,a.hitch(this,function(e){return e.spId===b.spId}))&&(c.parts=d.filter(c.parts,a.hitch(this,function(e){return e.minorCascadeIndex!==b.minorCascadeIndex})),g.parts.push(c)));(g=this._getNewValidPartsObj(g,!1))&&(e=this._getFilterExprByPartsObj(g));e||(e="1\x3d1");return e},clear:function(){this.featureLayerId=
this.url=null;var b=g(".jimu-widget-query-single-parameter",this.tbody);d.forEach(b,a.hitch(this,function(b){q.byNode(b).destroy()}));m.empty(this.tbody);this.layerInfo=this.partsObj=null},build:function(e,v,h,q){var c=new f;this.clear();this.url=e;this.layerInfo=v;this.partsObj=a.clone(h);this.partsObj=this._updatePartsObj(this.partsObj);this.featureLayerId=q;this._setCascadeIndexForPartsObj(this.partsObj);e=this._getAllInteractiveSinglePartArray(this.partsObj);if(0<e.length){var l=new b({url:this.url,
layerDefinition:v,featureLayerId:this.featureLayerId});e=d.map(e,a.hitch(this,function(b){var e=m.create("tr",{innerHTML:"\x3ctd\x3e\x3c/td\x3e"},this.tbody),e=g("td",e)[0],h=this._getFieldInfo(b.fieldObj.name,this.layerInfo),h=new r({nls:this.nls,url:this.url,layerDefinition:v,fieldInfo:h,part:b,valueProviderFactory:l});this.own(k(h,"change",a.hitch(this,this._onSingleFilterParameterChanged)));h.placeAt(e);h.startup();b.spId=h.id;return this._spObj[h.id]=h}));d.forEach(e,a.hitch(this,function(b){b.valueProvider.getCascadeFilterExpr=
a.hitch(this,this._getCascadeFilterExpr,b.part)}));e=d.map(e,a.hitch(this,function(b){return b.init()}));p(e).then(a.hitch(this,function(){c.resolve()}),a.hitch(this,function(){c.reject()}))}else c.resolve();return c},_updatePartsObj:function(b){d.forEach(b,a.hitch(this,function(b){b.parts?d.forEach(b.parts,a.hitch(this,function(b){b.interactiveObj&&!0===b.interactiveObj.cascade?b.interactiveObj.cascade="previous":!1===b.interactiveObj.cascade&&(b.interactiveObj.cascade="none")})):b.interactiveObj&&
!0===b.interactiveObj.cascade?b.interactiveObj.cascade="previous":!1===b.interactiveObj.cascade&&(b.interactiveObj.cascade="none")}));return b},_setCascadeIndexForPartsObj:function(b){for(var e=0;e<b.parts.length;e++){var a=b.parts[e];a.majorCascadeIndex="AND"===b.logicalOperator?e:0;a.minorCascadeIndex=0;a.cascadeIndex=a.majorCascadeIndex;if(a.parts)for(var g=0;g<a.parts.length;g++){var h=a.parts[g];h.majorCascadeIndex=a.majorCascadeIndex;h.minorCascadeIndex="AND"===a.logicalOperator?g:0;h.cascadeIndex=
parseFloat(h.majorCascadeIndex+"."+h.minorCascadeIndex)}}},_getFieldInfo:function(b,e){for(var a=e.fields,g=0;g<a.length;g++){var h=a[g];if(b===h.name)return h}return null},_getAllInteractiveSinglePartArray:function(b){for(var e=[],a=0;a<b.parts.length;a++){var g=b.parts[a];if(g.parts)for(var h=0;h<g.parts.length;h++){var d=g.parts[h];d.interactiveObj&&e.push(d)}else g.interactiveObj&&e.push(g)}return e},_onSingleFilterParameterChanged:function(){this.emit("change",this.getFilterExpr(!1))}})})},"jimu/dijit/_SingleFilterParameter":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilterParameter.html dojo/_base/lang".split(" "),
function(k,s,f,p,n,l,c,t,a){return p([n,l,c,s],{baseClass:"jimu-single-filter-parameter",templateString:t,valueProvider:null,nls:null,url:null,layerDefinition:null,fieldInfo:null,part:null,valueProviderFactory:null,postCreate:function(){this.inherited(arguments);this.valueProvider=this.valueProviderFactory.getValueProvider(this.part,!0);this.valueProvider.placeAt(this.valueProviderTd);this.own(k(this.valueProvider,"change",a.hitch(this,this._onValueProviderChanged)));this.valueProvider.bindChangeEvents()},
getValueObject:function(){return this.valueProvider.getValueObject()},init:function(){return this.build(this.fieldInfo,this.part)},build:function(a,d){var g=null;this.fieldInfo=a;this.part=d;if(g=d.interactiveObj)this.promptNode.innerHTML=g.prompt||"",this.hintNode.innerHTML=g.hint||"";g=this.valueProvider.setValueObject(this.part.valueObj);g&&"function"===typeof g.then||(g=new f,g.resolve());return g},disable:function(){this.valueProvider.disable()},enable:function(){this.valueProvider.enable()},
isEnabled:function(){return this.valueProvider.isEnabled()},getStatus:function(){return this.valueProvider.getStatus()},_showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())},_onValueProviderChanged:function(){this.emit("change")}})})},"jimu/dijit/_filter/ValueProviderFactory":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./BlankValueProvider ./SimpleValueProvider ./TwoNumbersValueProvider ./TwoDatesValueProvider ./ListValueProvider jimu/LayerInfos/LayerInfos".split(" "),
function(k,s,f,p,n,l,c,t,a){var m={stringOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",
supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorStartsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorEndsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorContains:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorDoesNotContain:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},stringOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtLeast:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsLessThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtMost:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsGreaterThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",supportAskForValue:!0}},numberOperatorIsNotBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",supportAskForValue:!0}},numberOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},
dateOperatorIsOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsNotOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBefore:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsAfter:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsNotBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},dateOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}}},d=f([],{nls:null,url:null,layerDefinition:null,layerInfo:null,featureLayerId:null,
constructor:function(g){k.mixin(this,g);this.nls=window.jimuNls.filterBuilder;g=a.getInstanceSync();this.featureLayerId&&(this.layerInfo=g.getLayerOrTableInfoById(this.featureLayerId))},getSupportedValueTypes:function(a,d){var e=[],h=m[d];h&&(h.value&&e.push("value"),h.field&&0<this._getSameShortTypeFieldNames(a).length&&e.push("field"),h.unique&&this.url&&(this._isStreamServer(this.url)||10.1<=parseFloat(this.layerDefinition.currentVersion)&&e.push("unique")));return e},_isStreamServer:function(a){a=
(a||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(a)},_getSameShortTypeFieldNames:function(a){var c=[],e=this._getFieldInfo(this.layerDefinition,a),h=d.getShortTypeByEsriType(e.type);s.forEach(this.layerDefinition.fields,k.hitch(this,function(e){e.name!==a&&d.getShortTypeByEsriType(e.type)===h&&c.push(e.name)}));return c},getValueProvider:function(a,d){var e=null,h=k.clone(m[a.operator]);if(h){var r=a.valueObj.type,b=a.fieldObj.name,u=this._getFieldInfo(this.layerDefinition,b),v=h[r],f=v.normalProviderType,
x=null,w=this._getCodedValues(u);!w&&this.layerDefinition.typeIdField===b&&(w=this._getSubTypes(this.layerDefinition));"field"===r?(r=this._getSameShortTypeFieldNames(b),0<r.length&&(x=s.map(r,k.hitch(this,function(b){return{value:b,label:b}})))):w&&(0<w.length&&v.codedValueProviderType)&&(f=v.codedValueProviderType);h={nls:this.nls,url:this.url,layerDefinition:this.layerDefinition,partObj:a,fieldInfo:u,codedValues:w,staticValues:x,layerInfo:this.layerInfo,operatorInfo:h,filterCodedValueIfPossible:!!v.filterCodedValueIfPossible,
runtime:d};"BLANK_VALUE_PROVIDER"===f?e=new p(h):"SIMPLE_VALUE_PROVIDER"===f?e=new n(h):"TWO_NUMBERS_VALUE_PROVIDER"===f?e=new l(h):"TWO_DATES_VALUE_PROVIDER"===f?e=new c(h):"LIST_VALUE_PROVIDER"===f&&(h.showNullValues=!1,e=new t(h))}return e},_getFieldInfo:function(a,d){for(var e=a.fields,h=0;h<e.length;h++){var c=e[h];if(d===c.name)return c}return null},_getCodedValues:function(a){var d=null;if((a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length)d=a.codedValues,d=s.map(d,
k.hitch(this,function(e){return{value:e.code,label:e.name}}));return d},_getSubTypes:function(a){var d=null;a.typeIdField&&(a.types&&0<a.types.length)&&(d=s.map(a.types,k.hitch(this,function(e){return{value:e.id,label:e.name}})));return d}});d.getOperatorInfo=function(a){return k.clone(m[a])};d.getOperatorsByShortType=function(a){var d=[];"string"===a?d="stringOperatorIs stringOperatorIsNot stringOperatorStartsWith stringOperatorEndsWith stringOperatorContains stringOperatorDoesNotContain stringOperatorIsBlank stringOperatorIsNotBlank".split(" "):
"number"===a?d="numberOperatorIs numberOperatorIsNot numberOperatorIsAtLeast numberOperatorIsLessThan numberOperatorIsAtMost numberOperatorIsGreaterThan numberOperatorIsBetween numberOperatorIsNotBetween numberOperatorIsBlank numberOperatorIsNotBlank".split(" "):"date"===a&&(d="dateOperatorIsOn dateOperatorIsNotOn dateOperatorIsBefore dateOperatorIsAfter dateOperatorIsBetween dateOperatorIsNotBetween dateOperatorIsBlank dateOperatorIsNotBlank".split(" "));return d};d.getShortTypeByEsriType=function(a){var d=
null;"esriFieldTypeString"===a?d="string":"esriFieldTypeDate"===a?d="date":0<=["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a)&&(d="number");return d};return d})},"jimu/dijit/_filter/BlankValueProvider":function(){define(["dojo/_base/html","dojo/_base/declare","./ValueProvider"],function(k,s,f){return s([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,
"jimu-filter-blank-value-provider")},getDijits:function(){return[]},getStatus:function(){return 1},setValueObject:function(){},getValueObject:function(){return{isValid:!0,type:this.partObj.valueObj.type,value:null}},isBlankValueProvider:function(){return!0}})})},"jimu/dijit/_filter/ValueProvider":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils esri/lang".split(" "),function(k,s,f,p,n,l,c,
t,a,m){return l([c,t,s],{baseClass:"jimu-filter-value-provider",fieldName:null,shortType:null,_enabled:!1,cascade:"none",filterCodedValue:!1,nls:null,url:null,layerDefinition:null,fieldInfo:null,partObj:null,runtime:!0,staticValues:null,codedValues:null,layerInfo:null,operatorInfo:null,filterCodedValueIfPossible:!1,postMixInProperties:function(){this.inherited(arguments);this.shortType=this.partObj.fieldObj.shortType;this.fieldName=this.partObj.fieldObj.name;this.cascade=this.partObj.interactiveObj&&
this.partObj.interactiveObj.cascade;this.runtime&&this.codedValues&&this.filterCodedValueIfPossible&&a.isCodedValuesSupportFilter(this.layerDefinition,this.codedValues.length)?this.filterCodedValue=!0:this.filterCodedValue=!1},getDijits:function(){return[]},bindChangeEvents:function(){var a=this.getDijits();n.forEach(a,f.hitch(this,function(a){a.declaredClass&&0===a.declaredClass.indexOf("dijit.")&&p.addClass(a.domNode,a.declaredClass.replace(/\./g,"-"));this.own(k(a,"change",f.hitch(this,this._onChanged)))}))},
_onChanged:function(){this.emit("change")},tryLocaleNumber:function(d){var c=a.localizeNumber(d);if(null===c||void 0===c)c=d;return c},getPartObject:function(){var a=this.getValueObject();if(!a)return null;var c=f.clone(this.partObj);c.valueObj=a;return c},setValueObject:function(){},getValueObject:function(){},tryGetValueObject:function(){return this.getValueObject()},setRequired:function(){},getStatus:function(){var a=1,c=this.getDijits();0<c.length&&(a=n.map(c,f.hitch(this,function(a){return this.getStatusForDijit(a)})),
a=Math.min.apply(a,a));return a},getStatusForDijit:function(a){return a.validate()?a.get("DisplayedValue")?1:0:-1},isInvalidValue:function(){return 0>this.getStatus()},isEmptyValue:function(){return 0===this.getStatus()},isValidValue:function(){return 0<this.getStatus()},isBlankValueProvider:function(){return!1},getFilterExpr:function(){var a="1\x3d1",a=this.getLayerFilterExpr();if("all"===this.cascade||"previous"===this.cascade)var c=this.getCascadeFilterExpr(),a="("+a+") AND ("+c+")";return a},
getLayerFilterExpr:function(){var a="1\x3d1";this.layerInfo&&(a=this.layerInfo.getFilter());a||(a="1\x3d1");return a},getCascadeFilterExpr:function(){return"1\x3d1"},isDefined:function(a){return m.isDefined(a)},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},isEnabled:function(){return this._enabled}})})},"jimu/dijit/_filter/SimpleValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(k,s,f,p,n,l){return s([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",_dijit:null,postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,"jimu-filter-simple-value-provider");this._dijit="string"===this.shortType?new p({required:!1,trim:!0}):"number"===this.shortType?new l({required:!1,intermediateChanges:!0,constraints:{pattern:"#####0.##########"}}):new n({required:!1,trim:!0,value:new Date});k.setStyle(this._dijit.domNode,"width","100%");this._dijit.placeAt(this.domNode)},
getDijits:function(){return[this._dijit]},setValueObject:function(c){this.isDefined(c.value)&&("date"===this.shortType?this._dijit.set("value",new Date(c.value)):this._dijit.set("value",c.value))},getValueObject:function(){if(this.isValidValue()){var c=this._dijit.get("value");"date"===this.shortType?c=c.toDateString():"number"===this.shortType&&(c=parseFloat(c));return{isValid:!0,type:this.partObj.valueObj.type,value:c}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():
this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(c){this._dijit.set("required",c)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(k,s,f){return k("dijit.form.DateTextBox",f,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:s,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(k,s,f,p,n,l,c,t,a,m,d,g,q,e,h,r,b){var u=p("dijit.Calendar",[q,e,h],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(b){t.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",b)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:m.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",m.hitch(this,"_onKeyDown")),d(this.dateRowsNode,"mouseover",m.hitch(this,"_onDayMouseOver")),d(this.dateRowsNode,"mouseout",m.hitch(this,"_onDayMouseOut")),d(this.dateRowsNode,"mousedown",m.hitch(this,"_onDayMouseDown")),d(this.dateRowsNode,"mouseup",m.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(b){var a=
new this.dateClassObj(this.currentFocus);a.setDate(1);a.setMonth(b);b=this.dateModule.getDaysInMonth(a);var e=this.currentFocus.getDate();a.setDate(Math.min(e,b));this._setCurrentFocusAttr(a)},_onDayMouseOver:function(b){if((b=l.contains(b.target,"dijitCalendarDateLabel")?b.target.parentNode:b.target)&&(b.dijitDateValue&&!l.contains(b,"dijitCalendarDisabledDate")||b==this.previousYearLabelNode||b==this.nextYearLabelNode))l.add(b,"dijitCalendarHoveredDate"),this._currentNode=b},_onDayMouseOut:function(b){this._currentNode&&
!(b.relatedTarget&&b.relatedTarget.parentNode==this._currentNode)&&(b="dijitCalendarHoveredDate",l.contains(this._currentNode,"dijitCalendarActiveDate")&&(b+=" dijitCalendarActiveDate"),l.remove(this._currentNode,b),this._currentNode=null)},_onDayMouseDown:function(b){if((b=b.target.parentNode)&&b.dijitDateValue&&!l.contains(b,"dijitCalendarDisabledDate"))l.add(b,"dijitCalendarActiveDate"),this._currentNode=b},_onDayMouseUp:function(b){(b=b.target.parentNode)&&b.dijitDateValue&&l.remove(b,"dijitCalendarActiveDate")},
handleKey:function(b){var e=-1,h,c=this.currentFocus;switch(b.keyCode){case a.RIGHT_ARROW:e=1;case a.LEFT_ARROW:h="day";this.isLeftToRight()||(e*=-1);break;case a.DOWN_ARROW:e=1;case a.UP_ARROW:h="week";break;case a.PAGE_DOWN:e=1;case a.PAGE_UP:h=b.ctrlKey||b.altKey?"year":"month";break;case a.END:c=this.dateModule.add(c,"month",1),h="day";case a.HOME:c=new this.dateClassObj(c);c.setDate(1);break;default:return!0}h&&(c=this.dateModule.add(c,h,e));this._setCurrentFocusAttr(c);return!1},_onKeyDown:function(b){this.handleKey(b)||
(b.stopPropagation(),b.preventDefault())},onValueSelected:function(){},onChange:function(b){this.onValueSelected(b)},getClassForDate:function(){}});u._MonthDropDownButton=p("dijit.Calendar._MonthDropDownButton",b,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(b){var a=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.dropDown.set("months",
a);this.containerNode.innerHTML=(6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+a[b.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=p("dijit.Calendar._MonthDropDown",[e,r,h],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(b){this.domNode.innerHTML=
"";k.forEach(b,function(b,a){c.create("div",{className:"dijitCalendarMonthLabel",month:a,innerHTML:b},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(b){this.onChange(n.get(b.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(k,s,f,p,n,l,c,t,a,m,d,g,q,e,h){var r=s("dijit.CalendarLite",[q,e],{templateString:h,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(b){return b&&!isNaN(b)&&"object"==typeof b&&b.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var b=this._get("value");if(b&&!isNaN(b)){var a=
new this.dateClassObj(b);a.setHours(0,0,0,0);a.getDate()<b.getDate()&&(a=this.dateModule.add(a,"hour",1));return a}return null},_setValueAttr:function(b,a){"string"==typeof b&&(b=l.fromISOString(b));b=this._patchDate(b);if(this._isValidDate(b)&&!this.isDisabledDate(b,this.lang)){if(this._set("value",b),this.set("currentFocus",b),this._markSelectedDates([b]),this._created&&(a||"undefined"==typeof a))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(b){b&&
(b=new this.dateClassObj(b),b.setHours(1,0,0,0));return b},_setText:function(b,a){for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(b.ownerDocument.createTextNode(a))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);var b=this._patchDate(b),a=b.getDay(),e=this.dateModule.getDaysInMonth(b),h=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),c=new this.dateClassObj,d=0<=this.dayOffset?this.dayOffset:f.getFirstDayOfWeek(this.lang);d>a&&
(d-=7);if(!this.summary){var r=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.gridNode.setAttribute("summary",r[b.getMonth()])}this._date2cell={};k.forEach(this.dateCells,function(r,g){var f=g+d,q=new this.dateClassObj(b),m="dijitCalendar",l=0;f<a?(f=h-a+f+1,l=-1,m+="Previous"):f>=a+e?(f=f-a-e+1,l=1,m+="Next"):(f=f-a+1,m+="Current");l&&(q=this.dateModule.add(q,"month",l));q.setDate(f);this.dateModule.compare(q,c,"date")||(m="dijitCalendarCurrentDate "+m);this.isDisabledDate(q,
this.lang)?(m="dijitCalendarDisabledDate "+m,r.setAttribute("aria-disabled","true")):(m="dijitCalendarEnabledDate "+m,r.removeAttribute("aria-disabled"),r.setAttribute("aria-selected","false"));(l=this.getClassForDate(q,this.lang))&&(m=l+" "+m);r.className=m+"Month dijitCalendarDateTemplate";m=q.valueOf();this._date2cell[m]=r;r.dijitDateValue=m;this._setText(this.dateLabels[g],q.getDateLocalized?q.getDateLocalized(this.lang):q.getDate())},this)},_populateControls:function(){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);this.monthWidget.set("month",b);var a=b.getFullYear()-1,e=new this.dateClassObj;k.forEach(["previous","current","next"],function(b){e.setFullYear(a++);this._setText(this[b+"YearLabelNode"],this.dateLocaleModule.format(e,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?a.getObject(b.datePackage,!1):p;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?
a.getObject(b.datePackage+".locale",!1):n},_createMonthWidget:function(){return r._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,a=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),e=0<=this.dayOffset?this.dayOffset:f.getFirstDayOfWeek(this.lang);this.dayCellsHtml=g.substitute([b,b,b,b,b,b,b].join(""),{d:""},function(){return a[e++%7]});b=g.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);c.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var b=a.hitch(this,function(b,e,h){this[b].dojoClick=!0;return m(this[b],"click",a.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
e,h))}))});this.own(b("incrementMonth","month",1),b("decrementMonth","month",-1),b("nextYearLabelNode","year",1),b("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(b,a){var e=this.currentFocus,h=this._getNodeByDate(e);b=this._patchDate(b);this._set("currentFocus",b);if(!this._date2cell||0!=this.dateModule.difference(e,b,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);e=this._getNodeByDate(b);e.setAttribute("tabIndex",this.tabIndex);(this.focused||
a)&&e.focus();h&&h!=e&&(d("webkit")?h.setAttribute("tabIndex","-1"):h.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(b){b.stopPropagation();b.preventDefault();for(b=b.target;b&&!b.dijitDateValue;b=b.parentNode);b&&!t.contains(b,"dijitCalendarDisabledDate")&&this.set("value",b.dijitDateValue)},_getNodeByDate:function(b){return(b=this._patchDate(b))&&this._date2cell?this._date2cell[b.valueOf()]:null},_markSelectedDates:function(b){function e(b,
a){t.toggle(a,"dijitCalendarSelectedDate",b);a.setAttribute("aria-selected",b?"true":"false")}k.forEach(this._selectedCells||[],a.partial(e,!1));this._selectedCells=k.filter(k.map(b,this._getNodeByDate,this),function(b){return b});k.forEach(this._selectedCells,a.partial(e,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});r._MonthWidget=s("dijit.CalendarLite._MonthWidget",q,{_setMonthAttr:function(b){var a=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,b),e=6==d("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+k.map(a,function(b){return"\x3cdiv\x3e"+b+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=e+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+a[b.getMonth()]+"\x3c/div\x3e"}});return r})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(k,s,f,p,n,l,c,t){new Date("X");return p("dijit.form._DateTimeTextBox",[l,c],{templateString:t,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:s.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,c){var d=this._isInvalidDate(a),f=this._isInvalidDate(c);if(d||f)return d&&f?0:!d?1:-1;var d=this.format(a,this._unboundedConstraints),f=this.format(c,this._unboundedConstraints),
q=this.parse(d,this._unboundedConstraints),e=this.parse(f,this._unboundedConstraints);return d==f?0:k.compare(q,e,this._selector)},autoWidth:!0,format:function(a,c){return!a?"":this.dateLocaleModule.format(a,c)},parse:function(a,c){return this.dateLocaleModule.parse(a,c)||(this._isEmpty(a)?null:void 0)},serialize:function(a,c){a.toGregorian&&(a=a.toGregorian());return f.toISOString(a,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){a=
a||{};this.dateModule=a.datePackage?n.getObject(a.datePackage,!1):k;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=a.datePackage?n.getObject(a.datePackage+".locale",!1):s;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var c=f.fromISOString;"string"==typeof a.min&&(a.min=c(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min)));"string"==typeof a.max&&(a.max=c(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max)));this.inherited(arguments);this._unboundedConstraints=n.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||
isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,c,d){void 0!==a&&("string"==typeof a&&(a=f.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments,[a,c,d]);this.value instanceof Date&&(this.filterString="");!1!==c&&this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,c){if("value"==a){c instanceof Date&&!(this.dateClassObj instanceof Date)&&
(c=new this.dateClassObj(c));var d=this._get("value");if(d instanceof this.dateClassObj&&0==this.compare(c,d))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var c=n.isString(this.popupClass)?n.getObject(this.popupClass,!1):this.popupClass,d=this,f=this.get("value");this.dropDown=new c({onChange:function(a){d.set("value",
a,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:f,textDir:d.textDir,currentFocus:!this._isInvalidDate(f)?f:this.dropDownDefaultValue,constraints:d.constraints,filterString:d.filterString,datePackage:d.datePackage,isDisabledDate:function(a){return!d.rangeCheck(a,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,c){this._setValueAttr(this.parse(a,this.constraints),c,a)}})})},"jimu/dijit/_filter/TwoNumbersValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoNumbersValueProvider.html dijit/form/NumberTextBox".split(" "),
function(k,s,f,p,n,l){return s([f,p,n],{templateString:l,postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,"jimu-two-numbers-filter-value-provider")},_onRangeNumberBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var c=parseFloat(this._dijit1.get("value")),f=parseFloat(this._dijit2.get("value"));c>f&&(this._dijit1.set("value",f),this._dijit2.set("value",c))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(c){this.isDefined(c.value1)&&
this._dijit1.set("value",c.value1);this.isDefined(c.value2)&&this._dijit2.set("value",c.value2)},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))}:null},tryGetValueObject:function(){if(this.isValidValue())return this.getValueObject();if(this.isEmptyValue()){var c={isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))};
isNaN(c.value1)&&(c.value1=null);isNaN(c.value2)&&(c.value2=null);return c}return null},setRequired:function(c){this._dijit1.set("required",c);this._dijit2.set("required",c)}})})},"jimu/dijit/_filter/TwoDatesValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoDatesValueProvider.html dijit/form/DateTextBox".split(" "),function(k,s,f,p,n,l){return s([f,p,n],{templateString:l,postCreate:function(){this.inherited(arguments);
k.addClass(this.domNode,"jimu-two-dates-filter-value-provider")},_onRangeDateBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var c=this._dijit1.get("value"),f=c.getTime(),a=this._dijit2.get("value"),l=a.getTime();f>l&&(this._dijit1.set("value",a),this._dijit2.set("value",c))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(c){this.isDefined(c.value1)&&this._dijit1.set("value",new Date(c.value1));this.isDefined(c.value2)&&this._dijit2.set("value",
new Date(c.value2))},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:this._dijit1.get("value").toDateString(),value2:this._dijit2.get("value").toDateString()}:null},setRequired:function(c){this._dijit1.set("required",c);this._dijit2.set("required",c)}})})},"jimu/dijit/_filter/ListValueProvider":function(){define("dojo/aspect dojo/Deferred dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ListValueProvider.html dojo/store/Memory jimu/utils dijit/form/FilteringSelect".split(" "),
function(k,s,f,p,n,l,c,t,a,m,d,g){return l([c,t,a],{templateString:m,codedValues:null,staticValues:null,showNullValues:!1,postCreate:function(){this.inherited(arguments);p.addClass(this.domNode,"jimu-filter-list-value-provider");this._uniqueValueCache={};var a=new d({idProperty:"id",data:[]});this.valuesSelect.set("store",a);!this.staticValues&&"function"===typeof this.valuesSelect._onDropDownMouseDown&&(!this.codedValues||this.codedValues&&this.filterCodedValue)&&this.own(k.before(this.valuesSelect,
"_onDropDownMouseDown",f.hitch(this,this._onBeforeDropDownMouseDown)))},_onBeforeDropDownMouseDown:function(){this._tryUpdatingUniqueValues(void 0,!0);return arguments},getDijits:function(){return[this.valuesSelect]},setValueObject:function(a){return this.staticValues?this._setValueForStaticValues(a.value,this.staticValues):this.codedValues?this.filterCodedValue?this._tryUpdatingUniqueValues(a.value,!1):this._setValueForStaticValues(a.value,this.codedValues):this._tryUpdatingUniqueValues(a.value,
!1)},getValueObject:function(){if(this.isValidValue()){var a=this.valuesSelect.get("item").value;return{isValid:!0,type:this.partObj.valueObj.type,value:a}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(a){this.valuesSelect.set("required",a)},_setValueForStaticValues:function(a,e){var c=null,d=-1,c=null;e&&(c=n.map(e,f.hitch(this,
function(b,e){var c={id:e,value:b.value,label:b.label};c.value===a&&(d=e);return c})),this.valuesSelect.store.setData(c),0<=d&&(c=this.valuesSelect.store.get(d))&&this.valuesSelect.set("item",c))},_uniqueValueLoadingDef:null,_uniqueValueLoadingExpr:"",_uniqueValueCache:null,_tryUpdatingUniqueValues:function(a,e){var c=new s;if(this.valuesSelect._opened)c.resolve();else{var d=this.getFilterExpr();d!==this._uniqueValueLoadingExpr?(this.valuesSelect.readOnly=!0,this._uniqueValueLoadingDef&&(this._uniqueValueLoadingDef.reject(),
this._uniqueValueLoadingDef=null),this._uniqueValueLoadingExpr=d,this._uniqueValueLoadingDef=this._getUniqueValues(d),this._uniqueValueLoadingDef.then(f.hitch(this,function(b){this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._setValueForUniqueValues(a,b),this._hideLoadingIcon(),e&&this.valuesSelect.toggleDropDown(),c.resolve())}),f.hitch(this,function(b){console.error(b);this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._hideLoadingIcon(),
c.reject(b))}))):c.resolve()}return c},_setValueForUniqueValues:function(a,e){e.sort(function(b,a){return b.value<a.value?-1:b.value===a.value?0:1});this.showNullValues||(e=n.filter(e,f.hitch(this,function(b){return"\x3cNull\x3e"!==b.value&&null!==b.value})));if(void 0===a){var c=this.getValueObject();c&&(a=c.value)}var d=-1,c=null,b=n.map(e,f.hitch(this,function(b,e){var c={id:e,value:b.value,label:b.label};b.value===a&&(d=e);return c}));this.valuesSelect.store.setData(b);0<=d&&(c=this.valuesSelect.store.get(d));
this.valuesSelect.set("item",c)},_showLoadingIcon:function(){p.addClass(this.valuesSelect.domNode,"loading")},_hideLoadingIcon:function(){p.removeClass(this.valuesSelect.domNode,"loading")},_getUniqueValues:function(a){var e=new s;this._uniqueValueCache[a]?e.resolve(this._uniqueValueCache[a]):(this._showLoadingIcon(),g.getUniqueValues(this.url,this.fieldName,a,this.layerDefinition).then(f.hitch(this,function(c){this.domNode&&(this._uniqueValueCache[a]=c,e.resolve(c),this._hideLoadingIcon())}),f.hitch(this,
function(a){this.domNode&&(e.reject(a),this._hideLoadingIcon())})));return e}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(k,s,f,p,n){return k("dijit.form.FilteringSelect",[p,n],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},
_callbackSetLabel:function(f,c,k,a){c&&c[this.searchAttr]!==this._lastQuery||!c&&f.length&&this.store.getIdentity(f[0])!=this._lastQuery||(f.length?this.set("item",f[0],a):this.set("value","",a||void 0===a&&!this.focused,this.textbox.value,null))},_openResultList:function(f,c,k){c[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(l,
c,k,a){this._onChangeActive||(c=null);if(void 0===a){if(null===l||""===l)if(l="",!s.isString(k)){this._setDisplayedValueAttr(k||"",c);return}var m=this;this._lastQuery=l;f(this.store.get(l),function(a){m._callbackSetLabel(a?[a]:[],void 0,void 0,c)})}else this.valueNode.value=l,this.inherited(arguments,[l,c,k,a])},_setItemAttr:function(f,c,k){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(f){return f.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(l,
c){null==l&&(l="");if(!this._created){if(!("displayedValue"in this.params))return;c=!1}if(this.store){this.closeDropDown();var k=s.clone(this.query),a=this._getDisplayQueryString(l),m;this.store._oldAPI?m=a:(m=this._patternToRegExp(a),m.toString=function(){return a});this._lastQuery=k[this.searchAttr]=m;this._lastDisplayedValue=this.textbox.value=l;this._set("displayedValue",l);var d=this,g={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};s.mixin(g,this.fetchProperties);this._fetchHandle=this.store.query(k,
g);f(this._fetchHandle,function(a){d._fetchHandle=null;d._callbackSetLabel(a||[],k,g,c)},function(a){d._fetchHandle=null;d._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dojo/NodeList":function(){define(["./query"],function(k){return k.NodeList})},"widgets/Filter/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:jimu/dijit/templates/_SingleFilterParameter.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr class\x3d"first-tr"\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"prompt" data-dojo-attach-point\x3d"promptNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"second-tr"\x3e\r\n        \x3ctd data-dojo-attach-point\x3d"valueProviderTd"\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"third-tr"\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/_filter/TwoNumbersValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/TwoDatesValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/ListValueProvider.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"valuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:false,intermediateChanges:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Filter/Widget.html":'\x3cdiv\x3e\r\n  \x3cul class\x3d"filter-list" data-dojo-attach-point\x3d"filterList"\x3e\x3c/ul\x3e\r\n\x3c/div\x3e',"url:widgets/Filter/css/style.css":".jimu-widget-filter {width: 100%; height: 100%; position: relative;}.jimu-widget-filter .filter-list,.jimu-widget-filter .filter-list li {margin: 0; padding: 0;}.jimu-widget-filter .filter-list li {list-style: none;}.jimu-widget-filter .filter-list .filter-item{border-bottom: 1px solid #d7d7d7; font-size: 12px; color: #000; overflow: hidden;}.jimu-widget-filter .filter-list .filter-item .header{vertical-align: middle; padding-top: 12px; padding-bottom: 12px; min-height: 40px; cursor: pointer; position: relative;}.jimu-widget-filter .filter-list .filter-item .header:hover{background-color: #eee;}.jimu-widget-filter .filter-list .filter-item.config-parameters .header .item-title{font-family: 'Avenir Medium', Verdana, Geneva, sans-serif;}.jimu-widget-filter .filter-list .filter-item .body{display: none;}.jimu-widget-filter .filter-list .filter-item.config-parameters .body{display: block;}.jimu-widget-filter .filter-list .filter-item .header\x3e*{display: inline-block; vertical-align: middle; word-break: break-word;}.jimu-widget-filter .filter-list .filter-item .header\x3e.icon{vertical-align: top;}.jimu-widget-filter .filter-list .filter-item .header:after{content: \"\"; height: 100%; min-height: 16px; vertical-align: top; display: inline-block;}.jimu-widget-filter .filter-list .filter-item .header .icon{width: 16px; height: 16px;}.jimu-widget-filter .filter-list .filter-item .header .icon img{width: 100%; height: 100%;}.jimu-widget-filter .filter-list .filter-item .header .setting,.jimu-widget-filter .filter-list .filter-item .header .done{width: 16px; min-height: 16px; display: none; position: absolute; top: 12px;}.jimu-widget-filter .filter-list .filter-item .header .done{right: 0px;}.jimu-rtl .jimu-widget-filter .filter-list .filter-item .header .done{right: auto; left: 0px;}.jimu-widget-filter .filter-list .filter-item .header .setting{background: url('./images/setting_normal.svg') no-repeat center; z-index: 10; right: 22px;}.jimu-widget-filter .filter-list .filter-item .header .setting:hover{background: url('./images/setting_hover.svg') no-repeat center;}.jimu-rtl .jimu-widget-filter .filter-list .filter-item .header .setting{right: auto; left: 22px;}.jimu-widget-filter .filter-list .filter-item .header:hover .setting,.jimu-widget-filter .filter-list .filter-item.config-parameters .setting{display: block;}.jimu-widget-filter .filter-list .filter-item .header:hover .setting{background-color: #eee;}.jimu-widget-filter .filter-list .filter-item .header .done,.jimu-widget-filter .filter-list .filter-item .header .setting{-webkit-animation: none; -moz-animation: none; -ms-animation: none; -o-animation: none; animation: none; -webkit-transform: none; -moz-transform: none; -ms-transform: none; -o-transform: none; transform: none;}.jimu-widget-filter .filter-list .filter-item .header .done{background: url('./images/done.svg') no-repeat center;}@-webkit-keyframes load8 {0% {-webkit-transform: rotate(0deg); transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg); transform: rotate(360deg);}}@-moz-keyframes load8 {0% {-moz-transform: rotate(0deg); transform: rotate(0deg);} 100% {-moz-transform: rotate(360deg); transform: rotate(360deg);}}@-ms-keyframes load8 {0% {-ms-transform: rotate(0deg); transform: rotate(0deg);} 100% {-ms-transform: rotate(360deg); transform: rotate(360deg);}}@keyframes load8 {0% {-webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); -moz-transform: rotate(360deg); transform: rotate(360deg);}}.jimu-widget-filter .filter-list .filter-item.applying .header .done,.jimu-widget-filter .filter-list .filter-item.requesting .header .setting{content: ''; border-radius: 50%; position: absolute; width: 16px; height: 16px; top: 12px; text-indent: -9999em; background: none; border-top: 2.2px solid #d6d6d6; border-right: 2.2px solid #d6d6d6; border-bottom: 2.2px solid #d6d6d6; border-left: 2.2px solid #4A4A4A; -webkit-animation: load8 1.1s infinite linear; -moz-animation: load8 1.1s infinite linear; -ms-animation: load8 1.1s infinite linear; -o-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; -webkit-transform: translateZ(0); -moz-transform: translateZ(0); -ms-transform: translateZ(0); -o-transform: translateZ(0); transform: translateZ(0);}.jimu-widget-filter .filter-list .filter-item.applying .header .done,.jimu-widget-filter .filter-list .filter-item.applied .header .done,.jimu-widget-filter .filter-list .filter-item.requesting .header .setting{display: block;}.jimu-widget-filter .filter-list .filter-item .body .parameters{margin: 0 30px;}.jimu-widget-filter .filter-list .filter-item .body .jimu-btn{background: #fff; border-radius: 0; width: 82px; border: 1px solid #c7c7c7; color: #000; font-size: 12px; margin-bottom: 15px;}.jimu-widget-filter .filter-list .filter-item .body .jimu-btn:hover{border: 1px solid #000;}.jimu-widget-filter .jimu-loading-shelter .loading-container{width: auto;}",
"*now":function(k){k(['dojo/i18n!*preload*widgets/Filter/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/query dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/filterUtils jimu/dijit/FilterParameters jimu/LayerInfos/LayerInfos jimu/FilterManager esri/request dojo/NodeList dojo/NodeList-dom".split(" "),function(k,s,f,p,n,l,c,t,a,m,d,g,q){return k([t,c],{name:"Filter",baseClass:"jimu-widget-filter",_itemTemplate:'\x3cli class\x3d"filter-item" data-index\x3d"${index}"\x3e\x3cdiv class\x3d"header jimu-leading-padding1" \x3e\x3cspan class\x3d"icon jimu-trailing-margin05"\x3e\x3cimg src\x3d"${icon}" /\x3e\x3c/span\x3e\x3cspan class\x3d"item-title"\x3e${title}\x3c/span\x3e\x3cspan class\x3d"done jimu-float-trailing jimu-leading-margin1"\x3e\x3c/span\x3e\x3cspan class\x3d"setting jimu-float-trailing" title\x3d"${toggleTip}" style\x3d"display:${hasValue}"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"body"\x3e\x3cdiv class\x3d"parameters"\x3e\x3c/div\x3e\x3cspan class\x3d"jimu-btn apply jimu-float-trailing jimu-trailing-margin25"\x3e${apply}\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e',
_store:null,postCreate:function(){this.inherited(arguments);this._store={};this.layerInfosObj=d.getInstanceSync();this.filterUtils=new a;this.filterManager=g.getInstance();s.forEach(this.config.filters,function(a,c){var d=this.filterUtils.isAskForValues(a.filter),d={icon:a.icon?a.icon:this.folderUrl+"/css/images/default_task_icon.png",index:c,title:a.name,toggleTip:this.nls.toggleTip,hasValue:d?window.appInfo.isRunInMobile?"block !important":"":"none",isAskForValue:d,apply:p.getObject("jimuNls.common.apply",
!1,window)||"Apply"};this._store[a.layerId]||(this._store[a.layerId]={mapFilterControls:{}});var b=p.replace(this._itemTemplate,d,/\$\{([^\}]+)\}/ig),b=f.toDom(b);f.place(b,this.filterList);this.own(n(".header",b).on("click",p.hitch(this,"enableFilter",b,a,d)));"none"!==d.hasValue&&(this.own(n(".setting",b).on("click",p.hitch(this,"configFilter",b,a))),this.own(n(".apply",b).on("click",p.hitch(this,"applyFilterValues",b,a))),f.addClass(b,"requesting"),this.configFilter(b,a))},this)},startup:function(){this.inherited(arguments);
this.resize()},_getPriorityOfMapFilter:function(a){a=p.getObject(a+".mapFilterControls",!1,this._store);var c=0,d;for(d in a){var b=a[d];b.priority>c&&(c=b.priority)}return c},_getMapFilterControl:function(a){a=p.getObject(a+".mapFilterControls",!1,this._store);var c=!0,d;for(d in a){var b=a[d];0<b.priority&&(c=!!b.enable)}return c},_setItemFilter:function(a,c,d,b){this._store[a]["filter_item_"+c]=d;d=this._getPriorityOfMapFilter(a);p.setObject(a+".mapFilterControls.filter_item_"+c,{enable:b,priority:d+
1},this._store)},_removeItemFilter:function(a,c){delete this._store[a]["filter_item_"+c];delete this._store[a].mapFilterControls["filter_item_"+c]},_getExpr:function(a){if(!this._store[a])return null;var c=[];a=this._store[a];for(var d in a){var b=a[d];b&&"mapFilterControls"!==d&&c.push("("+b+")")}return c.join(" AND ")},_bindMapUpdateEvents:function(a,c){l.once(this.map,"update-start",p.hitch(this,function(){f.addClass(a,"applying")}));l.once(this.map,"update-end",p.hitch(this,function(){c?f.addClass(a,
"applied"):f.removeClass(a,"applied");f.removeClass(a,"applying")}))},enableFilter:function(a,c,d){if(!f.hasClass(a,"config-parameters")||a.filterParams&&a.filterParams.getFilterExpr())if(d.isAskForValue&&(!a.filterParams||!a.filterParams.getFilterExpr()))this.configFilter(a,c);else{d=c.layerId;var b=f.getAttr(a,"data-index"),g=null,k=this.layerInfosObj.getLayerInfoById(d),g=f.hasClass(a,"applied");k.isShowInMap()&&k.isInScale()?this._bindMapUpdateEvents(a,!g?!0:!1):g?f.removeClass(a,"applied"):f.addClass(a,
"applied");k=null;g?this._removeItemFilter(d,b):this._setItemFilter(d,b,a.filterParams?a.filterParams.getFilterExpr():c.filter.expr,c.enableMapFilter);g=this._getExpr(d);k=this._getMapFilterControl(d);this.filterManager.applyWidgetFilter(d,this.id,g,k)}},configFilter:function(a,c,d){a.filterParams?f.hasClass(a,"config-parameters")?(f.removeClass(a,"config-parameters"),this._changeItemTitleWidth(a,window.appInfo.isRunInMobile?60:45)):(f.addClass(a,"config-parameters"),this._changeItemTitleWidth(a,
60)):q({url:c.url,content:{f:"json"},handleAs:"json",callbackPrams:"callback"}).then(p.hitch(this,function(b){f.addClass(a,"config-parameters");f.removeClass(a,"requesting");var d=n(".parameters",a)[0];a.handles=[];a.filterParams=new m;var g=p.clone(c.filter);a.filterParams.build(c.url,b,g);this.own(l(a.filterParams,"change",p.hitch(this,function(b){b?(n(".apply",a).removeClass("disable-apply"),a.expr=b):(delete a.expr,n(".apply",a).addClass("disable-apply"))})));a.expr=a.filterParams.getFilterExpr();
a.expr?n(".apply",a).removeClass("disable-apply"):(delete a.expr,n(".apply",a).addClass("disable-apply"));a.filterParams.placeAt(d);this._changeItemTitleWidth(a,60)}));d&&d.target&&d.stopPropagation()},applyFilterValues:function(a,c,d){var b=a.filterParams&&(a.expr||a.filterParams.getFilterExpr());if(b){a.expr=b;var b=c.layerId,g=f.getAttr(a,"data-index"),k=this.layerInfosObj.getLayerInfoById(b);k.isShowInMap()&&k.isInScale()?this._bindMapUpdateEvents(a,!0):f.addClass(a,"applied");this._setItemFilter(b,
g,a.expr,c.enableMapFilter);a=this._getExpr(b);c=this._getMapFilterControl(b);this.filterManager.applyWidgetFilter(b,this.id,a,c)}d.stopPropagation()},resize:function(){this.inherited(arguments);this._changeItemTitleWidth(this.domNode,window.appInfo.isRunInMobile?60:45)},_changeItemTitleWidth:function(a,c){var d=n(".header",a)[0];d&&(d=f.getContentBox(d).w-c,0<d&&n(".header .item-title",a).style({maxWidth:d+"px"}))},destroy:function(){n(".filter-item",this.filterList).forEach(function(a){delete a.filterParams;
delete a.expr});if(this._store)for(var a in this._store)a&&this.filterManager.applyWidgetFilter(a,this.id,"",null);this.inherited(arguments)}})});