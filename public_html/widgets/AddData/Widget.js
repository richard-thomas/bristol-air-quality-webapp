// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/AddData/search/SearchContext":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(m,d){return m(null,{allowArcGISOnline:!0,arcgisOnlinePortal:null,orgId:null,portal:null,username:null,constructor:function(l){d.mixin(this,l)}})})},"widgets/AddData/search/util":function(){define(["dojo/_base/array"],function(m){return{checkMixedContent:function(d){"string"===typeof window.location.href&&0===window.location.href.indexOf("https://")&&"string"===typeof d&&0===d.indexOf("http://")&&
(d="https:"+d.substring("5"));return d},endsWith:function(d,l){return-1!==d.indexOf(l,d.length-l.length)},escapeForLucene:function(d){return d.replace(RegExp('(\\+|\\-|\\\x26|\\!|\\(|\\)|\\{|\\}|\\[|\\]|\\^|\\"|\\~|\\*|\\?|\\:|\\\\)',"g"),"\\$1")},findLayersAdded:function(d,l){var e=[],k=[],t=[],b={itemIds:k,layers:t};if(!d)return b;var r="string"===typeof l&&0<l.length;m.forEach(d.layerIds,function(b){e.push(b)});m.forEach(d.graphicsLayerIds,function(b){e.push(b)});m.forEach(e,function(b){if((b=
d.getLayer(b))&&("string"===typeof b.xtnItemId&&0<b.xtnItemId.length)&&(!r||b.xtnItemId===l))t.push(b),-1===k.indexOf(b.xtnItemId)&&k.push(b.xtnItemId)});return b},setNodeText:function(d,l){d.innerHTML="";l&&d.appendChild(document.createTextNode(l))},setNodeTitle:function(d,l){d.title="";l&&d.setAttribute("title",l)},setNodeHTML:function(d,l){d.innerHTML="";l&&(d.innerHTML=l)}}})},"widgets/AddData/search/SearchPane":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/SearchPane.html dojo/i18n!../nls/strings ./SearchBox ./BBoxOption ./ScopeOptions ./TypeOptions ./SortOptions ./ResultsPane ./Paging ./ResultCount".split(" "),
function(m,d,l,e,k,t,b,r,n,w){return m([t,b,r],{i18n:w,templateString:n,qDefaultFilter:null,qRequiredFilter:null,searchOnStart:!0,searchContext:null,wabWidget:null,_dfd:null,postCreate:function(){this.inherited(arguments);l.forEach(this.getComponents(),function(b){b.searchPane=this},this)},startup:function(){this._started||(this.inherited(arguments),this.bindEvents(),this.searchOnStart&&this.search())},_onFilterPlaceholderChanged:function(){k.contains(this.filterPlaceholder,"opened")?(k.remove(this.filterPlaceholder,
"opened"),k.remove(this.filterWrapper,"show")):(this.filterWrapper.style.top=this.headerNode.clientHeight+"px",k.add(this.filterPlaceholder,"opened"),k.add(this.filterWrapper,"show"))},_onSearchBoxPlaceholderChanged:function(){},bindEvents:function(){this.own(e(this.filterPlaceholder,"click",d.hitch(this,this._onFilterPlaceholderChanged)))},buildQueryParams:function(b){var r=null;"string"===typeof this.qRequiredFilter&&0<this.qRequiredFilter.length&&(r=this.qRequiredFilter);var n={q:r,canSortByRelevance:!1};
l.forEach(this.getComponents(),function(r){r.appendQueryParams(n,b)});delete n.canSortByRelevance;null===n.q&&("string"===typeof this.qDefaultFilter&&0<this.qDefaultFilter.length)&&(n.q=this.qDefaultFilter);return n},getComponents:function(){return[this.searchBox,this.bboxOption,this.scopeOptions,this.typeOptions,this.sortOptions,this.resultsPane,this.paging,this.resultCount]},resize:function(){this.contentNode.style.top=this.headerNode.clientHeight+1+"px"},search:function(){var b=this,n={},r=this.buildQueryParams(n);
if(!(null===r||null===r.q)){r&&null===r.sortField&&(r.sortOrder="desc");var d=this.searchContext.portal;n.scopeIsArcGISOnline&&this.searchContext.arcgisOnlinePortal&&(d=this.searchContext.arcgisOnlinePortal);null!==this._dfd&&this._dfd.cancel("Search aborted.",!1);var k=null;this._dfd=k=d.queryItems(r).then(function(r){k.isCanceled()||(r.queryParams||(r.queryParams={start:r.start,num:r.num},!r.nextQueryParams&&("undefined"!==typeof r.nextStart&&-1!==r.nextStart)&&(r.nextQueryParams={start:r.nextStart})),
l.forEach(b.getComponents(),function(b){b.processResults(r)}))}).otherwise(function(b){console.warn("searchError",b)})}},_showLayers:function(){this.wabWidget&&this.wabWidget.showLayers()}})})},"widgets/AddData/search/SearchBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys ./SearchComponent dojo/text!./templates/SearchBox.html dojo/i18n!../nls/strings".split(" "),function(m,d,l,e,k,t,b){return m([k],{i18n:b,templateString:t,postCreate:function(){this.inherited(arguments);
this._checkClearButton();this.own(l(this.searchTextBox,"keyup",d.hitch(this,function(b){this._checkClearButton();b.keyCode===e.ENTER&&this.search()})))},_checkClearButton:function(){},clearButtonClicked:function(){this.searchTextBox.value="";this._checkClearButton();this.search()},searchButtonClicked:function(){this.search()},appendQueryParams:function(b){var n=this.searchTextBox.value;null!==n&&(n=d.trim(n));null!==n&&0<n.length&&(b.canSortByRelevance=!0,n="("+n+")",b.q=null!==b.q&&0<b.q.length?
b.q+(" AND "+n):n)}})})},"widgets/AddData/search/SearchComponent":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(m,d,l,e){return m([d,l,e],{isSearchComponent:!0,searchPane:null,template:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.inherited(arguments)},appendQueryParams:function(d,e){},processResults:function(d){},getConfig:function(){return this.searchPane&&this.searchPane.wabWidget&&this.searchPane.wabWidget.config?
this.searchPane.wabWidget.config:{}},getMap:function(){return this.searchPane&&this.searchPane.wabWidget?this.searchPane.wabWidget.map:null},search:function(){this.searchPane&&this.searchPane.search()}})})},"widgets/AddData/search/BBoxOption":function(){define(["dojo/_base/declare","./SearchComponent","dojo/text!./templates/BBoxOption.html","dojo/i18n!../nls/strings","dijit/form/CheckBox"],function(m,d,l,e){return m([d],{i18n:e,templateString:l,postCreate:function(){this.inherited(arguments);this.bboxToggle.set("checked",
!0)},bboxClicked:function(){this.search()},_getBBox:function(){var d;if(d=this.getMap())if(d=d.geographicExtent)return d.xmin+","+d.ymin+","+d.xmax+","+d.ymax;return null},appendQueryParams:function(d){if(this.bboxToggle.get("checked")){var e=this._getBBox();null!==e&&(d.canSortByRelevance=!0,d.bbox=e)}}})})},"widgets/AddData/search/ScopeOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-class ./SearchComponent dojo/text!./templates/ScopeOptions.html dojo/i18n!../nls/strings ./util".split(" "),
function(m,d,l,e,k,t,b,r){return m([k],{i18n:b,templateString:t,curatedFilter:null,postCreate:function(){this.inherited(arguments)},startup:function(){this._started||(this.inherited(arguments),this.initOptions())},hideDropdown:function(){e.remove(this.scopePlaceholder,"opened");e.remove(this.btnGroup,"show")},initOptions:function(){var n=this.searchPane.searchContext,k="string"===typeof n.username&&0<n.username.length,l=this.getConfig().scopeOptions;this.curatedFilter=l.Curated.filter;var v=null,
n=function(n,e){var m=l[n];m&&m.allow?("string"===typeof m.label&&0<d.trim(m.label).length?r.setNodeText(e,d.trim(m.label)):!k&&"MyOrganization"===n&&r.setNodeText(e,b.search.scopeOptions.anonymousContent),l.defaultScope===n&&(v=e)):e.style.display="none"};n("MyContent",this.MyContentToggle);n("MyOrganization",this.MyOrganizationToggle);n("Curated",this.CuratedToggle);n("ArcGISOnline",this.ArcGISOnlineToggle);v||(l.MyOrganization.allow?v=this.MyOrganizationToggle:l.ArcGISOnline.allow?v=this.ArcGISOnlineToggle:
l.Curated.allow?v=this.CuratedToggle:l.MyContent.allow&&(v=this.MyContentToggle));v&&(e.add(v,"active"),this.scopePlaceholderText.innerHTML=v.innerHTML)},optionClicked:function(b){this.toggleClassName(b);this.hideDropdown();this.search()},scopePlaceholderClicked:function(b){b.preventDefault();e.contains(this.scopePlaceholder,"opened")?this.hideDropdown():this.showDropdown()},showDropdown:function(){e.add(this.scopePlaceholder,"opened");e.add(this.btnGroup,"show")},toggleClassName:function(b){l.forEach(this.btnGroup.children,
function(b){e.remove(b,"active")});e.add(b.target,"active");this.scopePlaceholderText.innerHTML=b.target.innerHTML},appendQueryParams:function(b,d){var k=null;l.some(this.btnGroup.children,function(c){if(e.contains(c,"active"))return k=c.getAttribute("data-option-name"),!0});"undefined"===typeof k&&(k=null);var v=null,m=this.curatedFilter,t=this.searchPane.searchContext,A=t.username,B=t.orgId,D=!0;t.portal&&t.portal.isPortal&&(D=!1);"MyContent"===k?"string"===typeof A&&0<A.length&&(v="(owner:"+r.escapeForLucene(A)+
")"):"MyOrganization"===k?D&&("string"===typeof B&&0<B.length)&&(v="(orgid:"+r.escapeForLucene(B)+")"):"Curated"===k?"string"===typeof m&&0<m.length&&(v=m):"ArcGISOnline"===k&&t.allowArcGISOnline&&(d.scopeIsArcGISOnline=!0);null!==v&&0<v.length&&(v="("+v+")",b.q=null!==b.q&&0<b.q.length?b.q+(" AND "+v):v)}})})},"widgets/AddData/search/TypeOptions":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on ./SearchComponent dojo/text!./templates/TypeOptions.html dojo/i18n!../nls/strings esri/layers/VectorTileLayer dijit/TooltipDialog dijit/form/DropDownButton dijit/form/CheckBox".split(" "),
function(m,d,l,e,k,t,b,r){return m([k],{i18n:b,templateString:t,postCreate:function(){this.inherited(arguments);if(!r||!r.supported())console.warn("AddData: Vector Tile is not supported."),this.vectorTileNode.style.display="none";this.own(e(this.tooltipDialog,"open",l.hitch(this,function(){this.tooltipDialog.domNode.className+=" "+this.searchPane.wabWidget.appConfig.theme.name})))},getOptionWidgets:function(){return[this.mapServiceToggle,this.featureServiceToggle,this.imageServiceToggle,this.vectorTileServiceToggle,
this.kmlToggle,this.wmsToggle]},optionClicked:function(){this.search()},appendQueryParams:function(b){var r=function(b,r){0<b.length&&(b+=" OR ");return b+r},e="",k="",l=!1;d.forEach(this.getOptionWidgets(),function(b){var d=b.focusNode.getAttribute("data-option-q");k=r(k,d);b.get("checked")&&(e=r(e,d),l=!0)});l||(e=k);null!==e&&0<e.length&&(e="("+e+")",b.q=null!==b.q&&0<b.q.length?b.q+(" AND "+e):e)}})})},"widgets/AddData/search/SortOptions":function(){define("dojo/_base/declare dojo/on dojo/dom-class ./SearchComponent dojo/text!./templates/SortOptions.html dojo/i18n!../nls/strings dijit/form/Select".split(" "),
function(m,d,l,e,k,t){return m([e],{i18n:t,templateString:k,sortField:null,sortOrder:null,postCreate:function(){this.inherited(arguments);this.updateSortOrderButton();var b=this;this.own(this.sortSelect.on("change",function(){var r=b.sortField=b.sortSelect.get("value");if(""===r)b.sortOrder=null;else if("title"===r||"owner"===r)b.sortOrder="asc";else if("avgrating"===r||"numviews"===r||"modified"===r)b.sortOrder="desc";b.updateSortOrderButton();b.search()}));this.own(d(this.sortSelect.dropDown,"open",
function(){var b=this.domNode.parentElement;b&&l.add(b,"add-data-widget-popup")}))},sortOrderClicked:function(){"asc"===this.sortOrder?(this.sortOrder="desc",this.updateSortOrderButton(),this.search()):"desc"===this.sortOrder&&(this.sortOrder="asc",this.updateSortOrderButton(),this.search())},updateSortOrderButton:function(){var b=this.sortOrderBtn;b.style.visibility=null!==this.sortField&&0<this.sortField.length?"visible":"hidden";"desc"===this.sortOrder?l.add(b,"descending"):l.remove(b,"descending")},
appendQueryParams:function(b){b.sortField=null;b.sortOrder=null;var d=this.sortField,e=this.sortOrder;null!==d&&0<d.length?(b.sortField=d,null!==e&&0<e.length&&(b.sortOrder=e)):b.canSortByRelevance||(b.sortField="numviews",b.sortOrder="desc")}})})},"widgets/AddData/search/ResultsPane":function(){define("dojo/_base/declare dojo/_base/array ./SearchComponent dojo/text!./templates/ResultsPane.html dojo/i18n!../nls/strings ./ItemCard ./util".split(" "),function(m,d,l,e,k,t,b){return m([l],{i18n:k,templateString:e,
postCreate:function(){this.inherited(arguments)},addItem:function(b){b.placeAt(this.itemsNode)},destroyItems:function(){this.noMatchNode.style.display="none";this.noMatchNode.innerHTML="";this.destroyDescendants(!1)},showNoMatch:function(){b.setNodeText(this.noMatchNode,k.search.resultsPane.noMatch);this.noMatchNode.style.display="block"},processResults:function(e){this.destroyItems();var k=e.results;if(k&&0<k.length){var l=b.findLayersAdded(this.getMap(),null).itemIds;d.forEach(e.results,function(b){this.addItem(new t({item:b,
canRemove:-1!==l.indexOf(b.id),resultsPane:this}))},this)}else this.showNoMatch()}})})},"widgets/AddData/search/ItemCard":function(){define("dojo/_base/declare dojo/_base/array dojo/date/locale dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemCard.html dojo/i18n!../nls/strings ./util ./LayerLoader".split(" "),function(m,d,l,e,k,t,b,r,n,w,E){return m([k,t,b],{i18n:n,templateString:r,canRemove:!1,item:null,resultsPane:null,_dfd:null,postCreate:function(){this.inherited(arguments)},
startup:function(){this._started||(this.inherited(arguments),this.render())},addClicked:function(){var b=this,r=this.addButton;if(!e.contains(r,"disabled"))if(e.add(r,"disabled"),this.canRemove){var k=this.resultsPane.getMap();w.setNodeText(b.messageNode,n.search.item.messages.removing);var l=w.findLayersAdded(k,this.item.id).layers;d.forEach(l,function(b){k.removeLayer(b)});this.canRemove=!1;w.setNodeText(b.messageNode,"");w.setNodeText(this.addButton,n.search.item.actions.add);e.remove(r,"disabled")}else w.setNodeText(b.messageNode,
n.search.item.messages.adding),(new E).addItem(this.item,this.resultsPane.getMap()).then(function(d){d?(b.canRemove=!0,w.setNodeText(b.messageNode,""),w.setNodeText(b.addButton,n.search.item.actions.remove)):w.setNodeText(b.messageNode,n.search.item.messages.addFailed);e.remove(r,"disabled")}).otherwise(function(d){console.warn("Add layer failed.");console.warn(d);w.setNodeText(b.messageNode,n.search.item.messages.addFailed);e.remove(r,"disabled");d&&("string"===typeof d.message&&0<d.message.length)&&
console.log("")})},detailsClicked:function(){var b=this.item,b=w.checkMixedContent(b.portalUrl)+"/home/item.html?id\x3d"+encodeURIComponent(b.id);window.open(b)},formatDate:function(b){"number"===typeof b&&(b=new Date(b));return l.format(b,{selector:"date",datePattern:n.search.item.dateFormat})},render:function(){w.setNodeText(this.titleNode,this.item.title);w.setNodeTitle(this.titleNode,this.item.title);this._renderThumbnail();this._renderTypeOwnerDate();this.canRemove&&w.setNodeText(this.addButton,
n.search.item.actions.remove)},_renderThumbnail:function(){var b=this.thumbnailNode,d=this.item.thumbnailUrl;b.innerHTML="";var d=w.checkMixedContent(d),e=document.createElement("IMG");e.src=d||"widgets/AddData/images/placeholder_120x80.png";b.appendChild(e)},_renderTypeOwnerDate:function(){var b,d=this.item;b=n.search.item.types[d.type];if("undefined"===typeof b||null===b)b=d.type;b=n.search.item.typeByOwnerPattern.replace("{type}",b);b=b.replace("{owner}",d.owner);w.setNodeText(this.typeByOwnerNode,
b)}})})},"widgets/AddData/search/LayerLoader":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/Deferred dojo/json dojo/i18n!../nls/strings ./util esri/lang esri/request esri/arcgis/utils esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ArcGISImageServiceLayer esri/layers/ArcGISTiledMapServiceLayer esri/layers/FeatureLayer esri/layers/ImageServiceParameters esri/layers/KMLLayer esri/layers/MosaicRule esri/layers/RasterFunction esri/layers/VectorTileLayer esri/layers/WMSLayer esri/dijit/PopupTemplate esri/InfoTemplate esri/renderers/jsonUtils jimu/utils".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c,f,u,s,x,I,y,H){return m(null,{item:null,itemUrl:null,map:null,serviceUrl:null,constructor:function(a){d.mixin(this,a)},addItem:function(a,g){var q=new k;this.map=g;this.item=a;this.itemUrl=this._checkMixedContent(a.itemUrl);this.serviceUrl=this._checkMixedContent(a.url);if("Feature Service"===a.type)return this._addFeatureService();if("Image Service"===a.type)return this._addImageService();if("KML"===a.type)return this._addKML();if("Map Service"===a.type)return this._addMapService();
if("Vector Tile Service"===a.type)return this._addVectorTileService();if("WMS"===a.type)return this._addWMS();console.warn("Unsupported item type: ",a.type);q.resolve(null);return q},_addFeatureService:function(){var a=this,g=new k,q=this.serviceUrl,h=this.item,p={},c=null,f=[],b=[];a._readItemJsonData().then(function(g){(p=g||{})&&(p.layers&&0<p.layers.length)&&l.forEach(p.layers,function(a){"undefined"!==typeof a.id&&null!==a.id&&(null===c&&(c=[]),c.push(a.id))});return a._readRestInfo(q)}).then(function(g){g&&
"string"===typeof g.type&&"Feature Layer"===g.type?(g=new A(q,{id:a._generateLayerId(),outFields:["*"]}),f.push(a._waitForLayer(g))):g&&(g.layers&&0<g.layers.length)&&l.forEach(g.layers,function(g){var h=!0;null!==c&&0<c.length&&(h=l.some(c,function(a){return a===g.id}));h&&(h=new A(q+"/"+g.id,{id:a._generateLayerId(),outFields:["*"]}),f.push(a._waitForLayer(h)))});return e(f)}).then(function(a){l.forEach(a,function(a){b.push(a)});b.reverse();return b}).then(function(){l.forEach(b,function(g){var q=
a._processFeatureLayer(g,h,p);g.arcgisProps={title:q.title};g._titleForLegend=q.title;n.isDefined(g.title)||(g.title=q.title);a._addLayer(g)})}).then(function(){g.resolve(b)}).otherwise(function(a){g.reject(a)});return g},_addImageService:function(){var a=this,g=new k;a._readItemJsonData().then(function(g){return a._newImageServiceLayer(g||{})}).then(function(q){a._addLayer(q);g.resolve(q)}).otherwise(function(a){g.reject(a)});return g},_addKML:function(){var a=this,g=new k;a._newKMLLayer().then(function(q){q&&
(q.title=a.item.title);a._addLayer(q);g.resolve(q)}).otherwise(function(a){g.reject(a)});return g},_addMapService:function(){var a=this,g=new k;a._readItemJsonData().then(function(g){return a._newMapServiceLayer(g||{})}).then(function(q){a._addLayer(q);g.resolve(q)}).otherwise(function(a){g.reject(a)});return g},_addVectorTileService:function(){var a=this,g=new k;a._newVectorTileLayer().then(function(q){a._addLayer(q);g.resolve(q)}).otherwise(function(a){g.reject(a)});return g},_addWMS:function(){var a=
this,g=new k;a._readItemJsonData().then(function(g){return a._newWMSLayer(g||{})}).then(function(q){q&&(q.title=a.item.title);a._addLayer(q);g.resolve(q)}).otherwise(function(a){g.reject(a)});return g},_addLayer:function(a){var g=this.item;a&&(a.xtnItemId=g.id,a.xtnAddData=!0,!a.arcgisProps&&g&&(a.arcgisProps={title:g.title},a._titleForLegend=g.title),n.isDefined(a.title)||(a.title=g.title),this.map.addLayer(a))},_checkMixedContent:function(a){return r.checkMixedContent(a)},_checkUrl:function(a){return E._checkUrl(a)},
_checkVectorTileUrl:function(a,g){var q=new k;if(-1!==a.indexOf(".json",a.length-5))return g.styleUrl=a,q.resolve(a),q;var h={url:null,content:{},handleAs:"json",callbackParamName:"callback"};this.itemUrl?(h.url=this.itemUrl+"/resources/styles/root.json",w(h,{}).then(function(){g.styleUrl=h.url;q.resolve(h.url)}).otherwise(function(){h.url=a+"/resources/styles/root.json";w(h,{}).then(function(){g.styleUrl=h.url;q.resolve(h.url)}).otherwise(function(){g.url=a;q.resolve(a)})})):(h.url=a+"/resources/styles/root.json",
w(h,{}).then(function(){g.styleUrl=h.url;q.resolve(h.url)}).otherwise(function(){g.url=a;q.resolve(a)}));return q},_generateLayerId:function(){return this._generateLayerIds(1)[0]},_generateLayerIds:function(a){var g,q=[];for(g=0;g<a;g++)q.push(this._generateRandomId());return q},_generateRandomId:function(){var a=null,a="function"===typeof Date.now?Date.now():(new Date).getTime(),g=(""+Math.random()).replace("0.","r");return(a+""+g).replace(/-/g,"")},_makeFeatureLayerTitle:function(a,g,q){var h,p,
c;try{if(g&&q&&g===q||g&&q&&(h=q.indexOf(g),0===h&&(p=q.substring(h+g.length+1),13<=p.length&&(c=/^\d+$/,c.test(p)))))return g}catch(f){}return a.replace("{serviceName}",g).replace("{layerName}",q)},_newImageServiceLayer:function(a){var g=new k,q=this._generateLayerId(),h=this.serviceUrl,p={mapLayerId:q,bandIds:null,format:null,compressionQuality:null,opacity:1,visibility:!0};n.isDefined(a.visibility)&&!1===a.visibility&&(p.visibility=!1);n.isDefined(a.opacity)&&(p.opacity=a.opacity);n.isDefined(a.minScale)&&
!n.isDefined(p.minScale)&&(p.minScale=a.minScale);n.isDefined(a.maxScale)&&!n.isDefined(p.maxScale)&&(p.maxScale=a.maxScale);n.isDefined(a.refreshInterval)&&!n.isDefined(p.refreshInterval)&&(p.refreshInterval=a.refreshInterval);a.popupInfo&&(!p.popupInfo&&!p.disablePopup)&&(p.popupInfo=a.popupInfo);a.renderingRule&&!p.renderingRule&&(p.renderingRule=a.renderingRule,a.renderingRule.functionName&&(p.renderingRule.rasterFunction=a.renderingRule.functionName));a.bandIds&&!p.bandIds&&(p.bandIds=a.bandIds);
a.mosaicRule&&!p.mosaicRule&&(p.mosaicRule=a.mosaicRule);a.format&&!p.format&&(p.format=a.format);n.isDefined(a.compressionQuality)&&!n.isDefined(p.compressionQuality)&&(p.compressionQuality=a.compressionQuality);if(a.layerDefinition&&a.layerDefinition.definitionExpression&&(!n.isDefined(p.layerDefinition)||!n.isDefined(p.layerDefinition.definitionExpression)))p.layerDefinition=p.layerDefinition||{},p.layerDefinition.definitionExpression=a.layerDefinition.definitionExpression;a=new B;null!==p.bandIds&&
(a.bandIds=p.bandIds);null!==p.format&&(a.format=p.format,null!==p.compressionQuality&&(a.compressionQuality=p.compressionQuality));p.renderingRule&&p.renderingRule.rasterFunction&&(q=new f(p.renderingRule),a.renderingRule=q);p.mosaicRule&&(q=new c(p.mosaicRule),a.mosaicRule=q);n.isDefined(p.noData)&&(a.noData=p.noData);n.isDefined(p.noDataInterpretation)&&(a.noDataInterpretation=p.noDataInterpretation);n.isDefined(p.interpolation)&&(a.interpolation=p.interpolation);a={imageServiceParameters:a,opacity:p.opacity,
visible:p.visibility};n.isDefined(p.mapLayerId)&&(a.id=p.mapLayerId);n.isDefined(p.minScale)&&(a.minScale=p.minScale);n.isDefined(p.maxScale)&&(a.maxScale=p.maxScale);n.isDefined(p.refreshInterval)&&(a.refreshInterval=p.refreshInterval);n.isDefined(p.resourceInfo)&&(a.resourceInfo=p.resourceInfo);h=new z(this._checkUrl(h),a);this._waitForLayer(h).then(function(a){p.layerDefinition&&p.layerDefinition.definitionExpression&&a.setDefinitionExpression(p.layerDefinition.definitionExpression,!0);g.resolve(a)},
function(a){g.reject(a)});return g},_newInfoTemplate:function(a,g){if(a)try{return new x({description:a.description,title:a.title,showAttachments:a.showAttachments,fieldInfos:a.fieldInfos,mediaInfos:a.mediaInfos})}catch(q){console.error(q)}var h=new I;n.isDefined(g)&&h.setTitle(g);return h},_newKMLLayer:function(){var a={id:this._generateLayerId()},a=new D(this.serviceUrl,a);return this._waitForLayer(a)},_newMapServiceLayer:function(a){var g=this,q=new k,h=this.serviceUrl,p=this._generateLayerId();
w({url:h,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{}).then(function(c){var f=null,f={id:p},f=c.tileInfo?new C(h,f):new v(h,f);g._waitForLayer(f).then(function(h){var p=null;l.forEach(h.layerInfos,function(h){var q=null;a&&l.some(a.layers,function(a){if(h.id===a.id)return q=a,!0});var c=null;q&&q.popupInfo&&(c=q.popupInfo);c&&(null===p&&(p={}),p[h.id]={infoTemplate:g._newInfoTemplate(c,h.name)})});null===h.infoTemplates&&p&&(h.infoTemplates=p);q.resolve(h)},function(a){q.reject(a)})},
function(a){q.reject(a)});return q},_newPopupInfo:function(a,g){if(a&&a.fields){var q={title:a.name,fieldInfos:[],description:null,showAttachments:!0,mediaInfos:[]};"string"===typeof g&&0<g.length&&(q.title=g);l.forEach(a.fields,function(a){var g=H.getDefaultPortalFieldInfo(a);g.visible=!0;g.isEditable=a.editable;q.fieldInfos.push(g)});return q}return null},_newVectorTileLayer:function(){var a=this,g=new k,q={},h=this.serviceUrl,p=this._generateLayerId();"string"===typeof h&&0<h.length?this._checkVectorTileUrl(h,
q).then(function(h){"string"===typeof h&&0<h.length?(h=a._checkMixedContent(h),h=new u(h,{id:p,opacity:1,visible:!0}),a._waitForLayer(h).then(function(a){g.resolve(a)},function(a){g.reject(a)})):g.resolve(null)},function(a){g.reject(a)}):g.resolve(null);return g},_newWMSLayer:function(){var a={id:this._generateLayerId()},a=new s(this.serviceUrl,a),g=this,a=this._waitForLayer(a);a.then(function(a){g._setWMSVisibleLayers(a)});return a},_processFeatureLayer:function(a,g,q){var h=this,p=b.search.featureLayerTitlePattern,
c=null;q&&q.layers&&0<q.layers.length?l.some(q.layers,function(q){var f,b,s,u=!1;if(q.id===a.layerId){q.popupInfo&&(f=q.popupInfo,f=t.parse(t.stringify(f)),f=new x(f),a.setInfoTemplate(f),u=!0);n.isDefined(q.showLabels)&&a.setShowLabels(q.showLabels);n.isDefined(q.refreshInterval)&&a.setRefreshInterval(q.refreshInterval);n.isDefined(q.showLegend)&&console.log("");n.isDefined(q.timeAnimation)&&!1===q.timeAnimation&&console.log("");if(f=q.layerDefinition)f.definitionExpression&&a.setDefinitionExpression(f.definitionExpression),
f.displayField&&a.displayField(f.displayField),f.drawingInfo&&(f.drawingInfo.renderer&&(b=t.parse(t.stringify(f.drawingInfo.renderer)),s=y.fromJson(b),b.type&&"classBreaks"===b.type&&(s.isMaxInclusive=!0),a.setRenderer(s)),n.isDefined(f.drawingInfo.transparency)&&a.setOpacity(1-f.drawingInfo.transparency/100)),n.isDefined(f.minScale)&&a.setMinScale(f.minScale),n.isDefined(f.maxScale)&&a.setMaxScale(f.maxScale),n.isDefined(f.defaultVisibility)&&!1===f.defaultVisibility&&a.setVisibility(!1);u||h._setFeatureLayerInfoTemplate(a,
q.popupInfo);c={url:a.url,id:a.id,itemId:g.id,title:h._makeFeatureLayerTitle(p,g.title,a.name)};return!0}}):(c={url:a.url,id:a.id,itemId:g.id,title:h._makeFeatureLayerTitle(p,g.title,a.name)},h._setFeatureLayerInfoTemplate(a,null,c.title));return c},_readItemJsonData:function(){return w({url:this.itemUrl+"/data",content:{f:"json"},handleAs:"json"},{})},_readRestInfo:function(a){return w({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{})},_setFeatureLayerInfoTemplate:function(a,
g,q){g||(g=this._newPopupInfo(a,q));g=this._newInfoTemplate(g,q);a.setInfoTemplate(g)},_setWMSVisibleLayers:function(a){var g=[];a&&(l.some(a.layerInfos,function(a){if("string"===typeof a.name&&0<a.name.length)if(10>g.length)g.push(a.name);else return!0}),10>=g.length&&a.setVisibleLayers(g))},_waitForLayer:function(a){var g=new k,q=[];if(a.loaded)return g.resolve(a),g;if(a.loadError)return g.reject(a.loadError),g;var h=function(){l.forEach(q,function(a){a.remove()})};q.push(a.on("load",function(a){h();
g.resolve(a.layer)}));q.push(a.on("error",function(a){h();a=a.error;try{a.message&&-1!==a.message.indexOf("Unable to complete")?(console.warn("layerAccessError",a),g.reject(Error(b.search.layerInaccessible))):g.reject(a)}catch(q){g.reject(a)}}));return g}})})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(m,d,l,e,k,t){m=m(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,
width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(b){var d=this.bbox||this.extent;b=(d=d&&b&&d._normalize(!0))?d.spatialReference.wkid||l.toJson(d.spatialReference.toJson()):null;var e=this.imageSpatialReference,d={bbox:d?d.xmin+","+d.ymin+","+d.xmax+","+d.ymax:null,bboxSR:b,size:null!==
this.width&&null!==this.height?this.width+","+this.height:null,imageSR:e?e.wkid||l.toJson(e.toJson()):b,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?l.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?l.toJson(this.renderingRule.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,
adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};b=this.timeExtent;d.time=b?b.toJson().join(","):null;return t.filter(d,function(b){if(null!==b&&void 0!==b)return!0})}});d.mixin(m,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});return m})},"esri/layers/KMLLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/sniff dojo/io-query dojo/dom-construct dojo/dom-style ../kernel ../config ../lang ../request ../urlUtils ../SpatialReference ../geometry/webMercatorUtils ../dijit/PopupTemplate ./layer ./KMLFolder ./KMLGroundOverlay ./MapImageLayer ./FeatureLayer".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c,f,u,s,x,I){var y=d([f],{declaredClass:"esri.layers.KMLLayer",serviceUrl:A.getProtocolForWebResource()+"//utility.arcgis.com/sharing/kml",constructor:function(c,a){c||console.log("KMLLayer:constructor - please provide url for the KML file");this._outSR=a&&a.outSR||new B({wkid:4326});this._options=e.mixin({},a);v.defaults.kmlService&&(this.serviceUrl=v.defaults.kmlService);var g=this.linkInfo=a&&a.linkInfo;g&&(this.visible=!!g.visibility,this._waitingForMap=
!!g.viewFormat);(!g||g&&g.visibility&&!this._waitingForMap)&&this._parseKml();this.refresh=e.hitch(this,this.refresh);this.registerConnectEvents("esri.layers.KMLLayer",!0)},getFeature:function(c){if(c){var a=c.type,g=c.id,q;switch(a){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":(c=this["_"+a])&&(q=e.getObject("_mode._featureMap."+g,!1,c));break;case "GroundOverlay":if(c=this._groundLyr){var h=c.getImages(),a=h.length;for(c=0;c<a;c++)if(h[c].id===g){q=h[c];break}}break;
case "ScreenOverlay":break;case "NetworkLink":k.some(this._links,function(a){return a.linkInfo&&a.linkInfo.id===g?(q=a,!0):!1});break;case "Folder":a=(h=this.folders)?h.length:0;for(c=0;c<a;c++)if(h[c].id===g){q=h[c];break}break;default:console.log("KMLLayer:getFeature - unknown feature type")}return q}},getLayers:function(){var c=[];this._groundLyr&&c.push(this._groundLyr);this._fLayers&&(c=c.concat(this._fLayers));this._links&&k.forEach(this._links,function(a){a.declaredClass&&c.push(a)});return c},
setFolderVisibility:function(c,a){c&&(this._fireUpdateStart(),(c.visible=a)&&(a=this._areLocalAncestorsVisible(c)),this._setState(c,a),this._fireUpdateEnd())},onRefresh:function(){},onOpacityChange:function(){},_parseKml:function(c){var a=this;this._fireUpdateStart();this._io=C({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(c),model:"simple",folders:"",refresh:this.loaded?!0:void 0,outSR:t.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(g){a._io=
null;a._initLayer(g)},error:function(g){a._io=null;g=e.mixin(Error(),g);g.message="Unable to load KML: "+(g.message||"");a._fireUpdateEnd(g);a.onError(g)}})},_initLayer:function(f){var a;this.loaded&&(a=[],k.forEach(this.folders,function(g){g.visible&&a.push(g.id)}),this._options.minScale=this.minScale,this._options.maxScale=this.maxScale,this._options.opacity=this.opacity,this._removeInternalLayers());this.name=f.name;this.description=f.description;this.snippet=f.snippet;this.visibility=f.visibility;
this.featureInfos=f.featureInfos;var g,q,h=this.folders=f.folders,p=[],b;if(h){q=h.length;for(g=0;g<q;g++)b=h[g]=new u(h[g]),-1===b.parentFolderId&&p.push(b)}var h=this._links=f.networkLinks,G;q=h?h.length:0;for(g=0;g<q;g++)h[g].viewRefreshMode&&-1!==h[g].viewRefreshMode.toLowerCase().indexOf("onregion")||(G=e.mixin({},this._options),G.linkInfo=h[g],G.id&&(G.id=G.id+"_"+g),h[g]=new y(h[g].href,G),h[g]._parentLayer=this,h[g]._parentFolderId=this._getLinkParentId(h[g].linkInfo.id));if((h=f.groundOverlays)&&
0<h.length){G=e.mixin({},this._options);G.id&&(G.id+="_mapImage");b=this._groundLyr=new x(G);q=h.length;for(g=0;g<q;g++)b.addImage(new s(h[g]))}if((f=e.getObject("featureCollection.layers",!1,f))&&0<f.length)this._fLayers=[],k.forEach(f,function(a,g){var h=e.getObject("featureSet.features",!1,a);h&&0<h.length&&(G=e.mixin({outFields:["*"],infoTemplate:a.popupInfo?new c(a.popupInfo):null,editable:!1},this._options),G.id&&(G.id=G.id+"_"+g),a.layerDefinition.capabilities="Query,Data",h=new I(a,G),h.geometryType&&
(this["_"+h.geometryType]=h),this._fLayers.push(h))},this),0===this._fLayers.length&&delete this._fLayers;if(!this.loaded){q=p.length;for(g=0;g<q;g++)b=p[g],this._setState(b,b.visible)}this._fireUpdateEnd();this.loaded?(this._addInternalLayers(),k.forEach(this.folders,function(g){-1<k.indexOf(a,g.id)?this.setFolderVisibility(g,!0):this.setFolderVisibility(g,!1)},this),this.onRefresh()):(this.loaded=!0,this.onLoad(this))},_addInternalLayers:function(){var c=this._map;this._fireUpdateStart();this._links&&
k.forEach(this._links,function(a){a.declaredClass&&(c.addLayer(a),a._waitingForMap&&(a._waitingForMap=null,a.visible?a._parseKml(c):a._wMap=c))});var a=c.spatialReference,g=this._outSR,q;if(!a.equals(g))if(a.isWebMercator()&&4326===g.wkid)q=D.geographicToWebMercator;else if(g.isWebMercator()&&4326===a.wkid)q=D.webMercatorToGeographic;else{console.log("KMLLayer:_setMap - unsupported workflow. Spatial reference of the map and kml layer do not match, and the conversion cannot be done on the client.");
return}this._groundLyr&&(q&&k.forEach(this._groundLyr.getImages(),function(a){a.extent=q(a.extent)}),c.addLayer(this._groundLyr));(a=this._fLayers)&&0<a.length&&k.forEach(a,function(a){if(q){var g=a.graphics,f,b,s=g?g.length:0;for(f=0;f<s;f++)(b=g[f].geometry)&&g[f].setGeometry(q(b))}c.addLayer(a)});this.onVisibilityChange(this.visible)},_removeInternalLayers:function(){var c=this._map;this._links&&k.forEach(this._links,function(a){a.declaredClass&&a._io&&a._io.cancel()});c&&k.forEach(this.getLayers(),
c.removeLayer,c)},_setState:function(c,a){var g=c.featureInfos,q,h,p,f=g?g.length:0,b=a?"show":"hide";for(p=0;p<f;p++)if(q=g[p],h=this.getFeature(q))if("Folder"===q.type)this._setState(h,a&&h.visible);else if("NetworkLink"===q.type)this._setInternalVisibility(h,a);else h[b]()},_areLocalAncestorsVisible:function(c){var a=c.parentFolderId;for(c=c.visible;c&&-1!==a;)a=this.getFeature({type:"Folder",id:a}),c=c&&a.visible,a=a.parentFolderId;return c},_setInternalVisibility:function(c,a){var g=c._parentLayer,
q=c._parentFolderId;for(a=a&&c.visible;a&&g;)a=a&&g.visible,-1<q&&(a=a&&g._areLocalAncestorsVisible(g.getFeature({type:"Folder",id:q}))),q=g._parentFolderId,g=g._parentLayer;this._setIntState(c,a)},_setIntState:function(c,a){c&&k.forEach(c.getLayers(),function(g){g.linkInfo?c._setIntState(g,a&&g.visible&&c._areLocalAncestorsVisible(c.getFeature({type:"Folder",id:g._parentFolderId}))):g.setVisibility(a)})},_getLinkParentId:function(c){var a=-1;this.folders&&k.some(this.folders,function(g){return g.networkLinkIds&&
-1!==k.indexOf(g.networkLinkIds,c)?(a=g.id,!0):!1});return a},_checkAutoRefresh:function(){var c=this.linkInfo;if(c)if(this.visible){if(this.loaded&&this._map){var a=c.refreshMode,g=c.refreshInterval,q=c.viewRefreshMode,c=c.viewRefreshTime;a&&(-1!==a.toLowerCase().indexOf("oninterval")&&0<g)&&(this._stopAutoRefresh(),this._timeoutHandle=setTimeout(this.refresh,1E3*g));q&&(-1!==q.toLowerCase().indexOf("onstop")&&0<c)&&!this._extChgHandle&&(this._extChgHandle=l.connect(this._map,"onExtentChange",this,
this._extentChanged))}}else this._stopAutoRefresh(),l.disconnect(this._extChgHandle),delete this._extChgHandle},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null},_getQueryParameters:function(c){c=c||this._map;var a={},g=this.linkInfo,q=c&&c.extent,h;this._url.query&&(e.mixin(a,this._url.query),h=!!this._url.query.token);if(E.id&&!h&&(h=E.id.findCredential(this._url.path)))a.token=h.token;if(g){h=g.viewFormat;var p=g.httpQuery,g=g.viewBoundScale;if(q&&h){var f=
q,b=q,s=q.spatialReference;s&&(s.isWebMercator()?f=D.webMercatorToGeographic(q):4326===s.wkid&&(b=D.geographicToWebMercator(q)));q=f.getCenter();b=Math.max(b.getWidth(),b.getHeight());g&&(f=f.expand(g));h=h.replace(/\[bboxWest\]/ig,f.xmin).replace(/\[bboxEast\]/ig,f.xmax).replace(/\[bboxSouth\]/ig,f.ymin).replace(/\[bboxNorth\]/ig,f.ymax).replace(/\[lookatLon\]/ig,q.x).replace(/\[lookatLat\]/ig,q.y).replace(/\[lookatRange\]/ig,b).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,
q.x).replace(/\[lookatTerrainLat\]/ig,q.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,q.x).replace(/\[cameraLat\]/ig,q.y).replace(/\[cameraAlt\]/ig,b).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,c.width).replace(/\[vertPixels\]/ig,c.height).replace(/\[terrainEnabled\]/ig,0);e.mixin(a,r.queryToObject(h))}p&&(p=p.replace(/\[clientVersion\]/ig,E.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,
m.locale),e.mixin(a,r.queryToObject(p)))}c=[];for(var u in a)z.isDefined(a[u])&&c.push(u+"\x3d"+a[u]);return(c=c.join("\x26"))?"?"+c:""},setScaleRange:function(c,a){this.inherited(arguments);k.forEach(this.getLayers(),function(g){g.setScaleRange(c,a)})},setOpacity:function(c){this.opacity!=c&&(k.forEach(this.getLayers(),function(a){a.setOpacity(c)}),this.opacity=c,this.onOpacityChange(c))},_setMap:function(c,a){this.inherited(arguments);this._map=c;var g=this._div=n.create("div",null,a);w.set(g,"position",
"absolute");this._addInternalLayers();this.evaluateSuspension();return g},_unsetMap:function(c,a){this._io&&this._io.cancel();this._stopAutoRefresh();l.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var g=this._div;g&&(a.removeChild(g),n.destroy(g));this._wMap=this._div=null;this.inherited(arguments)},onVisibilityChange:function(c){this.loaded?(this._fireUpdateStart(),this._setInternalVisibility(this,c),this._checkAutoRefresh(),this._fireUpdateEnd()):this.linkInfo&&
c&&(this._waitingForMap||this._parseKml(this._wMap))},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._parseKml()},getFeatureCollection:function(c){var a,g=[];if(c=this.getFeature({type:"Folder",id:c}))(a=k.map(c.featureInfos,function(a){if("esriGeometryPoint"===a.type||"esriGeometryPolyline"===a.type||"esriGeometryPolygon"===a.type)return a.id},this))&&0<a.length&&k.forEach(this._fLayers,function(c){var h,p;h=c.toJson();h.featureSet.features&&0<h.featureSet.features.length&&
(p=k.filter(h.featureSet.features,function(g){if(-1!==k.indexOf(a,g.attributes[c.objectIdField]))return g},this));p&&0<p.length&&(h.featureSet.features=p,g.push(h))},this);return g},getFeatureCount:function(c){c=this.getFeature({type:"Folder",id:c});var a={points:0,polylines:0,polygons:0};c&&k.forEach(c.featureInfos,function(g){"esriGeometryPoint"===g.type&&(a.points+=1);"esriGeometryPolyline"===g.type&&(a.polylines+=1);"esriGeometryPolygon"===g.type&&(a.polygons+=1)});return a},_extentChanged:function(){this._stopAutoRefresh();
this._timeoutHandle=setTimeout(this.refresh,1E3*this.linkInfo.viewRefreshTime)}});return y})},"esri/layers/KMLFolder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,d,l,e,k){return m(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(e){d.mixin(this,e);k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}})})},"esri/layers/KMLGroundOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),
function(m,d,l,e,k,t){return m([t],{declaredClass:"esri.layers.KMLGroundOverlay",constructor:function(b){k.isDefined(this.visibility)&&(this.visible=!!this.visibility)}})})},"esri/layers/WMSLayer":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D){return l([B],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,
3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(c,f){var b=E.urlToObject(c);if(b.query&&(b.query.version||b.query.Version||
b.query.VERSION))this.version=b.query.version||b.query.Version||b.query.VERSION;this.url=c=this._stripParameters(c,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));this._url=E.urlToObject(c);this._getCapabilitiesURL=c;this._initLayer=e.hitch(this,this._initLayer);this._parseCapabilities=e.hitch(this,this._parseCapabilities);this._getCapabilitiesError=e.hitch(this,this._getCapabilitiesError);f?(this.customParameters=
f.customParameters,this.customLayerParameters=f.customLayerParameters,this.imageFormat=this._getImageFormat(f.format),this.imageTransparency=!1!==f.transparent,this.visibleLayers=f.visibleLayers?f.visibleLayers:[],this.version=f.version||this.version,f.resourceInfo?this._readResourceInfo(f.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=m.toUrl("../images/pixel.png");this.extentProcessor=
this._createExtentProcessor(0);this._createChildLayer()},setVisibleLayers:function(c){this.visibleLayers=(c=this._checkVisibleLayersList(c))?c:[];this.refresh(!0)},setImageFormat:function(c){this.imageFormat=this._getImageFormat(c);this.refresh(!0)},setImageTransparency:function(c){this.imageTransparency=c;this.refresh(!0)},setCustomParameters:function(c,f){this.customParameters=c;this.customLayerParameters=f;this.refresh(!0)},refresh:function(){this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,
arguments)},getImageUrl:function(c,f,b,s){if(!this.visibleLayers||0===this.visibleLayers.length)s(this._blankImageURL);else{c=this._getImageParams(c,f,b);c=this._mixinCustomLayerParameters(c);f=this.getMapURL;var x;f+=-1===f.indexOf("?")?"?":"";for(x in c)c.hasOwnProperty(x)&&(f+="?"===f.substring(f.length-1,f.length)?"":"\x26",f+=x+"\x3d"+c[x]);s(E.addProxy(f))}},_setMap:function(c,f,b){var s=this.inherited(arguments);c.wrapAround180?this._childLayer&&(this.suspended&&this._childLayer.suspend(),
this._childLayer._setMap(c,s)):this._childLayer=this.extentProcessor=null;return s},_unsetMap:function(c,f){this._childLayer&&this._childLayer._unsetMap(c,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new B(null,{extentProcessor:this._createExtentProcessor(1)});this._childLayer._isChildLayer=
!0;this._childLayer.getImageUrl=e.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(c){return e.hitch(this,this._extentProcessor,c)},_extentProcessor:function(c,f){var b=f.extent,s=f.width,x=0;if(b){var d=b.getWidth()/s,y=b.bisect(),b=y.extents,e=b[c];e&&(s=y.marginLeft/d,x=0===c?s:s+b[0].getWidth()/d,s=Math.ceil(e.getWidth()/d),x=Math.ceil(x));b=e}return{extent:b,width:s,marginLeft:x}},_getImageParams:function(c,f,b){var s=c.spatialReference.wkid;-1===k.indexOf(this.spatialReferences,
s)&&c.spatialReference.latestWkid&&(s=c.spatialReference.latestWkid);if(k.some(this._WEB_MERCATOR,function(a){return a==s})){var x=k.filter(this.spatialReferences,function(a){return k.some(this._WEB_MERCATOR,function(g){return g==a})},this);0===x.length&&(x=k.filter(this.spatialReferences,function(a){return k.some(this._WORLD_MERCATOR,function(g){return g==a})},this));s=0<x.length?x[0]:this._WEB_MERCATOR[0]}this.spatialReferences=k.filter(this.spatialReferences,function(a){return a!==s});this.spatialReferences.unshift(s);
var x=c.xmin,d=c.xmax,y=c.ymin;c=c.ymax;var e={SERVICE:"WMS",REQUEST:"GetMap"};e.FORMAT=this.imageFormat;e.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";e.STYLES="";e.VERSION=this.version;e.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;e.WIDTH=f;e.HEIGHT=b;this.maxWidth<f&&(e.WIDTH=this.maxWidth);this.maxHeight<b&&(e.HEIGHT=this.maxHeight);f=s?s:NaN;isNaN(f)||("1.3.0"==this.version?e.CRS="EPSG:"+f:e.SRS="EPSG:"+f);"1.3.0"==this.version&&this._useLatLong(f)?e.BBOX=y+","+x+","+c+
","+d:e.BBOX=x+","+y+","+d+","+c;return e},_initLayer:function(c,f){this.spatialReference=new z(this.extent.spatialReference);this.initialExtent=new C(this.extent);this.fullExtent=new C(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var u=e.hitch(this,function(){this.loaded=!0;this.onLoad(this);var c=this._loadCallback;c&&(delete this._loadCallback,c(this))});if(t("chrome")){var s=b.defaults.io,x="with-credentials"===s.useCors?E.canUseXhr(this.getMapURL,!0):-1;(s=
-1<x?s.corsEnabledServers[x]:null)&&s.withCredentials?w({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){u()}):u()}else u()},_readResourceInfo:function(c){c.extent?c.layerInfos?(this.extent=c.extent,this.allExtents[0]=c.extent,this.layerInfos=c.layerInfos,this.description=c.description?c.description:"",this.copyright=c.copyright?c.copyright:"",this.title=c.title?c.title:"",this.getMapURL=c.getMapURL?c.getMapURL:this._getCapabilitiesURL,this.getFeatureInfoURL=
c.getFeatureInfoURL,this.featureInfoFormat=c.featureInfoFormat,this.version=c.version?c.version:"1.3.0",this.maxWidth=c.maxWidth?c.maxWidth:5E3,this.maxHeight=c.maxHeight?c.maxHeight:5E3,this.spatialReferences=c.spatialReferences?c.spatialReferences:[],this.imageFormat=this._getImageFormat(c.format),this.setScaleRange(c.minScale,c.maxScale),this.customLayerParameters=c.customLayerParameters||this.customLayerParameters,this.customParameters=c.customParameters||this.customParameters,this._initLayer()):
this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},_getCapabilities:function(){var c=this._url.query?this._url.query:{};c.SERVICE="WMS";c.REQUEST="GetCapabilities";this.version&&(c.VERSION=this.version);var c=this._mixinCustomParameters(c),f=this._url.path+"?",b;for(b in c)c.hasOwnProperty(b)&&(f+="?"==f.substring(f.length-1,f.length)?"":
"\x26",f+=b+"\x3d"+c[b]);w({url:f,handleAs:"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(c){if(c){var f=this;this.version=this._getAttributeValue("WMS_Capabilities","version",c,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",c,"1.3.0"));var b=this._getTag("Service",c);this.title=this._getTagValue("Title",b,"");this.title||(this.title=this._getTagValue("Name",b,
""));this.copyright=this._getTagValue("AccessConstraints",b,"");this.description=this._getTagValue("Abstract",b,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",b,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",b,5E3),10);if(b=this._getTag("Layer",c)){var s=this._getLayerInfo(b),x=0,e=null,b=this._getTag("Capability",c);k.forEach(b.childNodes,function(a){"Layer"==a.nodeName&&(0===x?e=a:(1===x&&s.name&&(s.name="",s.subLayers=[],s.subLayers.push(this._getLayerInfo(e))),s.subLayers.push(this._getLayerInfo(a))),
x++)},this);if(s){this.layerInfos=s.subLayers;if(!this.layerInfos||0===this.layerInfos.length)this.layerInfos=[s];this.extent=s.extent;this.extent||(s.extent=new C(this.layerInfos[0].extent.toJson()),this.extent=s.extent);this.allExtents=s.allExtents;if(!this.allExtents||!this.allExtents.length)s.allExtents=[],k.forEach(this.layerInfos[0].allExtents,function(a,c){a&&(s.allExtents[c]=new C(a.toJson()))}),this.allExtents=s.allExtents;this.spatialReferences=s.spatialReferences;if(!this.spatialReferences.length&&
0<this.layerInfos.length)for(var y=function(a){var c;for(c=0;c<a.subLayers.length;c++){var h=a.subLayers[c],p=h.spatialReferences;!p.length&&(h.subLayers&&0<h.subLayers.length)&&(p=y(h));if(p.length)return p}return[]},b=0;b<this.layerInfos.length;b++){var r=this.layerInfos[b];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&(r.subLayers&&0<r.subLayers.length)&&(this.spatialReferences=y(r));if(this.spatialReferences.length)break}}b=function(a){if((a=d.query("DCPType",
f._getTag(a,c)))&&0<a.length)if((a=d.query("HTTP",a[0]))&&0<a.length)if((a=d.query("Get",a[0]))&&0<a.length)if(a=f._getAttributeValue("OnlineResource","xlink:href",a[0],null))return a.indexOf("\x26")===a.length-1&&(a=a.substring(0,a.length-1)),f._stripParameters(a,["service","request"]);return null};r=function(a){var q=[];0===d.query("Operation",c).length?k.forEach(d.query("Format",f._getTag(a,c)),function(a){q.push(a.text?a.text:a.textContent)}):k.forEach(d.query("Operation",c),function(h){h.getAttribute("name")===
a&&k.forEach(d.query("Format",h),function(a){q.push(a.text?a.text:a.textContent)})});return q};this.getMapURL=b("GetMap")||this._getCapabilitiesURL;this.getMapFormats=r("GetMap");k.some(this.getMapFormats,function(a){return-1<a.indexOf(this.imageFormat)},this)||(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=b("GetFeatureInfo"))this.getFeatureInfoFormats=r("GetFeatureInfo"),-1<k.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<k.indexOf(this.getFeatureInfoFormats,
"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var a=function(g){if(g&&(g.queryable=!1,g.subLayers))for(var c=0;c<g.subLayers.length;c++)a(g.subLayers[c])};a(s)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(c){c&&c.message&&(c.message="GetCapabilities request for "+
this._getCapabilitiesURL+" failed. ("+c.message+")");this._errorHandler(c)},_getLayerInfo:function(c){if(!c)return null;var f=new D;f.name="";f.title="";f.description="";f.allExtents=[];f.spatialReferences=[];f.queryable="1"===c.getAttribute("queryable");f.subLayers=[];var b=this._getTag("LatLonBoundingBox",c);b&&(f.allExtents[0]=this._getExtent(b,4326));var s=this._getTag("EX_GeographicBoundingBox",c),x;s&&(x=new C(0,0,0,0,new z({wkid:4326})),x.xmin=parseFloat(this._getTagValue("westBoundLongitude",
s,0)),x.ymin=parseFloat(this._getTagValue("southBoundLatitude",s,0)),x.xmax=parseFloat(this._getTagValue("eastBoundLongitude",s,0)),x.ymax=parseFloat(this._getTagValue("northBoundLatitude",s,0)),f.allExtents[0]=x);!b&&!s&&(x=new C(-180,-90,180,90,new z({wkid:4326})),f.allExtents[0]=x);f.extent=f.allExtents[0];var d=-1<k.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";k.forEach(c.childNodes,function(c){if("Name"==c.nodeName)f.name=(c.text?c.text:c.textContent)||"";else if("Title"==c.nodeName)f.title=
(c.text?c.text:c.textContent)||"";else if("Abstract"==c.nodeName)f.description=(c.text?c.text:c.textContent)||"";else if("BoundingBox"==c.nodeName){var b=c.getAttribute(d);b&&0===b.indexOf("EPSG:")?(b=parseInt(b.substring(5),10),0!==b&&!isNaN(b)&&(c="1.3.0"==this.version?this._getExtent(c,b,this._useLatLong(b)):this._getExtent(c,b),f.allExtents[b]=c,f.extent||(f.extent=c))):b&&0===b.indexOf("CRS:")?(b=parseInt(b.substring(4),10),0!==b&&!isNaN(b)&&(this._CRS_TO_EPSG[b]&&(b=this._CRS_TO_EPSG[b]),f.allExtents[b]=
this._getExtent(c,b))):(b=parseInt(b,10),0!==b&&!isNaN(b)&&(f.allExtents[b]=this._getExtent(c,b)))}else if(c.nodeName==d)c=(c.text?c.text:c.textContent).split(" "),k.forEach(c,function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0!==a&&!isNaN(a)&&(this._CRS_TO_EPSG[a]&&(a=this._CRS_TO_EPSG[a]),-1==k.indexOf(f.spatialReferences,a)&&f.spatialReferences.push(a))},this);else if("Style"==c.nodeName&&!f.legendURL){if(c=this._getTag("LegendURL",c))if(c=this._getTag("OnlineResource",
c))f.legendURL=c.getAttribute("xlink:href")}else"Layer"===c.nodeName&&f.subLayers.push(this._getLayerInfo(c))},this);f.title=f.title||f.name;return f},_getImageFormat:function(c){switch(c?c.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";
case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(c,b,u){var s;if(c){s=new C;var x=parseFloat(c.getAttribute("minx")),d=parseFloat(c.getAttribute("miny")),e=parseFloat(c.getAttribute("maxx"));c=parseFloat(c.getAttribute("maxy"));u?(s.xmin=isNaN(d)?-1*Number.MAX_VALUE:d,s.ymin=isNaN(x)?-1*Number.MAX_VALUE:x,s.xmax=isNaN(c)?Number.MAX_VALUE:c,s.ymax=isNaN(e)?Number.MAX_VALUE:e):(s.xmin=isNaN(x)?-1*Number.MAX_VALUE:x,s.ymin=isNaN(d)?-1*Number.MAX_VALUE:
d,s.xmax=isNaN(e)?Number.MAX_VALUE:e,s.ymax=isNaN(c)?Number.MAX_VALUE:c);s.spatialReference=new z({wkid:b})}return s},_useLatLong:function(c){var b,u;for(u=0;u<this._REVERSED_LAT_LONG_RANGES.length;u++){var s=this._REVERSED_LAT_LONG_RANGES[u];if(c>=s[0]&&c<=s[1]){b=!0;break}}return b},_getTag:function(c,b){var u=d.query(c,b);return u&&0<u.length?u[0]:null},_getTagValue:function(c,b,u){return(c=d.query(c,b))&&0<c.length?c[0].text?c[0].text:c[0].textContent:u},_getAttributeValue:function(c,b,u,s){return(c=
d.query(c,u))&&0<c.length?c[0].getAttribute(b):s},_checkVisibleLayersList:function(c){if(c&&(0<c.length&&this.layerInfos&&0<this.layerInfos.length)&&"number"==typeof c[0]){var b=[];k.forEach(c,function(c){c<this.layerInfos.length&&b.push(this.layerInfos[c].name)},this);c=b}return c},_stripParameters:function(c,b){var u=E.urlToObject(c),s,d=[];for(s in u.query)u.query.hasOwnProperty(s)&&-1===k.indexOf(b,s.toLowerCase())&&d.push(s+"\x3d"+u.query[s]);return u.path+(d.length?"?"+d.join("\x26"):"")},_getPopupGraphic:function(c,
b){var u=this.visibleLayers;if(!u||0===u.length)return null;var s=this._popupGraphic;s||(s=new v({title:this.title||"",description:'\x3cdiv style\x3d"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;"\x3e\x3ciframe src\x3d"{QUERY_URL}" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+m.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e\x3c/div\x3e"}),
s=this._popupGraphic=new r(null,null,{},s),s._layer=this);var d=function(a){var c=[];if(a&&(a.queryable&&(a.showPopup&&a.name)&&c.push(a.name),a.subLayers))for(var h=0;h<a.subLayers.length;h++){var p=d(a.subLayers[h]);p.length&&(c=c.concat(p))}return c},e=d({subLayers:this.layerInfos}),e=k.filter(e,function(a){return-1<k.indexOf(u,a)});if(e.length){var y=this.getFeatureInfoURL,n=this._getImageParams(c.extent,c.width,c.height),n=this._mixinCustomLayerParameters(n);n.REQUEST="GetFeatureInfo";n.INFO_FORMAT=
this.featureInfoFormat;n.QUERY_LAYERS=e.join();n.FEATURE_COUNT=25;"1.3.0"===this.version?(n.I=Math.round(b.x),n.J=Math.round(b.y)):(n.X=Math.round(b.x),n.Y=Math.round(b.y));var y=y+(-1===y.indexOf("?")?"?":""),a;for(a in n)n.hasOwnProperty(a)&&(y+="?"===y.substring(y.length-1,y.length)?"":"\x26",y+=a+"\x3d"+n[a]);s.attributes.QUERY_URL=y;return s}return null},_mixinCustomParameters:function(c){if(this.customParameters)for(var b in this.customParameters)c[b]=encodeURIComponent(this.customParameters[b]);
return c},_mixinCustomLayerParameters:function(c){if(this.customLayerParameters||this.customParameters){var b=e.clone(this.customParameters||{});e.mixin(b,this.customLayerParameters||{});for(var u in b)"styles"===u.toLowerCase()&&delete c.STYLES,c[u]=encodeURIComponent(b[u])}return c}})})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(m,d,l,e,k){return m(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,
title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(d){d&&(this.name=d.name,this.title=d.title,this.description=d.description,this.extent=d.extent,this.legendURL=d.legendURL,this.subLayers=d.subLayers?d.subLayers:[],this.allExtents=d.allExtents?d.allExtents:[],this.spatialReferences=d.spatialReferences?d.spatialReferences:[],this.queryable=!!d.queryable,this.showPopup=!!d.showPopup)},clone:function(){var d=
{name:this.name,title:this.title,description:this.description,legendURL:this.legendURL},b;this.extent&&(d.extent=this.extent.getExtent());d.subLayers=[];l.forEach(this.subLayers,function(b){d.subLayers.push(b.clone())});d.allExtents=[];for(b in this.allExtents)b=parseInt(b,10),isNaN(b)||(d.allExtents[b]=this.allExtents[b].getExtent());d.spatialReferences=[];l.forEach(this.spatialReferences,function(b){d.spatialReferences.push(b)});d.queryable=this.queryable;d.showPopup=this.showPopup;return d}})})},
"widgets/AddData/search/Paging":function(){define("dojo/_base/declare dojo/dom-class ./SearchComponent dojo/text!./templates/Paging.html dojo/i18n!../nls/strings ./util".split(" "),function(m,d,l,e,k,t){return m([l],{i18n:k,templateString:e,hasLess:!1,hasMore:!1,nextStart:-1,numPerPage:null,previousStart:-1,start:1,postCreate:function(){this.inherited(arguments);null===this.numPerPage&&(this.numPerPage=30);this.enableOrDisable()},startup:function(){if(!this._started){this.inherited(arguments);try{var b=
this.getConfig().numPerPage,d=Number(b);"number"===typeof d&&!isNaN(d)&&(d=Math.floor(d),1<=d&&100>=d&&(this.numPerPage=d))}catch(e){console.warn("Error setting numPerPage:"),console.warn(e)}null===this.numPerPage&&(this.numPerPage=30)}},enableOrDisable:function(){this.hasLess?(d.remove(this.firstButton.parentNode,"disabled"),d.remove(this.previousButton.parentNode,"disabled")):(d.add(this.firstButton.parentNode,"disabled"),d.add(this.previousButton.parentNode,"disabled"));this.hasMore?d.remove(this.nextButton.parentNode,
"disabled"):d.add(this.nextButton.parentNode,"disabled")},firstButtonClicked:function(){this.hasLess&&(this.start=1,this.search())},previousButtonClicked:function(){this.hasLess&&(this.start=this.previousStart,this.search())},nextButtonClicked:function(){this.hasMore&&(this.start=this.nextStart,this.search())},appendQueryParams:function(b){b.start=this.start;b.num=this.numPerPage},processResults:function(b){this.start=1;var d=this.numPerPage,e=b.total,k=b.queryParams.start;1>k&&(k=1);this.hasLess=
!1;this.previousStart=-1;1<k&&(this.hasLess=!0,this.previousStart=k-b.queryParams.num,1>this.previousStart&&(this.previousStart=1));this.hasMore=!1;this.nextStart=-1;b.nextQueryParams&&1<b.nextQueryParams.start&&(this.hasMore=!0,this.nextStart=b.nextQueryParams.start);b="";e>d?(e=1,1<k&&(e=Math.floor(k/d)+1),b=this.i18n.search.paging.pagePattern,b=b.replace("{page}",""+e)):(b=this.i18n.search.paging.pagePattern,b=b.replace("{page}","1"));t.setNodeText(this.pageNode,b);this.enableOrDisable()}})})},
"widgets/AddData/search/ResultCount":function(){define("dojo/_base/declare dojo/number ./SearchComponent dojo/text!./templates/ResultCount.html dojo/i18n!../nls/strings ./util".split(" "),function(m,d,l,e,k,t){return m([l],{i18n:k,templateString:e,typePlural:k.search.resultCount.itemPlural,typeSingular:k.search.resultCount.itemSingular,postCreate:function(){this.inherited(arguments)},processResults:function(b){b=b.total;var e=this.typePlural;1===b&&(e=this.typeSingular);var k=this.i18n.search.resultCount.countPattern,
k=k.replace("{count}",d.format(b)),k=k.replace("{type}",e);t.setNodeText(this.messageNode,k)}})})},"widgets/AddData/search/AddFromUrlPane":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/keys dojo/Deferred dojo/promise/all dojo/dom-class dojo/window dijit/Viewport dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/AddFromUrlPane.html dojo/i18n!../nls/strings ./LayerLoader ./util esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ArcGISImageServiceLayer esri/layers/ArcGISTiledMapServiceLayer esri/layers/CSVLayer esri/layers/FeatureLayer esri/layers/GeoRSSLayer esri/layers/KMLLayer esri/layers/StreamLayer esri/layers/VectorTileLayer esri/layers/WFSLayer esri/layers/WMSLayer esri/layers/WMTSLayer esri/InfoTemplate dijit/form/Select".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c,f,u,s,x,I,y,H,a,g,q,h,p){return m([E,v,z],{i18n:A,templateString:C,wabWidget:null,_dfd:null,postCreate:function(){this.inherited(arguments);this._updateExamples("ArcGIS");var a=this;this.own(e(this.urlTextBox,"keyup",function(g){g.keyCode===k.ENTER?a.addClicked():r.contains(a.addButton,"disabled")||a._setStatus("")}));this.own(e(this.urlTextBox,"focus",function(){try{a.urlTextBox.select()}catch(g){}}));this.own(e(this.typeSelect,"change",function(g){a._updateExamples(g)}));
this.own(e(this.typeSelect.dropDown,"open",function(){var a=this.domNode.parentElement;a&&r.add(a,"add-data-widget-popup")}));this.own(w.on("resize",a.resize()))},destroy:function(){this.inherited(arguments)},addClicked:function(){var a=this,g=!1,h=this.addButton;if(!r.contains(h,"disabled")){var c=this.typeSelect.get("value"),p=d.trim(this.urlTextBox.value);if(0<p.length&&(0===p.indexOf("http://")||0===p.indexOf("https://")))g=!0;g&&(r.add(h,"disabled"),a._setStatus(A.search.item.messages.adding),
g=new t,this._handleAdd(g,this.wabWidget.map,c,p),g.then(function(g){g?a._setStatus(""):a._setStatus(A.search.item.messages.addFailed);r.remove(h,"disabled")}).otherwise(function(g){"string"===typeof g&&"Unsupported"===g?(a._setStatus(A.search.item.messages.unsupported),r.remove(h,"disabled")):(console.warn("Add layer failed."),console.warn(g),a._setStatus(A.search.item.messages.addFailed),r.remove(h,"disabled"),g&&("string"===typeof g.message&&0<g.message.length)&&(a._setStatus(g.message),console.log("")))}))}},
examplesExpanderClicked:function(){r.toggle(this.examplesNode,"show")},preHide:function(){},resize:function(){var a=n.getBox(this.ownerDocument);a&&"undefined"!==typeof a.w&&(600<a.w?r.add(this.urlTextBox,"url-textbox-wide"):r.remove(this.urlTextBox,"url-textbox-wide"))},_handleAdd:function(F,d,e,k){k=D.checkMixedContent(k);var r=k.toLowerCase(),n=new B,m=n._generateLayerId(),w=this,v=null;"ArcGIS"===e?0<r.indexOf("/featureserver")||0<r.indexOf("/mapserver")?n._readRestInfo(k).then(function(a){if(a&&
"string"===typeof a.type&&"Feature Layer"===a.type)v=new x(k,{id:m,outFields:["*"],infoTemplate:new p}),w._waitThenAdd(F,d,e,n,v);else if(0<r.indexOf("/featureserver")){var g=[];l.forEach(a.layers,function(a){a=new x(k+"/"+a.id,{id:n._generateLayerId(),outFields:["*"],infoTemplate:new p});g.push(n._waitForLayer(a))});b(g).then(function(a){var g=[];l.forEach(a,function(a){g.push(a)});g.reverse();l.forEach(g,function(a){n._setFeatureLayerInfoTemplate(a);a.xtnAddData=!0;d.addLayer(a)});F.resolve(g)}).otherwise(function(a){F.reject(a)})}else 0<
r.indexOf("/mapserver")&&(v=a.tileInfo?new u(k,{id:m}):new c(k,{id:m}),w._waitThenAdd(F,d,e,n,v))}).otherwise(function(a){F.reject(a)}):0<r.indexOf("/imageserver")?(v=new f(k,{id:m}),this._waitThenAdd(F,d,e,n,v)):0<r.indexOf("/vectortileserver")||0<r.indexOf("/resources/styles/root.json")?!a||!a.supported()?F.reject("Unsupported"):n._checkVectorTileUrl(k,{}).then(function(g){v=new a(g,{id:m});w._waitThenAdd(F,d,e,n,v)}).otherwise(function(a){F.reject(a)}):0<r.indexOf("/streamserver")?(v=new H(k,{id:m,
purgeOptions:{displayCount:1E4},infoTemplate:new p}),this._waitThenAdd(F,d,e,n,v)):F.reject("Unsupported"):"WMS"===e?(v=new q(k,{id:m}),this._waitThenAdd(F,d,e,n,v)):"WMTS"===e?v=new h(k,{id:m}):"WFS"===e?(v=new g({id:m,url:k,infoTemplate:new p}),this._waitThenAdd(F,d,e,n,v),console.warn("WFSLayer",v)):"KML"===e?(v=new y(k,{id:m}),this._waitThenAdd(F,d,e,n,v)):"GeoRSS"===e?(v=new I(k,{id:m}),this._waitThenAdd(F,d,e,n,v)):"CSV"===e&&(v=new s(k,{id:m}),v.setInfoTemplate(n._newInfoTemplate()),this._waitThenAdd(F,
d,e,n,v))},_persist:function(){try{var a=this.typeSelect.get("value"),g=d.trim(this.urlTextBox.value);this.wabWidget.xtnAddFromUrlPane={type:a,url:g}}catch(h){}},_restore:function(){try{var a=this.wabWidget.xtnAddFromUrlPane;a&&("string"===typeof a.type&&0<a.type.length)&&this.typeSelect.set("value",a.type);a&&("string"===typeof a.url&&0<a.url.length)&&(this.urlTextBox.value=a.url)}catch(g){}},_setStatus:function(a){this.wabWidget&&this.wabWidget._setStatus(a)},_showLayers:function(){this.wabWidget&&
this.wabWidget.showLayers()},_updateExamples:function(a){l.forEach(this.examplesNode.children,function(g){var h=g.getAttribute("data-examples-type");"string"===typeof h&&0<h.length&&(g.style.display=h===a?"":"none")})},_waitThenAdd:function(a,g,h,c,p){c._waitForLayer(p).then(function(p){if("WMS"===h)c._setWMSVisibleLayers(p);else if(!p||!("esri.layers.ArcGISDynamicMapServiceLayer"===p.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===p.declaredClass))p&&"esri.layers.FeatureLayer"===p.declaredClass?
c._setFeatureLayerInfoTemplate(p):p&&"esri.layers.CSVLayer"===p.declaredClass&&c._setFeatureLayerInfoTemplate(p);p.xtnAddData=!0;g.addLayer(p);a.resolve(p)}).otherwise(function(g){a.reject(g)})}})})},"esri/layers/CSVLayer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../arcgis/csv ./FeatureLayer ../geometry/Extent ../tasks/FeatureSet".split(" "),function(m,d,l,e,k,t,b,r,n){return d(b,{declaredClass:"esri.layers.CSVLayer",_preventInit:!0,_fieldTypeMap:{Date:"esriFieldTypeDate",
Number:"esriFieldTypeDouble",String:"esriFieldTypeString"},constructor:function(b,d){this.url=b;d=l.mixin({},d);this.columnDelimiter=d.columnDelimiter;this.latitudeFieldName=d.latitudeFieldName;this.longitudeFieldName=d.longitudeFieldName;var e=d.layerDefinition;e||(e={fields:d.fields||[],geometryType:"esriGeometryPoint",copyrightText:d.copyright},d.fields&&m.forEach(d.fields,function(b){b.type=this._fieldTypeMap[b.type||"String"];b.alias||(b.alias=b.name)},this));this._buildCsvFcParam={url:this.url,
columnDelimiter:this.columnDelimiter,layerDefinition:e,outFields:d.outFields};this.latitudeFieldName&&this.longitudeFieldName&&(this._buildCsvFcParam.locationInfo={locationType:"coordinates",latitudeFieldName:this.latitudeFieldName,longitudeFieldName:this.longitudeFieldName});this._projectFeatures=l.hitch(this,this._projectFeatures);this._addFeatures=l.hitch(this,this._addFeatures);this._initCSVLayer(d)},refresh:function(){this._fireUpdateStart();this.applyEdits(null,null,this.graphics);this._loadFeatures()},
_setMap:function(b){var d=this.inherited(arguments);this._fireUpdateStart();this._projectFeatures(this._csvFC).then(this._addFeatures).otherwise(this._errorHandler);this._csvFC=null;return d},_initCSVLayer:function(b){var d=this;t.buildCSVFeatureCollection(this._buildCsvFcParam).then(function(e){d._csvFC=e;var k=e.layerDefinition;k.extent=d._getFCExtent(e);b.outFields||(b.outFields=["*"]);d._initFeatureLayer({layerDefinition:k},b)}).otherwise(this._errorHandler)},_loadFeatures:function(){t.buildCSVFeatureCollection(this._buildCsvFcParam).then(this._projectFeatures).then(this._addFeatures).otherwise(this._errorHandler)},
_projectFeatures:function(b){return t.projectFeatureCollection(b,this._map.spatialReference)},_addFeatures:function(b){b=new n(b.featureSet);this.applyEdits(b.features,null,null);this._fireUpdateEnd()},_getFCExtent:function(b){var d;if(b&&b.featureSet&&b.featureSet.features){b=b.featureSet.features;var e=b.length;if(1<e){var k=b[0].geometry;d=new r(k.x,k.y,k.x,k.y);for(e-=1;0<e;e--)k=b[e].geometry,d.xmin=Math.min(d.xmin,k.x),d.ymin=Math.min(d.ymin,k.y),d.xmax=Math.max(d.xmax,k.x),d.ymax=Math.max(d.ymax,
k.y);0>=d.getWidth()&&0>=d.getHeight()&&(d=null)}}return d}})})},"esri/arcgis/csv":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/number dojox/data/CsvStore ../kernel ../config ../request ../SpatialReference ../geometry/jsonUtils ../geometry/webMercatorUtils".split(" "),function(m,d,l,e,k,t,b,r,n,w,E,v){function z(c){var b=0,f="";d.forEach([","," ",";","|","\t"],function(d){var e=c.split(d).length;e>b&&(b=e,f=d)});return f}function C(c,b){if(!c||"[object Date]"!==
Object.prototype.toString.call(c)||isNaN(c.getTime()))return!1;var f=!0;if(e("chrome")&&/\d+\W*$/.test(b)){if(b.match(/[^0-9a-zA-Z\s]/))return!1;var d=b.match(/[a-zA-Z]{2,}/);if(d){for(var f=!1,u=0,a=d.length,g=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;!f&&u<=a&&!(f=!g.test(d[u]));)u++;f=!f}}return f}function A(c,b,e){var y=c.indexOf("\n"),y=m.trim(c.substr(0,y)),n=b.columnDelimiter;
n||(n=z(y));var a=new t({data:c,separator:n});a.fetch({onComplete:function(g,c){var h=0,p={layerDefinition:b.layerDefinition,featureSet:{features:[],geometryType:"esriGeometryPoint"}},s=p.layerDefinition.objectIdField,n=p.layerDefinition.fields;!s&&!d.some(n,function(a){return"esriFieldTypeOID"===a.type?(s=a.name,!0):!1})&&(n.push({name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1}),s="__OBJECTID");var y,r,l=a._attributes,v=[],B=[];d.forEach(n,function(a){"esriFieldTypeDate"===
a.type?v.push(a.name):("esriFieldTypeDouble"===a.type||"esriFieldTypeInteger"===a.type)&&B.push(a.name)});b.locationInfo&&"coordinates"===b.locationInfo.locationType?(y=b.locationInfo.latitudeFieldName,r=b.locationInfo.longitudeFieldName):d.forEach(l,function(a){var g;g=d.indexOf(f,a.toLowerCase());-1!==g&&(y=a);g=d.indexOf(u,a.toLowerCase());-1!==g&&(r=a)});if(!y||!r)setTimeout(function(){console.error("File does not seem to contain fields with point coordinates.")},1),e&&e(null,Error("File does not seem to contain fields with point coordinates."));
else{-1===d.indexOf(B,y)&&B.push(y);-1===d.indexOf(B,r)&&B.push(r);var w;m.isArray(b.outFields)&&-1===d.indexOf(b.outFields,"*")&&(w=b.outFields);d.forEach(l,function(a){d.some(n,function(g){return a===g.name})||n.push({name:a,alias:a,type:a===y||a===r?"esriFieldTypeDouble":"esriFieldTypeString"})});var l=0,D=g.length;for(l;l<D;l++){var t=g[l],H=a.getAttributes(t),z={};d.forEach(H,function(g){if(g&&(g===y||g===r||!w||-1<d.indexOf(w,g))){var h=g;0===g.length&&d.forEach(n,function(a,h){a.name==="attribute_"+
(h-1)&&(g="attribute_"+(h-1))});if(-1<d.indexOf(v,g)){var h=a.getValue(t,h),c=new Date(h);z[g]=C(c,h)?c.getTime():null}else if(-1<d.indexOf(B,g)){c=k.parse(a.getValue(t,h));if((g===y||g===r)&&(isNaN(c)||181<Math.abs(c)))c=parseFloat(a.getValue(t,h));isNaN(c)?z[g]=null:z[g]=c}else z[g]=a.getValue(t,h)}});z[s]=h;h++;var H=z[y],E=z[r];null==E||(null==H||isNaN(H)||isNaN(E))||(w&&-1===d.indexOf(w,y)&&delete z[y],w&&-1===d.indexOf(w,r)&&delete z[r],p.featureSet.features.push({geometry:{x:E,y:H,spatialReference:{wkid:4326}},
attributes:z}))}p.layerDefinition.name="csv";e&&e(p)}},onError:function(a){console.error("Error fetching items from CSV store: ",a);e&&e(null,a)}});return!0}function B(c,b,f,e,u,a){0===c.length&&u(null);var g=E.getGeometryType(b),q=[];d.forEach(c,function(a){a=new g(a);a.spatialReference=f;q.push(a)},this);b=[102113,102100,3857];f.wkid&&4326===f.wkid&&e.wkid&&-1<d.indexOf(b,e.wkid)?(d.forEach(q,function(a){a.xmin?(a.xmin=Math.max(a.xmin,-180),a.xmax=Math.min(a.xmax,180),a.ymin=Math.max(a.ymin,-89.99),
a.ymax=Math.min(a.ymax,89.99)):a.rings?d.forEach(a.rings,function(a){d.forEach(a,function(a){a[0]=Math.min(Math.max(a[0],-180),180);a[1]=Math.min(Math.max(a[1],-89.99),89.99)},this)},this):a.paths?d.forEach(a.paths,function(a){d.forEach(a,function(a){a[0]=Math.min(Math.max(a[0],-180),180);a[1]=Math.min(Math.max(a[1],-89.99),89.99)},this)},this):a.x&&(a.x=Math.min(Math.max(a.x,-180),180),a.y=Math.min(Math.max(a.y,-89.99),89.99))},this),c=[],d.forEach(q,function(a){a=v.geographicToWebMercator(a);102100!==
e.wkid&&(a.spatialReference=e);c.push(a.toJson())},this),u(c)):null!==f.wkid&&-1<d.indexOf(b,f.wkid)&&null!==e.wkid&&4326===e.wkid?(c=[],d.forEach(q,function(a){c.push(v.webMercatorToGeographic(a).toJson())},this),u(c)):(b=function(g,p){g&&g.length===c.length?(c=[],d.forEach(g,function(a){a&&(a.rings&&0<a.rings.length&&0<a.rings[0].length&&0<a.rings[0][0].length&&!isNaN(a.rings[0][0][0])&&!isNaN(a.rings[0][0][1])||a.paths&&0<a.paths.length&&0<a.paths[0].length&&0<a.paths[0][0].length&&!isNaN(a.paths[0][0][0])&&
!isNaN(a.paths[0][0][1])||a.xmin&&!isNaN(a.xmin)&&a.ymin&&!isNaN(a.ymin)||a.x&&!isNaN(a.x)&&a.y&&!isNaN(a.y))?c.push(a.toJson()):c.push(null)},this),u(c)):a(g,p)},r.defaults.geometryService?r.defaults.geometryService.project(q,e,m.hitch(this,b),a):u(null))}function D(c,b){var f=[102113,102100,3857];return c&&b&&c.wkid===b.wkid&&c.wkt===b.wkt||c&&b&&c.wkid&&b.wkid&&-1<d.indexOf(f,c.wkid)&&-1<d.indexOf(f,b.wkid)?!0:!1}function c(c,b,f,e){if(c.featureSet&&0!==c.featureSet.features.length)if(D(f,b))e(c);
else{var u,a=function(a){var g=[];d.forEach(c.featureSet.features,function(c,b){a[b]&&(c.geometry=a[b],g.push(c))},this);e(c)},g=function(a,g){console.error("error projecting featureSet ("+c.layerDefinition.name+"). Final try.");e(c)},q=function(h,p){console.error("error projecting featureSet ("+c.layerDefinition.name+"). Try one more time.");B(u,c.featureSet.geometryType,b,f,m.hitch(this,a),m.hitch(this,g))};c.featureSet.features&&0<c.featureSet.features.length?(u=[],d.forEach(c.featureSet.features,
function(a){if(a.geometry.toJson)u.push(a.geometry);else{var g=E.getGeometryType(c.featureSet.geometryType);u.push(new g(a.geometry))}}),b.toJson||(b=new w(b)),f.toJson||(f=new w(f)),B(u,c.featureSet.geometryType,b,f,m.hitch(this,a),m.hitch(this,q))):e(c)}}var f="lat latitude y ycenter latitude83 latdecdeg point-y lat_dd".split(" "),u="lon lng long longitude x xcenter longitude83 longdecdeg point-x long_dd".split(" ");return{latFieldStrings:f,longFieldStrings:u,buildCSVFeatureCollection:function(c){var b=
new l,f=function(c,a){a?b.errback(a):b.callback(c)},d={url:c.url,handleAs:"text",load:function(b){A(b,c,m.hitch(this,f))},error:function(c){b.errback(c);console.error("error: "+c)}};-1<c.url.indexOf("arcgis.com")&&(-1<c.url.indexOf("/content/items")&&-1<c.url.indexOf("/data"))&&(d.headers={"Content-Type":""});n(d,{usePost:!1});return b},projectFeatureCollection:function(b,f,d){var e=new l;d||(d=new w({wkid:4326}));c(b,d,f,m.hitch(this,function(c){e.callback(c)}));return e},generateDefaultPopupInfo:function(c){var b=
{esriFieldTypeDouble:1,esriFieldTypeSingle:1},f={esriFieldTypeInteger:1,esriFieldTypeSmallInteger:1},e={esriFieldTypeDate:1},u=null;c=d.map(c.layerDefinition.fields,m.hitch(this,function(a){"NAME"===a.name.toUpperCase()&&(u=a.name);var g="esriFieldTypeOID"!==a.type&&"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeGeometry"!==a.type,c=null;if(g){var h=a.name.toLowerCase();if(-1<",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,".indexOf(","+h+",")||-1<h.indexOf("area")||
-1<h.indexOf("length")||-1<h.indexOf("shape")||-1<h.indexOf("perimeter")||-1<h.indexOf("objectid")||h.indexOf("_")===h.length-1||h.indexOf("_i")===h.length-2&&1<h.length)g=!1;a.type in f?c={places:0,digitSeparator:!0}:a.type in b?c={places:2,digitSeparator:!0}:a.type in e&&(c={dateFormat:"shortDateShortTime"})}return m.mixin({},{fieldName:a.name,label:a.alias,isEditable:!0,tooltip:"",visible:g,format:c,stringFieldOption:"textbox"})}));return{title:u?"{"+u+"}":"",fieldInfos:c,description:null,showAttachments:!1,
mediaInfos:[]}},_getSeparator:z,_isValidDate:C,_processCsvData:A,_projectGeometries:B,_sameSpatialReference:D,_projectFeatureSet:c}})},"dojox/data/CsvStore":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/xhr dojo/_base/kernel dojo/data/util/filter dojo/data/util/simpleFetch".split(" "),function(m,d,l,e,k,t){d=d("dojox.data.CsvStore",null,{constructor:function(b){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=!1;b.url&&
(this.url=b.url);this._csvData=b.data;b.label?this.label=b.label:""===this.label&&(this.label=void 0);this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=b.identifier;""===this.identifier?delete this.identifier:this._idMap={};"separator"in b&&(this.separator=b.separator);"urlPreventCache"in b&&(this.urlPreventCache=b.urlPreventCache?!0:!1)},url:"",label:"",identifier:"",
separator:",",urlPreventCache:!1,_assertIsItem:function(b){if(!this.isItem(b))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(b){b=this.getIdentity(b);this.identifier&&(b=this._idMap[b]);return b},getValue:function(b,d,e){this._assertIsItem(b);var k=e;if("string"===typeof d)d=this._attributeIndexes[d],null!=d&&(k=this._dataArray[this._getIndex(b)][d]||e);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
return k},getValues:function(b,d){var e=this.getValue(b,d);return e?[e]:[]},getAttributes:function(b){this._assertIsItem(b);var d=[];b=this._dataArray[this._getIndex(b)];for(var e=0;e<b.length;e++)""!==b[e]&&d.push(this._attributes[e]);return d},hasAttribute:function(b,d){this._assertIsItem(b);if("string"===typeof d){var e=this._attributeIndexes[d],k=this._dataArray[this._getIndex(b)];return"undefined"!==typeof e&&e<k.length&&""!==k[e]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
},containsValue:function(b,d,e){var l=void 0;"string"===typeof e&&(l=k.patternToRegExp(e,!1));return this._containsValue(b,d,e,l)},_containsValue:function(b,d,e,k){b=this.getValues(b,d);for(d=0;d<b.length;++d){var l=b[d];if("string"===typeof l&&k)return null!==l.match(k);if(e===l)return!0}return!1},isItem:function(b){if(b&&b[this._storeProp]===this)if(b=b[this._idProp],this.identifier){if(this._dataArray[this._idMap[b]])return!0}else if(0<=b&&b<this._dataArray.length)return!0;return!1},isItemLoaded:function(b){return this.isItem(b)},
loadItem:function(b){},getFeatures:function(){return this._features},getLabel:function(b){if(this.label&&this.isItem(b))return this.getValue(b,this.label)},getLabelAttributes:function(b){return this.label?[this.label]:null},_fetchItems:function(b,d,e){var m=this,t=function(b,e){var c=null;if(b.query){var f,u,c=[],s=b.queryOptions?b.queryOptions.ignoreCase:!1,x={};for(f in b.query)u=b.query[f],"string"===typeof u&&(x[f]=k.patternToRegExp(u,s));for(s=0;s<e.length;++s){var l=!0,y=e[s];for(f in b.query)u=
b.query[f],m._containsValue(y,f,u,x[f])||(l=!1);l&&c.push(y)}}else c=e.slice(0,e.length);d(c,b)};if(this._loadFinished)t(b,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:b,filter:t});else{this._loadInProgress=!0;var v=l.get({url:m.url,handleAs:"text",preventCache:m.urlPreventCache});v.addCallback(function(d){try{m._processData(d),t(b,m._arrayOfAllItems),m._handleQueuedFetches()}catch(k){e(k,b)}});v.addErrback(function(d){m._loadInProgress=!1;if(e)e(d,
b);else throw d;});var z=null;b.abort&&(z=b.abort);b.abort=function(){v&&-1===v.fired&&v.cancel();z&&z.call(b)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,t(b,this._arrayOfAllItems)}catch(C){e(C,b)}else{var A=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(e)e(A,b);else throw A;}},close:function(b){},_getArrayOfArraysFromCsvFileContents:function(b){if(m.isString(b)){var d=RegExp("^\\s+","g"),e=RegExp("\\s+$","g"),
k=RegExp('""',"g"),l=[],v=this._splitLines(b);for(b=0;b<v.length;++b){var t=v[b];if(0<t.length){for(var t=t.split(this.separator),C=0;C<t.length;){var A=t[C].replace(d,""),B=A.replace(e,""),D=B.charAt(0),c=B.charAt(B.length-1),f=B.charAt(B.length-2),u=B.charAt(B.length-3);if(2===B.length&&'""'==B)t[C]="";else if('"'==D&&('"'!=c||'"'==c&&'"'==f&&'"'!=u)){if(C+1===t.length)return;t[C]=A+this.separator+t[C+1];t.splice(C+1,1)}else'"'==D&&'"'==c&&(B=B.slice(1,B.length-1),B=B.replace(k,'"')),t[C]=B,C+=
1}l.push(t)}}this._attributes=l.shift();for(b=0;b<this._attributes.length;b++)this._attributeIndexes[this._attributes[b]]=b;this._dataArray=l}},_splitLines:function(b){var d=[],e,k="",l=!1;for(e=0;e<b.length;e++){var m=b.charAt(e);switch(m){case '"':l=!l;k+=m;break;case "\r":l?k+=m:(d.push(k),k="",e<b.length-1&&"\n"==b.charAt(e+1)&&e++);break;case "\n":l?k+=m:(d.push(k),k="");break;default:k+=m}}""!==k&&d.push(k);return d},_processData:function(b){this._getArrayOfArraysFromCsvFileContents(b);this._arrayOfAllItems=
[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(b=0;b<this._dataArray.length;b++){var d=b;this.identifier&&(d=this._dataArray[b][this._attributeIndexes[this.identifier]],this._idMap[d]=b);this._arrayOfAllItems.push(this._createItemFromIdentity(d))}this._loadFinished=!0;this._loadInProgress=!1},_createItemFromIdentity:function(b){var d={};d[this._storeProp]=this;d[this._idProp]=
b;return d},getIdentity:function(b){return this.isItem(b)?b[this._idProp]:null},fetchItemByIdentity:function(b){var d,k=b.scope?b.scope:e.global;if(this._loadFinished)d=this._createItemFromIdentity(b.identity),this.isItem(d)||(d=null),b.onItem&&b.onItem.call(k,d);else{var m=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:b}):(this._loadInProgress=!0,d=l.get({url:m.url,handleAs:"text"}),d.addCallback(function(d){try{m._processData(d);var e=m._createItemFromIdentity(b.identity);
m.isItem(e)||(e=null);b.onItem&&b.onItem.call(k,e);m._handleQueuedFetches()}catch(l){b.onError&&b.onError.call(k,l)}}),d.addErrback(function(d){this._loadInProgress=!1;b.onError&&b.onError.call(k,d)}));else if(this._csvData)try{m._processData(m._csvData),m._csvData=null,d=m._createItemFromIdentity(b.identity),m.isItem(d)||(d=null),b.onItem&&b.onItem.call(k,d)}catch(t){b.onError&&b.onError.call(k,t)}}},getIdentityAttributes:function(b){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<
this._queuedFetches.length){for(var b=0;b<this._queuedFetches.length;b++){var d=this._queuedFetches[b],e=d.filter,k=d.args;e?e(k,this._arrayOfAllItems):this.fetchItemByIdentity(d.args)}this._queuedFetches=[]}}});m.extend(d,t);return d})},"esri/layers/GeoRSSLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ../urlUtils ./ServiceGeneratedFeatureCollection".split(" "),function(m,d,l,e,k,t,b,r,n){return m([n],{declaredClass:"esri.layers.GeoRSSLayer",
serviceUrl:r.getProtocolForWebResource()+"//utility.arcgis.com/sharing/rss",constructor:function(b,d){t.defaults.geoRSSService&&(this.serviceUrl=t.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=b({url:this.serviceUrl,content:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this._outSR?l.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(b){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}})})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A){return m([z],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(b,d){this.pointSymbol=d&&d.pointSymbol;this.polylineSymbol=d&&d.polylineSymbol;this.polygonSymbol=d&&d.polygonSymbol;this._outSR=d&&(d.outSpatialReference||d.outSR)||new n({wkid:4326});this._options=l.mixin({},d)},parse:function(){console.error("parse function has not been implemented")},getFeatureLayers:function(){var b=[];this._fLayers&&(b=b.concat(this._fLayers));
return b},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(b){var d=this;this._fireUpdateStart();b=this.parse(b);b.addCallback(function(c){d._io=null;d._initLayer(c)});b.addErrback(function(c){d._io=null;c=l.mixin(Error(),c);c.message="Unable to load resource: "+d.url+" "+(c.message||"");d._fireUpdateEnd(c);d.onError(c)})},_initLayer:function(b){this.loaded&&this._removeInternalLayers();
this.name=b.name;this.description=b.description;this.snippet=b.snippet;this.defaultVisibility=void 0!==b.visibility?this.visible=!!b.visibility:this.visible=!0;this.featureInfos=b.featureInfos;this.fullExtent=this.initialExtent=new w(b.lookAtExtent);this.copyright=b.author||b.copyright;var d;if((b=l.getObject("featureCollection.layers",!1,b))&&0<b.length)this._fLayers=[],e.forEach(b,function(c,b){var e=l.getObject("featureSet.features",!1,c);e&&0<e.length&&(d=l.mixin({outFields:["*"],infoTemplate:c.popupInfo?
new A(c.popupInfo):null,editable:!1},this._options),d.id&&(d.id=d.id+"_"+b),c.layerDefinition.capabilities="Query,Data",e=new C(c,d),e.geometryType&&(this["_"+e.geometryType]=e),this._fLayers.push(e))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(b=new v(this.pointSymbol),this._esriGeometryPoint.setRenderer(b)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),
this.polylineSymbol&&(b=new v(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(b)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(b=new v(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(b)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var b=this._map;this._fireUpdateStart();var d=b.spatialReference,c=this._outSR,f;if(d.wkid)f=d._isWebMercator()&&
c._isWebMercator()||d.wkid===c.wkid;else if(d.wkt)f=d.wkt===c.wkt;else{console.log("_setMap - map has invalid spatial reference");return}if(!f)if(d._isWebMercator()&&4326===c.wkid)this._converter=E.geographicToWebMercator;else if(c._isWebMercator()&&4326===d.wkid)this._converter=E.webMercatorToGeographic;else{console.log("_setMap - unsupported workflow. Spatial reference of the map and layer do not match, and the conversion cannot be done on the client.");return}(d=this._fLayers)&&0<d.length&&e.forEach(d,
function(c){if(this._converter){var d=c.graphics,f,e,k=d?d.length:0;for(f=0;f<k;f++)(e=d[f].geometry)&&d[f].setGeometry(this._converter(e))}b.addLayer(c)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var b=this._map;b&&e.forEach(this.getFeatureLayers(),b.removeLayer,b)},setScaleRange:function(b,d){this.inherited(arguments);e.forEach(this.getFeatureLayers(),function(c){c.setScaleRange(b,d)});this._options.minScale=this.minScale;this._options.maxScale=
this.maxScale},setOpacity:function(b){this.opacity!=b&&(e.forEach(this.getFeatureLayers(),function(d){d.setOpacity(b)}),this.opacity=this._options.opacity=b,this.onOpacityChange(b))},onVisibilityChange:function(b){this._fireUpdateStart();e.forEach(this.getFeatureLayers(),function(d){d.setVisibility(b)});this._fireUpdateEnd()},_setMap:function(b,d){this.inherited(arguments);this._map=b;var c=this._div=k.create("div",null,d);t.set(c,"position","absolute");this._addInternalLayers();this.evaluateSuspension();
return c},_unsetMap:function(b,e){this._io&&this._io.cancel();d.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var c=this._div;c&&(e.removeChild(c),k.destroy(c));this._div=null;this.inherited(arguments)}})})},"esri/layers/WFSLayer":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dojo/on ../request ../kernel ../graphic ../renderers/jsonUtils ../symbols/jsonUtils ../Color ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent ../geometry/Point ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ./LabelClass ./GraphicsLayer".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c,f,u,s,x,I,y,H){return m([H],{declaredClass:"esri.layers.WFSLayer",constructor:function(a){this.geometryType=this.describeFeatureTypeUrl=this.getFeatureUrl=this.layerNamespace="";this.fields=[];this.spatialReferences=[];this.fullExtent=null;this.visible=!0;this.renderer=null;this.id="WFSLayer";this._url="";this._version="1.1.0";this._layerName="";this._nsLayerNames={};this._layerDefinedGeometryType="esriGeometryComplex";this._wkid=3857;this._mode="snapshot";
this._maxFeatures=100;this._inverseResponse=this._inverseFilter=!1;this._nsGeometryFieldName=this._getFeatureRequest=this._nsFields="";this._graphicArray=[];this._gmlNS="http://www.opengis.net/gml";this._layerEventHandlers=[];this.customParameters=this._describeFeatureTypeCallback=this._getCapabilitiesCallback=null;this.showLabels=!0;this.labelingInfo=null;a&&(a.id&&(this.id=a.id),this.showLabels=null!==a.showLabels?a.showLabels:!0);this.onError=l.hitch(this,this.onError);this._errorSupport=l.hitch(this,
this._errorSupport);this._parseGml=l.hitch(this,this._parseGml);this._getCapabilities=l.hitch(this,this._getCapabilities);this._getCapabilitiesResponse=l.hitch(this,this._getCapabilitiesResponse);this._describeFeatureTypeResponse=l.hitch(this,this._describeFeatureTypeResponse);this._pointSymbol=new C(C.STYLE_CIRCLE,6,new A(A.STYLE_SOLID,new z([0,255,0]),1),new z([255,0,0]));this._lineSymbol=new A(A.STYLE_SOLID,new z([0,255,0]),3);this._polygonSymbol=new B(B.STYLE_SOLID,new A(A.STYLE_SOLID,new z([255,
0,0]),2),new z([255,255,0,0.25]));this.loaded=!1;this._isProjectedOk=!0},initialize:function(a,g){a.id&&(this.id=a.id);a.url&&(this._url=a.url);a.version&&(this._version=a.version);this.customParameters=a.customParameters;this._getCapabilities(g)},selectLayer:function(a,g){this._layerName=a.layerName;this._wkid=a.wkid;this._mode=a.mode;this._maxFeatures=a.maxFeatures;this._inverseResponse=a.swapXY;this._inverseFilter=a.swapXYFilter;this.geometryType=a.geometryType;this._describeFeatureType(g);this.loaded=
!0},toJson:function(){var a={};a.id=this.id;a.url=this._url;a.version=this._version;a.mode="snapshot"===this._mode?0:1;a.name=this._layerName;a.geometryType=this.geometryType;a.wkid=this._wkid;a.maxFeatures=this._maxFeatures;a.swapXY=this._inverseResponse;a.swapXYFilter=this._inverseFilter;a.pointSymbol=this._pointSymbol.toJson();a.lineSymbol=this._lineSymbol.toJson();a.polygonSymbol=this._polygonSymbol.toJson();a.showLabels=this.showLabels;this.labelingInfo&&(a.labelingInfo=e.map(this.labelingInfo,
function(a){return a.toJson()}));this.customParameters&&(a.customParameters=this.customParameters);return a},fromJson:function(a,g){a.id&&(this.id=a.id);a.url&&(this._url=a.url);a.version&&(this._version=a.version);a.mode&&(this._mode=0===a.mode?"snapshot":"onDemand");a.name&&(this._layerName=a.name);a.geometryType&&(this.geometryType=a.geometryType);a.wkid&&(this._wkid=a.wkid);a.maxFeatures&&(this._maxFeatures=a.maxFeatures);a.swapXY&&(this._inverseResponse=a.swapXY);a.swapXYFilter&&(this._inverseFilter=
a.swapXYFilter);a.pointSymbol&&(this._pointSymbol=v.fromJson(a.pointSymbol));a.lineSymbol&&(this._lineSymbol=v.fromJson(a.lineSymbol));a.polygonSymbol&&(this._polygonSymbol=v.fromJson(a.polygonSymbol));this.showLabels=null!=a.showLabels?a.showLabels:!0;a.labelingInfo&&(this.labelingInfo=e.map(a.labelingInfo,function(a){return new y(a)}));this.customParameters=a.customParameters;this._getCapabilities(g);this.loaded=!0},setPointSymbol:function(a){this._pointSymbol=a},setLineSymbol:function(a){this._lineSymbol=
a},setPolygonSymbol:function(a){this._polygonSymbol=a},_setMap:function(a){this._map=a;var g=this.inherited(arguments);this._map&&(this._layerEventHandlers.push(this._map.on("extent-change",l.hitch(this,"refresh"))),this._layerEventHandlers.push(this.on("visibility-change",l.hitch(this,"_visibilityChange"))));this._getFeature();this.refresh();return g},_unsetMap:function(){for(var a=0;a<this._layerEventHandlers.length;a++)k.disconnect(this._layerEventHandlers[a]);this.refresh();this.inherited(arguments)},
refresh:function(a){this.clear();this.redraw();"ondemand"===this._mode.toLowerCase()&&this._fireUpdateStart()},redraw:function(){if(this.visible)for(var a=0;a<this._graphicArray.length;a++){var g=this._graphicArray[a],c=g.geometry,h=null;"point"===c.type?h=this.renderer?this.renderer.getSymbol(g):this._pointSymbol:"multipoint"===c.type?h=this.renderer?this.renderer.getSymbol(g):this._pointSymbol:"polyline"===c.type?h=this.renderer?this.renderer.getSymbol(g):this._lineSymbol:"polygon"===c.type&&(h=
this.renderer?this.renderer.getSymbol(g):this._polygonSymbol);g.setSymbol(h);this.add(g)}},_visibilityChange:function(a){this.visible=a.visible;this.redraw()},onUpdateStart:function(){this._getFeature()},onUpdateEnd:function(){this.clear();this.redraw()},setLabelingInfo:function(a){a?(this.labelingInfo=a,this._fixLabelExpr()):delete this.labelingInfo;this.onLabelingInfoChange()},onLabelingInfoChange:function(){},_fixLabelExpr:function(){var a=/\[([^\[\]]+)\]/ig,g,c=this,h=function(a,g){var h=c._getField(g,
!0);return"["+(h&&h.name||g)+"]"};e.forEach(this.labelingInfo,function(c){if(g=c.labelExpression)c.labelExpression=g.replace(a,h)})},_getField:function(a,g){var c=this.fields;if(!c||0===c.length)return null;var h;g&&(a=a.toLowerCase());e.some(c,function(c){var b=!1;(b=g?c&&c.name.toLowerCase()===a?!0:!1:c&&c.name===a?!0:!1)&&(h=c);return b});return h},setCustomParameters:function(a){this.customParameters=a;this._getFeature();this.refresh()},_getCapabilities:function(a){this._getCapabilitiesCallback=
a;a=l.trim(this._url);if(""===a)this.onError("WFSLayer: url is invalid");else if("1.0.0"!==this._version&&"1.1.0"!==this._version&&"2.0.0"!==this._version)this.onError("WFSLayer: version is invalid");else if(""!==a){var g=-1===a.indexOf("?")?"?":"\x26";a=a+g+"service\x3dWFS\x26request\x3dGetCapabilities\x26version\x3d"+this._version;a=this._appendCustomParameters(a);r({url:a,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._getCapabilitiesResponse,this._errorSupport)}},_errorSupport:function(a){this.onError(a)},
_getCapabilitiesResponse:function(a){var g,c,h,b,d,f=new DOMParser;try{var e=f.parseFromString(a,"text/xml"),u=this._readExceptionReport(e,a);if(u)this.onError("WFSLayer: getCapabilities - returns exception: "+u);else{var s=e.documentElement.attributes.getNamedItem("version");if(s){this._version=s.value;var k="2.0.0"===this._version?"http://www.opengis.net/wfs/2.0":"http://www.opengis.net/wfs";if("2.0.0"===this._version){g=e.getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Operation");for(c=
0;c<g.length;c++){if((b=g[c].attributes.getNamedItem("name"))&&"DescribeFeatureType"===b.value)getList=g[c].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Get"),this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("xlink:href").value;b&&"GetFeature"===b.value&&(d=g[c].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Post"),this.getFeatureUrl=d[0].attributes.getNamedItem("xlink:href").value)}}else if("1.1.0"===this._version){g=e.getElementsByTagNameNS("http://www.opengis.net/ows",
"Operation");for(c=0;c<g.length;c++){if((b=g[c].attributes.getNamedItem("name"))&&"DescribeFeatureType"===b.value)getList=g[c].getElementsByTagNameNS("http://www.opengis.net/ows","Get"),this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("xlink:href").value;if(b&&"GetFeature"===b.value&&(d=g[c].getElementsByTagNameNS("http://www.opengis.net/ows","Post"))&&d.length)this.getFeatureUrl=d[0].attributes.getNamedItem("xlink:href").value}}else if("1.0.0"===this._version){var l=e.getElementsByTagNameNS(k,
"DescribeFeatureType");if(!l||!l.length){this.onError("WFSLayer: getCapabilities - no describeFeatureType info");return}getList=l[0].getElementsByTagNameNS(k,"Get");this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("onlineResource").value;var x=e.getElementsByTagNameNS(k,"GetFeature");if(!x||!x.length){this.onError("WFSLayer: getCapabilities - no GetFeature info");return}if((d=x[0].getElementsByTagNameNS(k,"Post"))&&d.length)this.getFeatureUrl=d[0].attributes.getNamedItem("onlineResource").value}this._nsLayerNames=
{};a=[];var m=e.getElementsByTagNameNS(k,"FeatureTypeList");for(c=0;c<m.length;c++){var y=m[c].getElementsByTagNameNS(k,"FeatureType");for(h=0;h<y.length;h++){var n=y[h],r=n.getElementsByTagNameNS(k,"Name")[0],t=r.textContent,v=t.indexOf(":"),I=t.substring(0,v),z=t.substring(v+1),H=r.lookupNamespaceURI(I);null===H&&(H=r.lookupNamespaceURI(null));this._nsLayerNames[z]={prefix:I,namespace:H};var w=n.getElementsByTagNameNS(k,"Title"),C=0<w.length?w[0].textContent:"";""===C&&(C=z);this.spatialReferences=
this._readFactoryCodes(this._version,n);var B=this._readDefaultBBOX(this._version,n);a.push({name:z,title:C,spatialReferences:this.spatialReferences,extent:B})}}this._describeFeatureType();var A=this._getCapabilitiesCallback;A&&A(a)}else this.onError("WFSLayer: getCapabilities - document not recognized.")}}catch(D){this.onError("WFSLayer: getCapabilities - parsing error")}},_readFactoryCodes:function(a,g){var c,h,b=[];if("2.0.0"===a||"1.1.0"===a){c=g.getElementsByTagNameNS("*","DefaultSRS");this._addCodeList(b,
c[0]);c=g.getElementsByTagNameNS("*","DefaultCRS");this._addCodeList(b,c[0]);c=g.getElementsByTagNameNS("*","OtherSRS");for(h=0;h<c.length;h++)this._addCodeList(b,c[h]);c=g.getElementsByTagNameNS("*","OtherCRS");for(h=0;h<c.length;h++)this._addCodeList(b,c[h])}else"1.0.0"===a&&(c=g.getElementsByTagNameNS("*","SRS"),this._addCodeList(b,c[0]));for(c=!1;0<b.length;){4326===b[0]&&(c=!0);break}c||b.push(4326);return b},_addCodeList:function(a,g){if(g){var c=g.textContent.match(/\d+/g);0<c.length&&(c=parseInt(c[c.length-
1],10),84===c&&(c=4326),a.push(c))}},_readDefaultBBOX:function(a,g){var c,h,b,d;if("2.0.0"===a||"1.1.0"===a){c=g.getElementsByTagNameNS("*","WGS84BoundingBox");if(!c[0]||!c[0].attributes)return[];h=c[0].getElementsByTagNameNS("*","LowerCorner");d=c[0].getElementsByTagNameNS("*","UpperCorner");if(0>=h.length||0>=d.length)return[];b=h[0].textContent;c=b.indexOf(" ");h=b.substring(0,c);b=b.substring(c+1);c=d[0].textContent;var f=c.indexOf(" ");d=c.substring(0,f);c=c.substring(f+1)}else if("1.0.0"===
a){c=g.getElementsByTagNameNS("*","LatLongBoundingBox");if(!c[0]||!c[0].attributes)return[];h=c[0].attributes.getNamedItem("minx").value;b=c[0].attributes.getNamedItem("miny").value;d=c[0].attributes.getNamedItem("maxx").value;c=c[0].attributes.getNamedItem("maxy").value}h=parseFloat(h,10);b=parseFloat(b,10);d=parseFloat(d,10);c=parseFloat(c,10);return[h,b,d,c]},_describeFeatureType:function(a){if(""!==this._layerName)if(""===this._wkid)this.onError("WFSLayer: invalid wkid");else if("snapshot"!==
this._mode&&"onDemand"!==this._mode)this.onError("WFSLayer: invalid mode");else if(""===this._maxFeatures||0>this._maxFeatures||1E6<this._maxFeatures)this.onError("WFSLayer: invalid maxFeatures");else{this._describeFeatureTypeCallback=a;var g=l.trim(this.describeFeatureTypeUrl);if(""!==g){var c=-1===g.indexOf("?")?"?":"\x26",h=this._nsLayerNames[this._layerName];if(void 0===h)this.onError("WFSLayer: invalid layerName");else a=h.prefix,h=h.namespace,g=g+c+"service\x3dWFS\x26request\x3dDescribeFeatureType\x26version\x3d"+
this._version,g+="\x26typeName\x3d",""!==a&&(g+=a+":"),g+=this._layerName,""!==a&&(g+="\x26namespace\x3dxmlns("+a+"\x3d"+h+")"),g=this._appendCustomParameters(g),r({url:g,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._describeFeatureTypeResponse,this._errorSupport)}}},_describeFeatureTypeResponse:function(a){var g;g=(new DOMParser).parseFromString(a,"text/xml");if(a=this._readExceptionReport(g,a))this.onError("WFSLayer: DescribeFeatureType - returns exception: "+a);else{this.fields=
[];a=g.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(g=0;g<a.length;g++){var c=this._readAllFields(a[g]);null!==c&&(this._layerDefinedGeometryType=c[0],this.fields=c[1])}if(!this.geometryType||""===this.geometryType)this.geometryType=this._layerDefinedGeometryType;for(g=0;g<this.fields.length;g++)a=this.fields[g],"esriFieldTypeGeometry"===a.type&&(this._nsGeometryFieldName=a.name);this.layerNamespace=this._nsLayerNames[this._layerName].namespace;if(0===this.fields.length)this.onError("WFSLayer: DescribeFeatureType - can't get fields");
else this._getFeature(),(g=this._describeFeatureTypeCallback)&&g(this.fields)}},_readAllFields:function(a){for(var c=a.childNodes,b=0;b<c.length;b++){var h=c[b];if("element"===h.localName){var p=h.attributes;if(p.name.value===this._layerName)return(c=p.type)?(h=c.value,c=h.indexOf(":"),h=h.substring(c+1),this._readFieldsFromGlobalComplextType(a,h)):this._readFieldsFromLocalComplextType(h)}}return null},_readFieldsFromGlobalComplextType:function(a,c){for(var b=a.childNodes,h=0;h<b.length;h++){var p=
b[h];if("complexType"===p.localName&&p.attributes.name.value===c)return this._readFieldsFromLocalComplextType(p)}return null},_readFieldsFromLocalComplextType:function(a){var c=[],b="esriGeometryComplex";a=a.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");for(var h=0;h<a.length;h++){var p=a[h],d="",f=p.attributes.getNamedItem("name");f&&(d=f.value);if(""!==d){var e=f="",p=p.attributes.getNamedItem("type"),f="unknown";if(null!==p){var e=p.value,k=e.indexOf(":"),f=e.substring(0,
k),e=e.substring(k+1),f=p.lookupNamespaceURI(f);null===f&&(f=p.lookupNamespaceURI(null))}p="Unknown";switch(e){case "integer":case "nonPositiveInteger":case "negativeInteger":case "long":case "int":case "short":case "byte":case "nonNegativeInteger":case "unsignedLong":case "unsignedInt":case "unsignedShort":case "unsignedByte":case "positiveInteger":p="esriFieldTypeInteger";c.push({name:d,alias:d,type:p,wfsNamespace:f});break;case "float":case "double":case "decimal":p="esriFieldTypeDouble";c.push({name:d,
alias:d,type:p,wfsNamespace:f});break;case "boolean":case "string":case "gYearMonth":case "gYear":case "gMonthDay":case "gDay":case "gMonth":case "anyURI":case "QName":case "NOTATION":case "normalizedString":case "token":case "language":case "IDREFS":case "ENTITIES":case "NMTOKEN":case "NMTOKENS":case "Name":case "NCName":case "ID":case "IDREF":case "ENTITY":p="esriFieldTypeString";c.push({name:d,alias:d,type:p,wfsNamespace:f});break;case "duration":case "dateTime":case "time":case "date":p="esriFieldTypeDate";
c.push({name:d,alias:d,type:p,wfsNamespace:f});break;case "PointPropertyType":case "MultiPointPropertyType":p="esriFieldTypeGeometry";b="esriGeometryPoint";c.push({name:d,alias:d,type:p,wfsNamespace:f});break;case "MultiCurvePropertyType":case "MultiLineStringPropertyType":p="esriFieldTypeGeometry";b="esriGeometryPolyline";c.push({name:d,alias:d,type:p,wfsNamespace:f});break;case "MultiSurfacePropertyType":case "MultiPolygonPropertyType":p="esriFieldTypeGeometry";b="esriGeometryPolygon";c.push({name:d,
alias:d,type:p,wfsNamespace:f});break;case "GeometryPropertyType":case "MultiGeometryPropertyType":p="esriFieldTypeGeometry",b="esriGeometryComplex",c.push({name:d,alias:d,type:p,wfsNamespace:f})}}}return[b,c]},_getFeature:function(){var a;a="\x3c?xml version\x3d'1.0' encoding\x3d'utf-8'?\x3e\n\x3cGetFeature \n";a+=" xmlns:xsi\x3d'http://www.w3.org/2001/XMLSchema-instance'\n";a+=" xmlns:gml\x3d'http://www.opengis.net/gml'\n";a+=" xmlns:ogc\x3d'http://www.opengis.net/ogc'\n";a+=" xmlns:wfs\x3d'http://www.opengis.net/wfs'\n";
a="2.0.0"===this._version?a+" xmlns\x3d'http://www.opengis.net/wfs/2.0'\n":a+" xmlns\x3d'http://www.opengis.net/wfs'\n";var c=this._nsLayerNames[this._layerName];if(void 0===c)this.onError("WFSLayer: invalid layerName");else{var b=c.prefix,c=c.namespace;if("ondemand"===this._mode.toLowerCase()&&""===this._nsGeometryFieldName)this.onError("WFSLayer: GetFeature - can't use 'onDemand' mode as geometryFieldName is unknown.");else if(a+=" xmlns:"+b+"\x3d'"+c+"'\n",a="2.0.0"===this._version?a+(" version\x3d'"+
this._version+"' service\x3d'WFS' count\x3d'"+this._maxFeatures+"'\x3e\n"):a+(" version\x3d'"+this._version+"' service\x3d'WFS' maxFeatures\x3d'"+this._maxFeatures+"'\x3e\n"),a="2.0.0"===this._version?a+(" \x3cQuery typeNames\x3d'"+b+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"):a+(" \x3cwfs:Query typeName\x3d'"+b+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"),"ondemand"===this._mode.toLowerCase()&&(a+="  \x3cogc:Filter xmlns:ogc\x3d'http://www.opengis.net/ogc'\x3e\n",
a+="   \x3cogc:BBOX\x3e\n",a+="    \x3cogc:PropertyName\x3e"+b+":"+this._nsGeometryFieldName+"\x3c/ogc:PropertyName\x3e\n",a+="    \x3cgml:Box srsName\x3d'EPSG:"+this._wkid+"'\x3e\n",a=this._inverseFilter?a+"      \x3cgml:coordinates\x3e{ymin},{xmin} {ymax},{xmax}\x3c/gml:coordinates\x3e\n":a+"      \x3cgml:coordinates\x3e{xmin},{ymin} {xmax},{ymax}\x3c/gml:coordinates\x3e\n",a+="    \x3c/gml:Box\x3e\n",a+="   \x3c/ogc:BBOX\x3e\n",a+="  \x3c/ogc:Filter\x3e\n"),a="2.0.0"===this._version?a+" \x3c/Query\x3e\n":
a+" \x3c/wfs:Query\x3e\n",this._getFeatureRequest=a+="\x3c/GetFeature\x3e\n",""===this.getFeatureUrl)this.onError("WFSLayer: getFeature - server doesn't support POST method.");else if(""!==this._getFeatureRequest&&this._map&&null!==this._map.spatialReference.wkid){a=this._getFeatureRequest;if("ondemand"===this._mode.toLowerCase()){a=this._map.extent.xmin;var b=this._map.extent.ymin,c=this._map.extent.xmax,h=this._map.extent.ymax,p={},d=this._map.spatialReference,f=new D(this._wkid);this._projectFromSRToSR(d,
f,a,b,p)&&(a=p.x,b=p.y);this._projectFromSRToSR(d,f,c,h,p)&&(c=p.x,h=p.y);a=this._getFeatureRequest.replace(/{xmin}/,a).replace(/{ymin}/,b).replace(/{xmax}/,c).replace(/{ymax}/,h)}b=this._appendCustomParameters(this.getFeatureUrl);r({url:b,handleAs:"text",headers:{"Content-Type":"text/xml"},postData:a},{usePost:!0}).then(this._parseGml,this._errorSupport)}}},_parseGml:function(a){if(this._map&&this._map.spatialReference&&this._map.spatialReference.wkid){var c=(new DOMParser).parseFromString(a,"text/xml");
if(a=this._readExceptionReport(c,a))this.onError("WFSLayer: GetFeature - returns exception: "+a);else this._gmlNS="2.0.0"===this._version?"http://www.opengis.net/gml/3.2":"http://www.opengis.net/gml",""===this._wkid&&(this._wkid=this._map.spatialReference.wkid),this._graphicArray=this._readFeatureMembers(c,this._wkid,2,this._nsLayerNames[this._layerName].namespace,this._layerName),this.fullExtent=this._createFullExtent(this._graphicArray),this.onLabelingInfoChange(),"ondemand"===this._mode.toLowerCase()?
this._fireUpdateEnd():this.refresh()}},_limit4326:function(a){for(var c=0;c<a.length;c++){var b=a[c].geometry;4326===b.spatialReference.wkid&&(b.x=this._limit4326X(b.x),b.y=this._limit4326Y(b.y))}},_limit4326X:function(a){180<=a&&(a=179.99);-180>=a&&(a=-179.99);return a},_limit4326Y:function(a){90<=a&&(a=89.99);-90>=a&&(a=-89.99);return a},_createFullExtent:function(a){for(var c=null,b=0;b<a.length;b++){var h=a[b].geometry,p=null;(p="point"===h.geometryType?new f(h.x,h.y,h.x,h.y,h.spatialReference):
h.getExtent())&&(c=null===c?p:c.union(p))}return c},_readExceptionReport:function(a,c){return 0<a.getElementsByTagNameNS("*","ExceptionReport").length||0<a.getElementsByTagNameNS("*","ServiceExceptionReport").length?c:""},_readFeatureMembers:function(a,c,b,h,p){var d,f,e,k;f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);var u=[];e=a.getElementsByTagNameNS("*","featureMembers");for(f=0;f<e.length;f++){d=e[f];k=d.getElementsByTagNameNS(h,p);0===k.length&&(k=d.getElementsByTagNameNS(null,
p));0===k.length&&(k=d.getElementsByTagNameNS("*",p));for(d=0;d<k.length;d++)this._readLayer(u,k[d],c,b)}e=a.getElementsByTagNameNS("*","featureMember");for(f=0;f<e.length;f++){d=e[f];k=d.getElementsByTagNameNS(h,p);0===k.length&&(k=d.getElementsByTagNameNS(null,p));0===k.length&&(k=d.getElementsByTagNameNS("*",p));for(d=0;d<k.length;d++)this._readLayer(u,k[d],c,b)}e=a.getElementsByTagNameNS("*","member");for(f=0;f<e.length;f++){d=e[f];k=d.getElementsByTagNameNS(h,p);0===k.length&&(k=d.getElementsByTagNameNS(null,
p));0===k.length&&(k=d.getElementsByTagNameNS("*",p));for(d=0;d<k.length;d++)this._readLayer(u,k[d],c,b)}return u},_readLayer:function(a,c,b,h){var d,f;f=this._readSrsDimension(c);0!==f&&(h=f);var e=c.childNodes,k="",u=null;for(c=0;c<e.length;c++)if(d=e[c],1==d.nodeType&&(f=d.localName,"boundedBy"!==f)){d=this._readGeometry(d,b,h);if(!this._isProjectedOk){this._isProjectedOk=!0;console.error("WFSLayer: could not project geometry.");break}if(null!==d){u=d;k=f;break}}if(u){b={};for(c=0;c<e.length;c++)if(d=
e[c],f=d.localName,h=d.textContent,f!==k)for(d=0;d<this.fields.length;d++){var s=this.fields[d];s.name==f&&(b[f]="esriFieldTypeDouble"===s.type?parseFloat(h,10):"esriFieldTypeInteger"===s.type?parseInt(h,10):h.trim())}this._convertWFSGeometryToGraphicObjects(a,u,b)}},_convertWFSGeometryToGraphicObjects:function(a,c,b){var h;if("point"===c.geometryType&&("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType))h=new w,c=new u(c),h.setGeometry(c),h.setAttributes(b),a.push(h);
else if("multipoint"===c.geometryType&&("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType))h=new w,c=new s(c),h.setGeometry(c),h.setAttributes(b),a.push(h);else if("polyline"===c.geometryType&&("esriGeometryPolyline"===this.geometryType||"esriGeometryComplex"===this.geometryType))h=new w,c=new x(c),h.setGeometry(c),h.setAttributes(b),a.push(h);else if("polygon"===c.geometryType&&("esriGeometryPolygon"===this.geometryType||"esriGeometryComplex"===this.geometryType))h=
new w,c=new I(c),h.setGeometry(c),h.setAttributes(b),a.push(h);else if("multigeometry"===c.geometryType)for(h=0;h<c.length;h++)this._convertWFSGeometryToGraphicObjects(a,c[h],b)},_readGeometry:function(a,c,b){var h,d;h=this._readWkidFromNode(a);-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);d=a.getElementsByTagNameNS(this._gmlNS,"MultiSurface");if(1<=d.length)for(h=0;h<d.length;)return this._readMultiSurface(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"MultiCurve");if(1<=d.length){var f=
[];for(h=0;h<d.length;h++){var e=this._readMultiCurve(d[h],c,b);for(a=0;a<e.length;a++)f.push(e[a])}return{geometryType:"polyline",paths:f,spatialReference:{wkid:this._map.spatialReference.wkid}}}d=a.getElementsByTagNameNS(this._gmlNS,"MultiGeometry");for(h=0;h<d.length;)return this._readMultiGeometry(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Geometry");for(h=0;h<d.length;)return this._readGeometry(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"GeometryCollection");for(h=0;h<d.length;)return this._readGeometryCollection(d[h],
c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Surface");for(h=0;h<d.length;)return this._readSurface(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Curve");for(h=0;h<d.length;)return this._readCurve(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"MultiPolygon");for(h=0;h<d.length;)return this._readMultiPolygon(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(h=0;h<d.length;)return this._readPolygon(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"MultiLineString");for(h=0;h<d.length;)return this._readMultiLineString(d[h],
c,b);d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(h=0;h<d.length;){c=this._readLineString(d[h],c,b);b={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};h=[];for(a=0;a<c.length;a++)h.push(c[a]);b.paths.push(h);return b}d=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");for(h=0;h<d.length;)return this._readLinearRing(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Box");if(1<=d.length)for(h=0;h<d.length;)return this._readBox(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,
"Envelope");for(h=0;h<d.length;)return this._readEnvelope(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"MultiPoint");if(1<=d.length)for(h=0;h<d.length;)return this._readMultiPoint(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"Point");for(h=0;h<d.length;)return this._readPoint(d[h],c,b);return null},_readGeometryCollection:function(a,c,b){var h,d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);d=[];d.geometryType="multigeometry";d.spatialReference={wkid:this._map.spatialReference.wkid};
h=a.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(a=0;a<h.length;a++){var f=this._readGeometryMember(h[a],c,b);d.push(f)}return d},_readMultiGeometry:function(a,c,b){var h,d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);d=[];d.geometryType="multigeometry";d.spatialReference={wkid:this._map.spatialReference.wkid};h=a.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(a=0;a<h.length;a++){var f=this._readGeometryMember(h[a],c,b);d.push(f)}return d},
_readSurface:function(a,c,b){var h,d;h=this._readWkidFromNode(a);-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);var f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"Point");for(h=0;h<d.length;h++)f.push(this._readPoint(d[h],c,b));d=a.getElementsByTagNameNS(this._gmlNS,"patches");for(h=0;h<d.length;h++){a=this._readPatches(d[h],c,b);for(var e=0;e<a.length;e++)f.push(a[e])}return f},_readMultiSurface:function(a,
c,b){var h,d,f;h=this._readWkidFromNode(a);-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);var e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};f=a.getElementsByTagNameNS(this._gmlNS,"surfaceMember");for(h=0;h<f.length;h++){var k=this._readSurfaceMember(f[h],c,b);for(d=0;d<k.length;d++)e.push(k[d])}f=a.getElementsByTagNameNS(this._gmlNS,"surfaceMembers");for(h=0;h<f.length;h++){a=this._readSurfaceMembers(f[h],c,b);for(d=0;d<a.length;d++)e.push(a[d])}return e},
_readCurve:function(a,c,b){var h,d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);d={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};h=a.getElementsByTagNameNS(this._gmlNS,"segments");for(a=0;a<h.length;a++)for(var f=this._readSegments(h[a],c,b),e=0;e<f.length;e++)d.paths.push(f[e]);return d},_readSegments:function(a,c,b){var h,d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);d=[];d.geometryType=
"multigeometry";d.spatialReference={wkid:this._map.spatialReference.wkid};h=a.getElementsByTagNameNS(this._gmlNS,"LineStringSegment");for(a=0;a<h.length;a++){var f=this._readLineStringSegment(h[a],c,b);d.push(f)}return d},_readLineStringSegment:function(a,c,b){var h=this._readWkidFromNode(a);-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);for(a=a.getElementsByTagNameNS(this._gmlNS,"posList");0<a.length;)return this._readPosList(a[0],c,b)},_readMultiCurve:function(a,c,b){var h,d,f,e;h=this._readWkidFromNode(a);
-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);var k=[];k.spatialReference={wkid:this._map.spatialReference.wkid};f=a.getElementsByTagNameNS(this._gmlNS,"curveMember");for(h=0;h<f.length;h++){e=this._readCurveMember(f[h],c,b);for(d=0;d<e.length;d++)k.push(e[d])}f=a.getElementsByTagNameNS(this._gmlNS,"curveMembers");for(h=0;h<f.length;h++){e=this._readCurveMembers(f[h],c,b);for(d=0;d<e.length;d++)k.push(e[d])}return k},_readGeometryMember:function(a,c,b){var h,d;h=this._readWkidFromNode(a);
-1!=h&&(c=h);h=this._readSrsDimension(a);0!==h&&(b=h);d=a.getElementsByTagNameNS(this._gmlNS,"Point");for(h=0;h<d.length;)return this._readPoint(d[h],c,b);d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(h=0;h<d.length;){c=this._readLineString(d[h],c,b);b={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};h=[];for(a=0;a<c.length;a++)h.push(c[a]);b.paths.push(h);return b}d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(h=0;h<d.length;)return this._readPolygon(d[h],
c,b);return null},_readSurfaceMember:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(a=0;a<d.length;a++){var e=this._readPolygon(d[a],c,b);f.push(e)}return f},_readSurfaceMembers:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.geometryType=
"multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(a=0;a<d.length;a++){var e=this._readPolygon(d[a],c,b);f.push(e)}return f},_readCurveMember:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(a=0;a<d.length;a++){var e=this._readLineString(d[a],
c,b);f.push(e)}return f},_readCurveMembers:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(a=0;a<d.length;a++){var e=this._readLineString(d[a],c,b);f.push(e)}return f},_readBox:function(a,c,b){var d,f,e,k,u,s,l,x=this._readWkidFromNode(a);-1!=x&&(c=x);x=this._readSrsDimension(a);0!==x&&(b=x);x=
{geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};f=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<f.length;d++)if(e=this._readCoordinates(f[d],c,b))return 1<=e.length&&(k=s=e[0][0],u=l=e[0][1]),1<=e.length&&(s=e[1][0],l=e[1][1]),x.rings.push([[k,u],[k,l],[s,l],[s,u],[k,u]]),x;f=a.getElementsByTagNameNS(this._gmlNS,"coord");if(2<=f.length){if((a=this._readCoord(f[0],c,b))&&1<=a.length)k=s=a[0][0],u=l=a[0][1];if((c=this._readCoord(f[1],c,b))&&
1<=c.length)s=c[0][0],l=c[0][1];x.rings.push([[k,u],[k,l],[s,l],[s,u],[k,u]]);return x}return null},_readEnvelope:function(a,c,b){var d,f,e,k;d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);f=a.getElementsByTagNameNS(this._gmlNS,"lowerCorner");for(d=0;d<f.length;d++){var u=this._readCoordinates(f[d],c,b);u&&(e=u[0])}f=a.getElementsByTagNameNS(this._gmlNS,"upperCorner");for(d=0;d<f.length;d++)(a=this._readCoordinates(f[d],c,b))&&(k=a[0]);return e&&k?{geometryType:"polygon",
rings:[[[e[0],e[1]],[e[0],k[1]],[k[0],k[1]],[k[0],e[1]],[e[0],e[1]]]],spatialReference:{wkid:this._map.spatialReference.wkid}}:null},_readPolygon:function(a,c,b){var d,f,e;d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);var k={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};f=a.getElementsByTagNameNS(this._gmlNS,"outerBoundaryIs");for(d=0;d<f.length;d++)e=this._readOuterBoundaryIs(f[d],c,b),k.rings.push(e);f=a.getElementsByTagNameNS(this._gmlNS,
"innerBoundaryIs");for(d=0;d<f.length;d++)e=this._readInnerBoundaryIs(f[d],c,b),k.rings.push(e);f=a.getElementsByTagNameNS(this._gmlNS,"exterior");for(d=0;d<f.length;d++)e=this._readExterior(f[d],c,b),k.rings.push(e);f=a.getElementsByTagNameNS(this._gmlNS,"interior");for(d=0;d<f.length;d++)e=this._readInterior(f[d],c,b),k.rings.push(e);return k},_readPolygonMember:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,
"Polygon");0<a.length;)return this._readPolygon(a[0],c,b);return null},_readMultiPolygon:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"polygonMember");for(a=0;a<d.length;a++){var e=this._readPolygonMember(d[a],c,b);f.push(e)}return f},_readOuterBoundaryIs:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&
(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],c,b);return null},_readInnerBoundaryIs:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],c,b);return null},_readExterior:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);
0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],c,b);return null},_readInterior:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],c,b);return null},_readPatches:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f=[];f.spatialReference=
{wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"PolygonPatch");for(a=0;a<d.length;a++)f.push(this._readPolygon(d[a],c,b));return f},_readLineString:function(a,c,b){var d,f,e,k,u;d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);var s=[];s.spatialReference={wkid:this._map.spatialReference.wkid};e=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<e.length;d++)if(k=this._readCoordinates(e[d],c,b))for(f=0;f<k.length;f++)u=k[f],
s.push(u);e=a.getElementsByTagNameNS(this._gmlNS,"coord");for(d=0;d<e.length;d++)if(k=this._readCoord(e[d],c,b))for(f=0;f<k.length;f++)u=k[f],s.push(u);e=a.getElementsByTagNameNS(this._gmlNS,"posList");for(d=0;d<e.length;d++)if(k=this._readPosList(e[d],c,b))for(f=0;f<k.length;f++)u=k[f],s.push(u);return s},_readLineStringMember:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LineString");0<a.length;)return this._readLineString(a[0],
c,b);return null},_readMultiLineString:function(a,c,b){var d,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);0!==f&&(b=f);f={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=a.getElementsByTagNameNS(this._gmlNS,"lineStringMember");for(a=0;a<d.length;a++){var e=this._readLineStringMember(d[a],c,b);e&&f.paths.push(e)}return 1<=f.paths.length?f:null},_readPoint:function(a,c,b){var d,f,e;d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);
0!==d&&(b=d);f=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<f.length;d++)if(e=this._readCoordinates(f[d],c,b))return{geometryType:"point",x:e[0][0],y:e[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};f=a.getElementsByTagNameNS(this._gmlNS,"pos");for(d=0;d<f.length;d++)if((e=this._readPos(f[d],c,b))&&0<e.length)return{geometryType:"point",x:e[0][0],y:e[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};f=a.getElementsByTagNameNS(this._gmlNS,"coord");for(d=
0;d<f.length;d++)if(a=this._readCoord(f[d],c,b))return{geometryType:"point",x:a[0][0],y:a[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};return null},_readPointMember:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"Point");0<a.length;)return this._readPoint(a[0],c,b);return null},_readMultiPoint:function(a,c,d){var b,f=this._readWkidFromNode(a);-1!=f&&(c=f);f=this._readSrsDimension(a);
0!==f&&(d=f);f={geometryType:"multipoint",points:[],spatialReference:{wkid:this._map.spatialReference.wkid}};b=a.getElementsByTagNameNS(this._gmlNS,"pointMember");for(a=0;a<b.length;a++){var e=this._readPointMember(b[a],c,d);e&&f.points.push([e.x,e.y])}return 1<=f.points.length?f:null},_readLinearRing:function(a,c,d){var b,f;b=this._readWkidFromNode(a);-1!=b&&(c=b);b=this._readSrsDimension(a);0!==b&&(d=b);f=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(b=0;b<f.length;)return this._readCoordinates(f[b],
c,d);f=a.getElementsByTagNameNS(this._gmlNS,"posList");for(b=0;b<f.length;)return this._readCoordinates(f[b],c,d);f=a.getElementsByTagNameNS(this._gmlNS,"pos");for(b=0;b<f.length;)return this._readPos(f[b],c,d)},_readCoordinatesBody:function(a,c,b){var d,f=new D(a);c=c.trim();var e,k,u=[];u.spatialReference={wkid:this._map.spatialReference.wkid};a=this._isReverse(a,this.version);if(c)if(2===b){if((c=c.match(/[0123456789.\-\+eE]+/g))&&2<=c.length)for(b=0;b<c.length;b+=2)e=parseFloat(c[b]),k=parseFloat(c[b+
1]),a&&(d=k,k=e,e=d),d={},this._projectFromSRToSR(f,this._map.spatialReference,e,k,d)&&(e=d.x,k=d.y),u.push([e,k])}else if(3===b&&(c=c.match(/[0123456789.\-\+eE]+/g))&&3<=c.length)for(b=0;b<c.length;b+=3)e=parseFloat(c[b]),k=parseFloat(c[b+1]),a&&(d=k,k=e,e=d),d={},this._projectFromSRToSR(f,this._map.spatialReference,e,k,d)&&(e=d.x,k=d.y),u.push([e,k]);return u},_readCoord:function(a,c,b){var d,f,e,k,u=this._readWkidFromNode(a);-1!=u&&(c=u);u=new D(c);e=this._readSrsDimension(a);0!==e&&(b=e);var s=
this._isReverse(c,this.version),x=[];x.spatialReference={wkid:this._map.spatialReference.wkid};e=0;f=a.getElementsByTagNameNS(this._gmlNS,"X");for(d=0;d<f.length;){e=this._readFloat(f[d],c,b);break}k=0;f=a.getElementsByTagNameNS(this._gmlNS,"Y");for(d=0;d<f.length;){k=this._readFloat(f[d],c,b);break}s&&(a=k,k=e,e=a);a={};this._projectFromSRToSR(u,this._map.spatialReference,e,k,a)&&(e=a.x,k=a.y);x.push(s?[k,e]:[e,k]);return x},_readCoordinates:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&
(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);return this._readCoordinatesBody(c,a.textContent,b)},_readPos:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);return this._readCoordinatesBody(c,a.textContent,b)},_readPosList:function(a,c,b){var d=this._readWkidFromNode(a);-1!=d&&(c=d);d=this._readSrsDimension(a);0!==d&&(b=d);return this._readCoordinatesBody(c,a.textContent,b)},_projectFromSRToSR:function(a,b,d,f,e){if(c.canProject(a,b))return a=
new u(d,f,a),b=c.project(a,b),e.x=b.x,e.y=b.y,!0;e.x=d;e.y=f;return this._isProjectedOk=!1},_readFloat:function(a){return(a=a.textContent)?parseFloat(a):0},_readSrsDimension:function(a){return a.attributes&&(a=a.attributes.getNamedItem("srsDimension"))?parseInt(a.value,10):0},_readWkidFromNode:function(a){if(a.attributes&&(a=a.attributes.getNamedItem("srsName")))if((a=a.value.match(/\d+/g))&&0<a.length)return a=parseInt(a[a.length-1],10),84===a&&(a=4326),parseInt(a,10);return-1},_isReverse:function(a,
c){return this._inverseResponse},_appendCustomParameters:function(a){if(this.customParameters)for(var c in this.customParameters)a+=(-1===a.indexOf("?")?"?":"\x26")+c+"\x3d"+encodeURIComponent(this.customParameters[c]);return a}})})},"esri/layers/WMTSLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff dojox/xml/parser ../kernel ../lang ../request ../WKIDUnitConversion ../SpatialReference ../geometry/Point ../geometry/Extent ../geometry/webMercatorUtils ./TiledMapServiceLayer ./TileInfo ./WMTSLayerInfo dojo/query".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D){return d([A],{declaredClass:"esri.layers.WMTSLayer",copyright:null,extent:null,tileUrl:null,spatialReference:null,tileInfo:null,constructor:function(c,b){this.version="1.0.0";this.tileUr=this._url=c;this.serviceMode="RESTful";this._parseCapabilities=l.hitch(this,this._parseCapabilities);this._getCapabilitiesError=l.hitch(this,this._getCapabilitiesError);b||(b={});if(b.serviceMode)if("KVP"===b.serviceMode||"RESTful"===b.serviceMode)this.serviceMode=b.serviceMode;
else{console.error("WMTS mode could only be 'KVP' or 'RESTful'");return}this.customParameters=b.customParameters;this.customLayerParameters=b.customLayerParameters;this.layerInfo=new D;b.layerInfo&&(this.layerInfo=b.layerInfo,this._identifier=b.layerInfo.identifier,this._tileMatrixSetId=b.layerInfo.tileMatrixSet,b.layerInfo.format&&(this.format="image/"+b.layerInfo.format),this._style=b.layerInfo.style,this.title=b.layerInfo.title,this._dimension=b.layerInfo.dimension,this._dimension2=b.layerInfo.dimension2);
b.resourceInfo?(this.version=b.resourceInfo.version,b.resourceInfo.getTileUrl&&(this._url=this.tileUrl=b.resourceInfo.getTileUrl),this.copyright=b.resourceInfo.copyright,this.layerInfos=b.resourceInfo.layerInfos,this.customParameters=b.resourceInfo.customParameters||this.customParameters,this.customLayerParameters=b.resourceInfo.customLayerParameters||this.customLayerParameters,this._parseResourceInfo(),this.loaded=!0,this.onLoad(this)):this._getCapabilities();this._formatDictionary={"image/png":".png",
"image/png8":".png","image/png24":".png","image/png32":".png","image/jpg":".jpg","image/jpeg":".jpeg","image/gif":".gif","image/bmp":".bmp","image/tiff":".tif","image/jpgpng":"","image/jpegpng":"","image/unknown":""}},setActiveLayer:function(c){this.setVisibleLayer(c)},setVisibleLayer:function(c){this._setActiveLayer(c);this.refresh(!0)},setCustomParameters:function(c,b){this.customParameters=c;this.customLayerParameters=b;this.refresh(!0)},getTileUrl:function(c,b,d){c=this._levelToLevelValue[c];
c=this.resourceUrls&&0<this.resourceUrls.length?this.resourceUrls[b%this.resourceUrls.length].template.replace(/\{Style\}/gi,this._style).replace(/\{TileMatrixSet\}/gi,this._tileMatrixSetId).replace(/\{TileMatrix\}/gi,c).replace(/\{TileRow\}/gi,b).replace(/\{TileCol\}/gi,d).replace(/\{dimensionValue\}/gi,this._dimension).replace(/\{dimensionValue2\}/gi,this._dimension2):this.UrlTemplate.replace(/\{level\}/gi,c).replace(/\{row\}/gi,b).replace(/\{col\}/gi,d);c=this._appendCustomLayerParameters(c);return c=
this.addTimestampToURL(c)},getTileUrlTemplate:function(c){var b=c.identifier,d=c.tileMatrixSet,k=c.format,x=c.style,l=c.dimension,m=c.dimension2;b?c=e.filter(this.layers,function(a){return a.identifier===b})[0]:(c=this.layers[0],b=this.layers[0].identifier);if(c){if(k){if(-1===k.indexOf("image/")&&(k="image/"+k),-1===e.indexOf(c.formats,k)){console.error("The layer doesn't support the format of "+k);this.onError(Error("The layer doesn't support the format of "+k));return}}else k=c.formats[0],-1===
k.indexOf("image/")&&(k="image/"+k);if(x){if(-1===e.indexOf(c.styles,x)){console.error("The layer doesn't support the style of "+x);this.onError(Error("The layer doesn't support the style of "+x));return}}else x=c.styles[0];if(!l&&c.dimensions)l=c.dimensions[0];else if(-1===e.indexOf(c.dimensions,l)){console.error("The layer doesn't support the dimension of "+l);this.onError(Error("The layer doesn't support the dimension of "+l));return}if(!m&&c.dimensions2)m=c.dimensions2[0];else if(-1===e.indexOf(c.dimensions2,
m)){console.error("The layer doesn't support the dimension of "+m);this.onError(Error("The layer doesn't support the dimension of "+m));return}var n;if(d){if(n=e.filter(c.tileMatrixSetInfos,function(a){return a.tileMatrixSet===d})[0],!n){console.error("The tileMatrixSetId "+d+" is not supported by the layer of "+b);this.onError(Error("The tileMatrixSetId "+d+" is not supported by the layer of "+b));return}}else(n=e.filter(c.tileMatrixSetInfos,function(a){return"GoogleMapsCompatible"===a.tileMatrixSet})[0])||
(n=c.tileMatrixSetInfos[0]),d=n.tileMatrixSet;return this._getTileUrlTemplate(b,d,k,x,l,m)}console.error("couldn't find the layer "+b);this.onError(Error("couldn't find the layer "+b))},_getTileUrlTemplate:function(c,b,d,e,k,l){var m;c||(c=this._identifier);b||(b=this._tileMatrixSetId);d||(d=this.format);!e&&""!==e&&(e=this._style);if(this.resourceUrls&&0<this.resourceUrls.length)return m=this.resourceUrls[0].template,m.indexOf(".xxx")===m.length-4&&(m=m.slice(0,m.length-4)),m=m.replace(/\{Style\}/gi,
e),m=m.replace(/\{TileMatrixSet\}/gi,b),m=m.replace(/\{TileMatrix\}/gi,"{level}"),m=m.replace(/\{TileRow\}/gi,"{row}"),m=m.replace(/\{TileCol\}/gi,"{col}"),m=m.replace(/\{dimensionValue\}/gi,k),m=m.replace(/\{dimensionValue2\}/gi,l);"KVP"===this.serviceMode?m=this._url+"SERVICE\x3dWMTS\x26VERSION\x3d"+this.version+"\x26REQUEST\x3dGetTile\x26LAYER\x3d"+c+"\x26STYLE\x3d"+e+"\x26FORMAT\x3d"+d+"\x26TILEMATRIXSET\x3d"+b+"\x26TILEMATRIX\x3d{level}\x26TILEROW\x3d{row}\x26TILECOL\x3d{col}":"RESTful"===this.serviceMode&&
(k="",this._formatDictionary[d.toLowerCase()]&&(k=this._formatDictionary[d.toLowerCase()]),m=this._url+c+"/"+e+"/"+b+"/{level}/{row}/{col}"+k);return m},_parseResourceInfo:function(){var c=this.layerInfos,b;"KVP"===this.serviceMode&&(this._url+=-1<this._url.indexOf("?")?"":"?");for(b=0;b<c.length;b++)if((!this._identifier||c[b].identifier===this._identifier)&&(!this.title||c[b].title===this.title)&&(!this._tileMatrixSetId||c[b].tileMatrixSet===this._tileMatrixSetId)&&(!this.format||"image/"+c[b].format===
this.format)&&(!this._style||c[b].style===this._style)){l.mixin(this,{description:c[b].description,tileInfo:c[b].tileInfo,spatialReference:c[b].tileInfo.spatialReference,fullExtent:c[b].fullExtent,initialExtent:c[b].initialExtent,_identifier:c[b].identifier,_tileMatrixSetId:c[b].tileMatrixSet,format:"image/"+c[b].format,_style:c[b].style});break}this._setActiveLayer();this.UrlTemplate=this._getTileUrlTemplate();this._levelToLevelValue=[];e.forEach(this.tileInfo.lods,function(c){this._levelToLevelValue[c.level]=
c.levelValue?c.levelValue:c.level},this)},_getCapabilities:function(){var c;"KVP"===this.serviceMode?c=-1<this._url.indexOf("?")?this._url+"\x26request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:this._url+"?request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:"RESTful"===this.serviceMode&&(c=this._url+"/"+this.version+"/WMTSCapabilities.xml");c=this._appendCustomParameters(c);n({url:c,handleAs:"text",load:this._parseCapabilities,error:this._getCapabilitiesError})},
_parseCapabilities:function(c){c=c.replace(/ows:/gi,"");c=t.parse(c);var b=m.query("Contents",c)[0];if(b){var d=m.query("OperationsMetadata",c)[0],k=m.query("[name\x3d'GetTile']",d)[0],d=this._url,k=m.query("Get",k),l,n=!1,y,r;for(l=0;l<k.length;l++){var a=m.query("Constraint",k[l])[0];if(!a||this._getTagWithChildTagValue("AllowedValues","Value",this.serviceMode,a)){d=k[l].attributes[0].nodeValue;n=!0;break}else if(!a||this._getTagWithChildTagValue("AllowedValues","Value","RESTful",a))y=k[l].attributes[0].nodeValue;
else if(!a||this._getTagWithChildTagValue("AllowedValues","Value","KVP",a))r=k[l].attributes[0].nodeValue}n||("KVP"===this.serviceMode&&y?(d=y,this.serviceMode="RESTful"):"RESTful"===this.serviceMode&&r&&(d=r,this.serviceMode="KVP"));-1===d.indexOf("/1.0.0/")&&"RESTful"===this.serviceMode&&(d+="/");"KVP"===this.serviceMode&&(d+=-1<d.indexOf("?")?"":"?");this._url=d;this.copyright=this._getTagValues("Capabilities\x3eServiceIdentification\x3eAccessConstraints",c)[0];y=m.query("Layer",b);var g,q=[];
this.layers=[];e.forEach(y,function(a){g=this._getTagValues("Identifier",a)[0];q.push(g);this.layers.push(this._getWMTSLayerInfo(g,a,b))},this);this._setActiveLayer();this.loaded=!0;this.onLoad(this)}else console.error("The WMTS capabilities XML is not valid"),this.onError(Error("The WMTS capabilities XML is not valid"))},_setActiveLayer:function(c){c||(c={});c.identifier&&(this._identifier=c.identifier);c.tileMatrixSet&&(this._tileMatrixSetId=c.tileMatrixSet);c.format&&(this.format=c.format);c.style&&
(this._style=c.style);c.dimension&&(this._dimension=c.dimension);c.dimension2&&(this._dimension2=c.dimension2);if(this.layers)if(this._identifier?c=e.filter(this.layers,function(c){return c.identifier===this._identifier},this)[0]:(c=this.layers[0],this._identifier=this.layers[0].identifier),c){if(this.format){if(-1===this.format.indexOf("image/")&&(this.format="image/"+this.format),-1===e.indexOf(c.formats,this.format)){console.error("The layer doesn't support the format of "+this.format);this.onError(Error("The layer doesn't support the format of "+
this.format));return}}else this.format=c.formats[0],-1===this.format.indexOf("image/")&&(this.format="image/"+this.format);if(this._style){if(-1===e.indexOf(c.styles,this._style)){console.error("The layer doesn't support the style of "+this._style);this.onError(Error("The layer doesn't support the style of "+this._style));return}}else this._style=c.styles[0];if(!this._dimension&&c.dimensions)this._dimension=c.dimensions[0];else if(-1===e.indexOf(c.dimensions,this._dimension)){console.error("The layer doesn't support the dimension of "+
this._dimension);this.onError(Error("The layer doesn't support the dimension of "+this._dimension));return}if(!this._dimension2&&c.dimensions2)this._dimension2=c.dimensions2[0];else if(-1===e.indexOf(c.dimensions2,this._dimension2)){console.error("The layer doesn't support the dimension of "+this._dimension2);this.onError(Error("The layer doesn't support the dimension of "+this._dimension2));return}var b;if(this._tileMatrixSetId){if(b=e.filter(c.tileMatrixSetInfos,function(c){return c.tileMatrixSet===
this._tileMatrixSetId},this)[0],!b){console.error("The tileMatrixSetId "+this._tileMatrixSetId+" is not supported by the layer of "+this._identifier);this.onError(Error("The tileMatrixSetId "+this._tileMatrixSetId+" is not supported by the layer of "+this._identifier));return}}else(b=e.filter(c.tileMatrixSetInfos,function(c){return"GoogleMapsCompatible"===c.tileMatrixSet})[0])||(b=c.tileMatrixSetInfos[0]),this._tileMatrixSetId=b.tileMatrixSet;this.description=c.description;this.title=c.title;this.spatialReference=
b.tileInfo.spatialReference;this.tileInfo=b.tileInfo;this._levelToLevelValue=[];e.forEach(this.tileInfo.lods,function(c){this._levelToLevelValue[c.level]=c.levelValue?c.levelValue:c.level},this);102100===this.spatialReference.wkid||102113===this.spatialReference.wkid?this.fullExtent=this.initialExtent=C.geographicToWebMercator(c.gcsExtent):4326===this.spatialReference.wkid?this.fullExtent=this.initialExtent=c.gcsExtent:(this.fullExtent=b.fullExtent,this.initialExtent=b.initialExtent);this.resourceUrls=
c.resourceUrls;this.UrlTemplate=this._getTileUrlTemplate();this.layerInfo={identifier:this._identifier,tileMatrixSet:this._tileMatrixSetId,format:this.format,style:this._style,fullExtent:this.fullExtent,initialExtent:this.initialExtent,tileInfo:this.tileInfo,title:this.title,description:this.description}}else console.error("couldn't find the layer "+this._identifier),this.onError(Error("couldn't find the layer "+this._identifier))},_getWMTSLayerInfo:function(c,b,d){var k=this._getTagValues("Abstract",
b)[0],l=this._getTagValues("Title",b)[0],n=m.query("WGS84BoundingBox",b)[0],y=n?this._getTagValues("LowerCorner",n)[0].split(" "):["-180","-90"],r=n?this._getTagValues("UpperCorner",n)[0].split(" "):["180","90"],n=parseFloat(y[0]),y=parseFloat(y[1]),a=parseFloat(r[0]),r=parseFloat(r[1]),n=new z(n,y,a,r,new E({wkid:4326})),r=this._getTagValues("Identifier",m.query("Style",b)[0]),g=this._getTagValues("Identifier",m.query("Dimension",b)[0]),q=this._getTagValues("Default",m.query("Dimension",b)[0])||
this._getTagValues("Value",m.query("Dimension",b)[0]),h=1<m.query("Dimension",b).length?this._getTagValues("Identifier",m.query("Dimension",b)[1]):[],p=1<m.query("Dimension",b).length?this._getTagValues("Default",m.query("Dimension",b)[1])||this._getTagValues("Value",m.query("Dimension",b)[1]):[],y=this._getTagValues("Format",b);d=this._getLayerMatrixInfos(b,d);c={identifier:c,tileMatrixSetInfos:d,formats:y,styles:r,title:l,description:k,gcsExtent:n,dimensions:q,dimensions2:p};b=m.query("ResourceURL",
b);var t=[],v;e.forEach(b,function(a){v=a.getAttribute("template");if(g&&q&&g[0]&&q[0])if(-1<v.indexOf("{"+g+"}"))v=v.replace("{"+g+"}","{dimensionValue}");else{var c=v.toLowerCase().indexOf("{"+g[0].toLowerCase()+"}");-1<c&&(v=v.substring(0,c)+"{dimensionValue}"+v.substring(c+g[0].length+2))}h&&(p&&h[0]&&p[0])&&(-1<v.indexOf("{"+h+"}")?v=v.replace("{"+h+"}","{dimensionValue2}"):(c=v.toLowerCase().indexOf("{"+h[0].toLowerCase()+"}"),-1<c&&(v=v.substring(0,c)+"{dimensionValue2}"+v.substring(c+h[0].length+
2))));t.push({template:v,format:a.getAttribute("format"),resourceType:a.getAttribute("resourceType")})});t&&0<t.length&&(c.resourceUrls=t);return c},_getLayerMatrixInfos:function(c,b){var d,k=[];this._allMatrixInfos||(this._allMatrixInfos=[]);var m=this._getTagValues("TileMatrixSet",c);if(m&&0!==m.length)return e.forEach(m,function(e){var m;if(0<this._allMatrixInfos.length)for(d=0;d<this._allMatrixInfos.length;d++)if(this._allMatrixInfos[d].tileMatrixSet==e){m=this._allMatrixInfos[d];break}m||(m=
this._getLayerMatrixInfo(e,c,b),this._allMatrixInfos.push(m));k.push(m)},this),k},_getLayerMatrixInfo:function(c,b,d){var e,k,l,n,r=[];b=this._getTagWithChildTagValue("TileMatrixSetLink","TileMatrixSet",c,b);var a=this._getTagValues("TileMatrix",b),g=this._getTagWithChildTagValue("TileMatrixSet","Identifier",c,d),q=this._getTagValues("SupportedCRS",g)[0];e=parseInt(q.split(":").pop(),10);if(900913==e||3857==e)e=102100;if(-1<q.toLowerCase().indexOf("crs84")||-1<q.toLowerCase().indexOf("crs:84"))e=
4326,n=!0;else if(-1<q.toLowerCase().indexOf("crs83")||-1<q.toLowerCase().indexOf("crs:83"))e=4269,n=!0;else if(-1<q.toLowerCase().indexOf("crs27")||-1<q.toLowerCase().indexOf("crs:27"))e=4267,n=!0;var h=new E({wkid:e}),p=m.query("TileMatrix",g)[0];d=parseInt(this._getTagValues("TileWidth",p)[0],10);b=parseInt(this._getTagValues("TileHeight",p)[0],10);k=this._getTagValues("TopLeftCorner",p)[0].split(" ");var t=k[0],w=k[1];1<t.split("E").length&&(k=t.split("E"),t=k[0]*Math.pow(10,k[1]));1<w.split("E").length&&
(k=w.split("E"),w=k[0]*Math.pow(10,k[1]));var t=parseFloat(t),w=parseFloat(w),C=n&&4326===e&&90===t&&-180===w;for(k=0;k<this._flippingAxisForWkids.length;k++)if(q.split(":").pop()>=this._flippingAxisForWkids[k][0]&&q.split(":").pop()<=this._flippingAxisForWkids[k][1]||4326===e&&(!n||C)){4326===e&&90<t&&(t="90");l=new v(w,t,h);break}k===this._flippingAxisForWkids.length&&(l=new v(t,w,h));if(0===a.length){a=m.query("TileMatrix",g);for(k=0;k<a.length;k++)n=this._getLodFromTileMatrix(a[k],e,k,c),r.push(n)}else for(k=
0;k<a.length;k++)n=this._getTagWithChildTagValue("TileMatrix","Identifier",a[k],g),n=this._getLodFromTileMatrix(n,e,k,c),r.push(n);e=m.query("BoundingBox",g)[0];var A,D;e&&(A=this._getTagValues("LowerCorner",e)[0].split(" "),D=this._getTagValues("UpperCorner",e)[0].split(" "));A&&1<A.length&&D&&1<D.length?(p=parseFloat(A[0]),e=parseFloat(A[1]),A=parseFloat(D[0]),D=parseFloat(D[1])):(A=this._getTagValues("MatrixWidth",p)[0],e=this._getTagValues("MatrixHeight",p)[0],p=l.x,D=l.y,A=p+A*b*r[0].resolution,
e=D-e*d*r[0].resolution);D=A=new z(p,e,A,D,h);l=new B({dpi:96,spatialReference:h,format:this.format,rows:d,cols:b,origin:l,lods:r});return{tileMatrixSet:c,fullExtent:D,initialExtent:A,tileInfo:l}},_getCapabilitiesError:function(c){console.error("Failed to get capabilities xml");this.onError(c)},_getLodFromTileMatrix:function(c,b,d,e){var k=this._getTagValues("Identifier",c)[0];c=this._getTagValues("ScaleDenominator",c)[0];1<c.split("E").length?(c=c.split("E"),c=c[0]*Math.pow(10,c[1])):c=parseFloat(c);
b=r.isDefined(w[b])?w.values[w[b]]:"default028mm"===e?6370997*Math.PI/180:6378137*Math.PI/180;b=7*c/25E3/b;return{level:d,levelValue:k,scale:1.058267716535433*c,resolution:b}},_getTag:function(c,b){var d=m.query(c,b);return d&&0<d.length?d[0]:null},_getTagValues:function(c,b){var d=[],s=c.split("\x3e"),l,n;l=m.query(s[0],b)[0];if(1<s.length){for(n=1;n<s.length-1;n++)l=m.query(s[n],l)[0];s=m.query(s[s.length-1],l)}else s=m.query(s[0],b);s&&0<s.length&&e.forEach(s,function(c){9>k("ie")?d.push(c.childNodes.length?
c.childNodes[0].nodeValue:""):d.push(c.textContent)});return d},_getAttributeValues:function(c,b,d){c=m.query(c,d);var k=[];c&&0<c.length&&e.forEach(c,function(c){k.push(c.getAttribute(b))});return k},_getTagWithChildTagValue:function(c,b,d,e){e=e.childNodes;var l,n;for(n=0;n<e.length;n++)if(-1<e[n].nodeName.indexOf(c)&&(9>k("ie")?r.isDefined(m.query(b,e[n])[0])&&(l=m.query(b,e[n])[0].childNodes[0].nodeValue):r.isDefined(m.query(b,e[n])[0])&&(l=m.query(b,e[n])[0].textContent),l===d||d.split(":")&&
l===d.split(":")[1]))return e[n]},_appendCustomParameters:function(c){var b;if(this.customParameters)for(b in this.customParameters)c+=(-1===c.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(this.customParameters[b]);return c},_appendCustomLayerParameters:function(c){var b,d;if(this.customLayerParameters||this.customParameters)for(b in d=l.clone(this.customParameters||{}),l.mixin(d,this.customLayerParameters||{}),d)c+=(-1===c.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(d[b]);return c},
_flippingAxisForWkids:[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],
[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],
[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],
[31466,31700]]})})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(m){m.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(d,l){var e=m.doc,k;l=l||"text/xml";if(d&&m.trim(d)&&"DOMParser"in m.global){k=(new DOMParser).parseFromString(d,l);e=k.documentElement;if("parsererror"==e.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==e.namespaceURI){var t=e.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml",
"sourcetext")[0];t&&(t=t.firstChild.data);throw Error("Error parsing text "+e.firstChild.data+" \n"+t);}return k}if("ActiveXObject"in m.global){e=function(b){return"MSXML"+b+".DOMDocument"};e=["Microsoft.XMLDOM",e(6),e(4),e(3),e(2)];m.some(e,function(b){try{k=new ActiveXObject(b)}catch(d){return!1}return!0});if(d&&k&&(k.async=!1,k.loadXML(d),e=k.parseError,0!==e.errorCode))throw Error("Line: "+e.line+"\nCol: "+e.linepos+"\nReason: "+e.reason+"\nError Code: "+e.errorCode+"\nSource: "+e.srcText);if(k)return k}else if(e.implementation&&
e.implementation.createDocument){if(d&&m.trim(d)&&e.createElement){t=e.createElement("xml");t.innerHTML=d;var b=e.implementation.createDocument("foo","",null);m.forEach(t.childNodes,function(d){b.importNode(d,!0)});return b}return e.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(d,l){if(1<arguments.length)return dojox.xml.parser.replaceChildren(d,(d.ownerDocument||m.doc).createTextNode(l)),l;if(void 0!==d.textContent)return d.textContent;var e="";d&&m.forEach(d.childNodes,
function(d){switch(d.nodeType){case 1:case 5:e+=dojox.xml.parser.textContent(d);break;case 3:case 2:case 4:e+=d.nodeValue}});return e};dojox.xml.parser.replaceChildren=function(d,l){var e=[];m.isIE&&m.forEach(d.childNodes,function(d){e.push(d)});dojox.xml.parser.removeChildren(d);m.forEach(e,m.destroy);m.isArray(l)?m.forEach(l,function(e){d.appendChild(e)}):d.appendChild(l)};dojox.xml.parser.removeChildren=function(d){for(var l=d.childNodes.length;d.hasChildNodes();)d.removeChild(d.firstChild);return l};
dojox.xml.parser.innerXML=function(d){return d.innerXML?d.innerXML:d.xml?d.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(d):null};return dojox.xml.parser})},"esri/layers/WMTSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(m,d,l,e){return m(null,{declaredClass:"esri.layers.WMTSLayerInfo",identifier:null,tileMatrixSet:null,format:null,style:null,tileInfo:null,title:null,fullExtent:null,initialExtent:null,description:null,
dimension:null,constructor:function(d){d&&(this.title=d.title,this.tileMatrixSet=d.tileMatrixSet,this.format=d.format,this.style=d.style,this.tileInfo=d.tileInfo,this.fullExtent=d.fullExtent,this.initialExtent=d.initialExtent,this.identifier=d.identifier,this.description=d.description,this.dimension=d.dimension)}})})},"widgets/AddData/search/AddFromFilePane":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/Deferred dojo/dom-class dijit/Viewport dojo/sniff dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/AddFromFilePane.html dojo/i18n!../nls/strings ./LayerLoader ./util esri/request esri/layers/FeatureLayer esri/geometry/scaleUtils jimu/dijit/Message jimu/dijit/CheckBox".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c,f){return m([n,w,E],{i18n:z,templateString:v,wabWidget:null,maxRecordCount:1E3,maxRecordThreshold:1E5,SHAPETYPE_ICONS:[{type:"shapefile",url:"images/filetypes/zip.svg"},{type:"csv",url:"images/filetypes/csv.svg"},{type:"gpx",url:"images/filetypes/gpx.svg"},{type:"geojson",url:"images/filetypes/geojson.svg"}],postCreate:function(){this.inherited(arguments);this.own(b.on("resize",this.resize()))},destroy:function(){this.inherited(arguments)},startup:function(){if(!this._started){this.inherited(arguments);
var c=this,b=this.dropArea,k,l=this.wabWidget.config;if(l.addFromFile)try{k=Number(l.addFromFile.maxRecordCount),"number"===typeof k&&!isNaN(k)&&(k=Math.floor(k),1<=k&&k<=this.maxRecordThreshold&&(this.maxRecordCount=k))}catch(m){console.warn("Error setting AddFromFile.maxRecordCount:"),console.warn(m)}if(z.addFromFile.types)try{for(var n in z.addFromFile.types)this._createFileTypeImage(n)}catch(a){console.warn("Error reading support file types:"),console.warn(a)}this.own(e(this.fileNode,"change",
function(){if(!c._getBusy()){c._setBusy(!0);var a=c._getFileInfo();a.ok&&c._execute(a)}}));this.own(e(this.uploadLabel,"click",function(a){c._getBusy()&&(a.preventDefault(),a.stopPropagation())}));this.own(e(b,"dragenter",function(a){a.preventDefault();c._getBusy()||(t.add(b,"hit"),c._setStatus(""))}));this.own(e(b,"dragleave",function(a){a.preventDefault();t.remove(b,"hit")}));this.own(e(b,"dragover",function(a){a.preventDefault()}));this.own(e(b,"drop",function(a){a.preventDefault();a.stopPropagation();
c._getBusy()||(c._setBusy(!0),a=c._getFileInfo(a),a.ok&&c._execute(a))}));k=this.wabWidget.domNode;this.own(e(k,"dragenter",function(a){a.preventDefault()}));this.own(e(k,"dragleave",function(a){a.preventDefault()}));this.own(e(k,"dragover",function(a){a.preventDefault()}));this.own(e(k,"drop",function(a){a.preventDefault()}));this.own(e(this.hintButton,"click",d.hitch(this,function(a){a.preventDefault();a='\x3cdiv class\x3d"intro"\x3e\x3clabel\x3e'+z.addFromFile.intro+"\x3c/label\x3e\x3cul\x3e\x3cli\x3e"+
z.addFromFile.types.Shapefile+"\x3c/li\x3e\x3cli\x3e"+z.addFromFile.types.CSV+"\x3c/li\x3e\x3cli\x3e"+z.addFromFile.types.GPX+"\x3c/li\x3e\x3cli\x3e"+z.addFromFile.types.GeoJSON+'\x3c/li\x3e\x3cli\x3e\x3cspan class\x3d"note"\x3e'+z.addFromFile.maxFeaturesAllowedPattern.replace("{count}",this.maxRecordCount)+"\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e";new f({message:a})})))}},_addFeatures:function(c,b){var d,e=[],f=c.map,k=0,a=new C;b.layers&&(k=b.layers.length);l.forEach(b.layers,function(b){b=
new D(b,{id:a._generateLayerId(),outFields:["*"]});b.xtnAddData=!0;b.graphics&&(c.numFeatures+=b.graphics.length);0===k?b.name=c.baseFileName:"string"!==typeof b.name||0===b.name.length?b.name=c.baseFileName:0!==b.name.indexOf(c.baseFileName)&&(b.name=z.addFromFile.layerNamePattern.replace("{filename}",c.baseFileName).replace("{name}",b.name));a._setFeatureLayerInfoTemplate(b,null,null);b.fullExtent&&(d=d?d.union(b.fullExtent):b.fullExtent);e.push(b)});0<e.length&&(f.addLayers(e),d&&f.setExtent(d.expand(1.25),
!0))},_analyze:function(c,b){if("csv"!==c.fileType.toLowerCase()){var d=new k;d.resolve(null);return d}var d=c.sharingUrl+"/content/features/analyze",e={f:"json",filetype:c.fileType.toLowerCase()},d=B({url:d,content:e,form:b,handleAs:"json"});d.then(function(b){b&&b.publishParameters&&(c.publishParameters=b.publishParameters)});return d},_createFileTypeImage:function(c){var b=window.isRTL;l.some(this.SHAPETYPE_ICONS,d.hitch(this,function(d,e){if(c.toLowerCase()===d.type){var f=document.createElement("IMG");
f.src=this.wabWidget.folderUrl+d.url;f.alt=c;0===e?f.className+=" "+(b?"last":"first")+"-type-icon":1===e?f.className+=" second-"+(b?"last":"first")+"-type-icon":e===this.SHAPETYPE_ICONS.length-2?f.className+=" second-"+(b?"first":"last")+"-type-icon":e===this.SHAPETYPE_ICONS.length-1&&(f.className+=" "+(b?"first":"last")+"-type-icon");this.supportedFileTypes.appendChild(f)}}))},_execute:function(c){this._setBusy(!0);var b=c.fileName;this._setStatus(z.addFromFile.addingPattern.replace("{filename}",
b));var d=this,e=new FormData;e.append("file",c.file);var k={map:this.wabWidget.map,sharingUrl:this.wabWidget.getSharingUrl(),baseFileName:c.baseFileName,fileName:c.fileName,fileType:c.fileType,generalize:!!this.generalizeCheckBox.getValue(),publishParameters:{},numFeatures:0};d._analyze(k,e).then(function(){return d._generateFeatures(k,e)}).then(function(c){d._addFeatures(k,c.featureCollection);d._setBusy(!1);d._setStatus(z.addFromFile.featureCountPattern.replace("{filename}",b).replace("{count}",
k.numFeatures))}).otherwise(function(c){d._setBusy(!1);d._setStatus(z.addFromFile.addFailedPattern.replace("{filename}",b));console.warn("Error generating features.");console.warn(c);c&&("string"===typeof c.message&&0<c.message.length)&&new f({titleLabel:z._widgetLabel,message:c.message})})},_generateFeatures:function(b,e){var f=b.sharingUrl+"/content/features/generate";b.publishParameters=b.publishParameters||{};var k=d.mixin(b.publishParameters,{name:b.baseFileName,targetSR:b.map.spatialReference,
maxRecordCount:this.maxRecordCount,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0});if(b.generalize){var l=c.getExtentForScale(b.map,4E4).getWidth()/b.map.width;k.generalize=!0;k.maxAllowableOffset=l;for(var l=l/10,m=0;1>l;)l*=10,m++;k.reducePrecision=!0;k.numberOfDigitsAfterDecimal=m}k={f:"json",filetype:b.fileType.toLowerCase(),publishParameters:window.JSON.stringify(k)};return B({url:f,content:k,form:e,handleAs:"json"})},_getBaseFileName:function(c){r("ie")&&(c=c.split("\\"),c=c[c.length-
1]);c=c.split(".");return c=c[0].replace("c:\\fakepath\\","")},_getBusy:function(){return t.contains(this.uploadLabel,"disabled")},_getFileInfo:function(c){var b={ok:!1,file:null,fileName:null,fileType:null};if((c=c?c.dataTransfer.files:this.fileNode.files)&&1===c.length)if(b.file=c=c[0],b.fileName=c.name,A.endsWith(c.name,".zip"))b.ok=!0,b.fileType="Shapefile";else if(A.endsWith(c.name,".csv"))b.ok=!0,b.fileType="CSV";else if(A.endsWith(c.name,".gpx"))b.ok=!0,b.fileType="GPX";else if(A.endsWith(c.name,
".geojson")||A.endsWith(c.name,".geo.json"))b.ok=!0,b.fileType="GeoJSON";if(b.ok)b.baseFileName=this._getBaseFileName(b.fileName);else{c=z.addFromFile.invalidType;"string"===typeof b.fileName&&0<b.fileName.length&&(c=z.addFromFile.invalidTypePattern.replace("{filename}",b.fileName));this._setBusy(!1);this._setStatus(c);var d=document.createElement("div");d.appendChild(document.createTextNode(c));new f({titleLabel:z._widgetLabel,message:d})}return b},resize:function(){},_setBusy:function(c){c?(t.add(this.uploadLabel,
"disabled"),t.add(this.dropArea,["hit","disabled"])):(t.remove(this.uploadLabel,"disabled"),t.remove(this.dropArea,["hit","disabled"]))},_setStatus:function(c){this.wabWidget&&this.wabWidget._setStatus(c)}})})},"widgets/AddData/search/LayerListPane":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/LayerListPane.html dojo/i18n!../nls/strings ./util".split(" "),
function(m,d,l,e,k,t,b,r,n,w,E){return m([t,b,r],{i18n:w,templateString:n,wabWidget:null,baseClass:"add-data-widget-layers",postCreate:function(){this.inherited(arguments)},startup:function(){this._started||(this._buildList(),this._initListeners(),this.inherited(arguments))},_addLayer:function(b,d){var e=this,l=this._getLayerTitle(d),m=k.create("div",{"class":"add-data-layerlist--listitem"},b);k.create("A",{"class":"remove-button",href:"#",innerHTML:"\x3cspan class\x3d'esri-icon-trash'\x3e\x3c/span\x3e",
title:w.layerList.removeLayer,onclick:function(c){c.preventDefault();try{e.wabWidget&&e.wabWidget.map&&(e.wabWidget.map.removeLayer(d),k.destroy(m))}catch(b){console.warn("Error removing layer."),console.warn(b)}}},m);var n=k.create("label",{"class":"layer-name"},m);E.setNodeText(n,l)},_buildList:function(){var b=this,e=!1,l=[],m=this.wabWidget.map,n=k.create("div",{"class":"add-data-layerlist--list"});d.forEach(m.layerIds,function(b){l.push(b)});d.forEach(m.graphicsLayerIds,function(b){l.push(b)});
l.reverse();d.forEach(l,function(d){if((d=m.getLayer(d))&&d.xtnAddData)e=!0,b._addLayer(n,d)});return!e?k.create("div",{"class":"no-data-message",innerHTML:w.layerList.noLayersAdded}):n},_getLayerTitle:function(b){var d="...";if("string"===typeof b.label&&0<b.label.length)d=b.label;else if("string"===typeof b.title&&0<b.title.length)d=b.title;else if("string"===typeof b.name&&0<b.name.length)d=b.name;else if(b.url){var e=b.url.indexOf("/FeatureServer");-1===e&&(e=b.url.indexOf("/MapServer"));-1===
e&&(e=b.url.indexOf("/ImageServer"));-1===e&&(e=b.url.indexOf("/service"));-1<e&&(b=b.url.substring(0,e),d=b=b.substring(b.lastIndexOf("/")+1,b.length))}return d},_initListeners:function(){var b=this;this.own(l(this._backButton,"click",function(d){d.preventDefault();b.hide()}))},show:function(){var b=this._buildList();this._title.innerHTML=w.layerList.caption;this._layerlist.innerHTML="";b&&b.tagName&&this._layerlist.appendChild(b);this.wabWidget&&this.wabWidget.domNode&&e.add(this.wabWidget.domNode,
"layerlist-show");e.add(this.domNode,"show")},hide:function(){this.wabWidget&&this.wabWidget.domNode&&e.remove(this.wabWidget.domNode,"layerlist-show");e.remove(this.domNode,"show")}})})},"widgets/AddData/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/AddData/search/templates/SearchPane.html":'\x3cdiv class\x3d"search-pane"\x3e\r\n  \x3cdiv class\x3d"search-pane-header" data-dojo-attach-point\x3d"headerNode"\x3e\r\n    \x3cdiv class\x3d"search-bar main-search-bar"\x3e\r\n      \x3cdiv data-dojo-type\x3d"widgets/AddData/search/ScopeOptions"\r\n        data-dojo-attach-point\x3d"scopeOptions"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--\x3cspan class\x3d"search-box-placeholder" data-dojo-attach-point\x3d"searchBoxPlaceholder"\x3e\x3c/span\x3e--\x3e\r\n      \x3cdiv data-dojo-type\x3d"widgets/AddData/search/SearchBox"\r\n        data-dojo-attach-point\x3d"searchBox"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"search-bar-separator"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"search-bar search-bar-secondary" data-dojo-attach-point\x3d"optionsNode"\x3e\r\n      \x3cdiv data-dojo-type\x3d"widgets/AddData/search/BBoxOption"\r\n        data-dojo-attach-point\x3d"bboxOption"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--\r\n      \x3cdiv class\x3d"filter-wrapper2"\x3e\r\n        \x3cdiv data-dojo-type\x3d"widgets/AddData/search/TypeOptions"\r\n          data-dojo-attach-point\x3d"typeOptions"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"widgets/AddData/search/SortOptions"\r\n          data-dojo-attach-point\x3d"sortOptions"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      --\x3e\r\n      \x3cspan class\x3d"filter-placeholder" data-dojo-attach-point\x3d"filterPlaceholder"\x3e\x3c/span\x3e\r\n      \x3cdiv class\x3d"filter-wrapper" data-dojo-attach-point\x3d"filterWrapper"\x3e\r\n        \x3cdiv data-dojo-type\x3d"widgets/AddData/search/TypeOptions"\r\n          data-dojo-attach-point\x3d"typeOptions"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"widgets/AddData/search/SortOptions"\r\n          data-dojo-attach-point\x3d"sortOptions"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"search-pane-content" data-dojo-attach-point\x3d"contentNode"\x3e\r\n    \x3cdiv data-dojo-type\x3d"widgets/AddData/search/ResultsPane"\r\n      data-dojo-attach-point\x3d"resultsPane"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"search-pane-footer jimu-float-leading" data-dojo-attach-point\x3d"footerNode"\x3e\r\n    \x3cdiv data-dojo-type\x3d"widgets/AddData/search/Paging"\r\n      data-dojo-attach-point\x3d"paging"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"widgets/AddData/search/ResultCount"\r\n      data-dojo-attach-point\x3d"resultCount"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/SearchBox.html":'\x3cdiv class\x3d"search-box2"\x3e\r\n\t\x3cinput type\x3d"text" class\x3d"search-textbox"\r\n\t\tplaceholder\x3d"${i18n.search.searchBox.placeholder}"\r\n\t\tdata-dojo-attach-point\x3d"searchTextBox"\r\n\t\x3e\x3cbutton class\x3d"btn btn-confirm" type\x3d"button"\r\n\t\tdata-dojo-attach-point\x3d"searchButton"\r\n\t\tdata-dojo-attach-event\x3d"onClick: searchButtonClicked"\r\n\t\ttitle\x3d"${i18n.search.searchBox.search}"\r\n\t\t\x3e\x3cspan class\x3d"esri-icon-search"\x3e\x3c/span\x3e\r\n\t\x3c/button\x3e\r\n\x3c!--\r\n\x3cdiv class\x3d"search-box"\x3e\r\n\t\x3cdiv class\x3d"input-group"\x3e\r\n\t\t\x3cinput type\x3d"text" class\x3d"search-textbox"\r\n\t\t\tplaceholder\x3d"${i18n.search.searchBox.placeholder}"\r\n\t\t\tdata-dojo-attach-point\x3d"searchTextBox"\x3e\r\n    \x3cspan class\x3d"search-btn"\x3e\r\n\t\t\t\x3cbutton class\x3d"btn btn-clear hidden" type\x3d"button"\r\n\t\t\t\tdata-dojo-attach-point\x3d"clearButton"\r\n\t\t\t\tdata-dojo-attach-event\x3d"onClick: clearButtonClicked"\x3e\r\n\t\t\t\t\x3cspan class\x3d"esri-icon-close"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/button\x3e\r\n\t\t\t\x3cbutton class\x3d"btn btn-confirm" type\x3d"button"\r\n\t\t\t\tdata-dojo-attach-point\x3d"searchButton"\r\n\t\t\t\tdata-dojo-attach-event\x3d"onClick: searchButtonClicked"\r\n\t\t\t\ttitle\x3d"${i18n.search.searchBox.search}"\r\n\t\t\t\t\x3e\x3cspan class\x3d"esri-icon-search"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/button\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/BBoxOption.html":'\x3cdiv class\x3d"search-bbox-option"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"bboxSection" class\x3d"switch-toggle-group"\x3e\r\n    \x3clabel class\x3d"checkbox-inline"\x3e\r\n      \x3cinput id\x3d"${id}_bboxId"\r\n\t      data-dojo-type\x3d"dijit/form/CheckBox"\r\n\t      data-dojo-attach-point\x3d"bboxToggle"\r\n\t      data-dojo-attach-event\x3d"onClick: bboxClicked"\r\n\t      data-dojo-props\x3d"class: \'switch-toggle\'"\r\n        title\x3d"${i18n.search.bboxOption.bbox}"/\x3e\r\n      \x3cspan class\x3d"label-text"\x3e${i18n.search.bboxOption.bbox}\x3c/span\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/ScopeOptions.html":'\x3cdiv class\x3d"search-scope-options"\x3e\r\n  \x3ca href\x3d"#" class\x3d"scope-placeholder"\r\n    data-dojo-attach-point\x3d"scopePlaceholder"\r\n    data-dojo-attach-event\x3d"onClick: scopePlaceholderClicked"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"scopePlaceholderText"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"dropdown-arrow"\x3e\x3c/span\x3e\r\n  \x3c/a\x3e\r\n  \x3cdiv class\x3d"btn-group" data-dojo-attach-point\x3d"btnGroup"\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default" name\x3d"${id}_scope"\r\n      data-dojo-attach-point\x3d"MyContentToggle"\r\n      data-dojo-attach-event\x3d"onClick: optionClicked"\r\n      data-option-name\x3d"MyContent"\x3e\r\n      ${i18n.search.scopeOptions.myContent}\r\n    \x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default" name\x3d"${id}_scope"\r\n      data-dojo-attach-point\x3d"MyOrganizationToggle"\r\n      data-dojo-attach-event\x3d"onClick: optionClicked"\r\n      data-option-name\x3d"MyOrganization"\x3e\r\n      ${i18n.search.scopeOptions.myOrganization}\r\n    \x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default" name\x3d"${id}_scope"\r\n      data-dojo-attach-point\x3d"CuratedToggle"\r\n      data-dojo-attach-event\x3d"onClick: optionClicked"\r\n      data-option-name\x3d"Curated"\x3e\r\n      ${i18n.search.scopeOptions.curated}\r\n    \x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default" name\x3d"${id}_scope"\r\n      data-dojo-attach-point\x3d"ArcGISOnlineToggle"\r\n      data-dojo-attach-event\x3d"onClick: optionClicked"\r\n      data-option-name\x3d"ArcGISOnline"\x3e\r\n      ${i18n.search.scopeOptions.ArcGISOnline}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/TypeOptions.html":'\x3cdiv class\x3d"search-data-type-options"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/DropDownButton"\x3e\r\n    \x3cspan\x3e${i18n.search.typeOptions.prompt}\x3c/span\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog"\r\n         data-dojo-attach-point\x3d"tooltipDialog"\r\n         data-dojo-props\x3d"\'class\':\'add-data-widget-popup\'"\x3e\r\n      \x3clabel for\x3d"${id}_mapServiceId" class\x3d"search-type-option"\x3e\r\n        \x3cinput id\x3d"${id}_mapServiceId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"mapServiceToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;Map Service\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.mapService}\r\n      \x3c/label\x3e\r\n      \x3clabel for\x3d"${id}_featureServiceId" class\x3d"search-type-option"\x3e\r\n        \x3cinput id\x3d"${id}_featureServiceId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"featureServiceToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;Feature Service\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.featureService}\r\n      \x3c/label\x3e\r\n      \x3clabel for\x3d"${id}_imageServiceId" class\x3d"search-type-option"\x3e\r\n        \x3cinput id\x3d"${id}_imageServiceId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"imageServiceToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;Image Service\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.imageService}\r\n      \x3c/label\x3e\r\n      \x3clabel for\x3d"${id}_vectorTileServiceId" class\x3d"search-type-option"\r\n        data-dojo-attach-point\x3d"vectorTileNode"\x3e\r\n        \x3cinput id\x3d"${id}_vectorTileServiceId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"vectorTileServiceToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;Vector Tile Service\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.vectorTileService}\r\n      \x3c/label\x3e\r\n      \x3clabel for\x3d"${id}_kmlId" class\x3d"search-type-option"\x3e\r\n        \x3cinput id\x3d"${id}_kmlId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"kmlToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;KML\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.kml}\r\n      \x3c/label\x3e\r\n       \x3clabel for\x3d"${id}_wmsId" class\x3d"search-type-option"\x3e\r\n        \x3cinput id\x3d"${id}_wmsId"\r\n          data-dojo-type\x3d"dijit/form/CheckBox"\r\n          data-dojo-attach-point\x3d"wmsToggle"\r\n          data-dojo-attach-event\x3d"onClick: optionClicked"\r\n          data-option-q\x3d\'type:\x26quot;WMS\x26quot;\'/\x3e\r\n        ${i18n.search.typeOptions.wms}\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/SortOptions.html":'\x3cdiv class\x3d"search-sort-options"\x3e\r\n  \x3clabel for\x3d"${id}_select" class\x3d"sort-prompt"\x3e${i18n.search.sortOptions.prompt}\x3c/label\x3e \r\n  \x3cselect id\x3d"${id}_select"\r\n    data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"sortSelect"\x3e\r\n    \x3coption value\x3d"" selected\x3d"selected"\x3e${i18n.search.sortOptions.relevance}\x3c/option\x3e\r\n    \x3coption value\x3d"title"\x3e${i18n.search.sortOptions.title}\x3c/option\x3e\r\n    \x3coption value\x3d"owner"\x3e${i18n.search.sortOptions.owner}\x3c/option\x3e\r\n    \x3coption value\x3d"avgrating"\x3e${i18n.search.sortOptions.rating}\x3c/option\x3e\r\n    \x3coption value\x3d"numviews"\x3e${i18n.search.sortOptions.views}\x3c/option\x3e\r\n    \x3coption value\x3d"modified"\x3e${i18n.search.sortOptions.date}\x3c/option\x3e\r\n  \x3c/select\x3e\r\n  \x3ca href\x3d"#" class\x3d"sort-order-icon"\r\n    title\x3d"${i18n.search.sortOptions.switchOrder}"\r\n    data-dojo-attach-point\x3d"sortOrderBtn"\r\n    data-dojo-attach-event\x3d"onclick: sortOrderClicked"\x3e\r\n  \x3c/a\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/ResultsPane.html":'\x3cdiv class\x3d"search-results-pane" data-dojo-attach-point\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"search-results-pane-no-match empty-data-label" data-dojo-attach-point\x3d"noMatchNode" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"itemsNode" class\x3d"search-results"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/AddData/search/templates/ItemCard.html":'\x3cdiv class\x3d"item-card"\x3e\r\n  \x3cdiv class\x3d"item-card-inner"\x3e\r\n    \x3cdiv class\x3d"thumbnail" data-dojo-attach-point\x3d"thumbnailNode"\x3e\x3c/div\x3e\r\n    \x3ch3 class\x3d"title" data-dojo-attach-point\x3d"titleNode"\x3e\x3c/h3\x3e\r\n    \x3cdiv class\x3d"info" data-dojo-attach-point\x3d"typeByOwnerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"info" data-dojo-attach-point\x3d"dateNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"action-bar"\x3e\r\n      \x3cspan class\x3d"message" data-dojo-attach-point\x3d"messageNode"\x3e\x3c/span\x3e\r\n      \x3ca href\x3d"javascript:void(0)"\r\n        data-dojo-attach-point\x3d"addButton"\r\n        data-dojo-attach-event\x3d"onClick: addClicked"\r\n        \x3e${i18n.search.item.actions.add}\r\n      \x3c/a\x3e\r\n      \x3ca href\x3d"javascript:void(0)"\r\n        data-dojo-attach-point\x3d"detailsButton"\r\n        data-dojo-attach-event\x3d"onClick: detailsClicked"\r\n        \x3e${i18n.search.item.actions.details}\r\n      \x3c/a\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/Paging.html":'\x3cdiv class\x3d"search-paging"\x3e\r\n\t\x3cul class\x3d"pagination pagination-sm"\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3ca href\x3d"#" aria-label\x3d"First"\r\n\t\t\t\tdata-dojo-attach-point\x3d"firstButton"\r\n\t\t\t\tdata-dojo-attach-event\x3d"onClick: firstButtonClicked"\r\n\t\t\t\ttitle\x3d"${i18n.search.paging.firstTip}"\x3e\r\n\t\t\t\t\x3cspan aria-hidden\x3d"true" class\x3d"esri-icon-expand"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3ca href\x3d"#" aria-label\x3d"Previous"\r\n\t\t\t\tdata-dojo-attach-point\x3d"previousButton"\r\n\t\t\t\tdata-dojo-attach-event\x3d"onClick: previousButtonClicked"\r\n\t\t\t\ttitle\x3d"${i18n.search.paging.previousTip}"\x3e\r\n\t\t\t\t\x3cspan aria-hidden\x3d"true" class\x3d"esri-icon-left"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli class\x3d"current-page"\x3e\r\n\t\t  \x3cspan data-dojo-attach-point\x3d"pageNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/li\x3e\r\n\t\t\x3cli\x3e\r\n\t\t\t\x3ca href\x3d"#" aria-label\x3d"Next"\r\n\t\t\t\tdata-dojo-attach-point\x3d"nextButton"\r\n\t\t\t\tdata-dojo-attach-event\x3d"onClick: nextButtonClicked"\r\n\t\t\t\ttitle\x3d"${i18n.search.paging.nextTip}"\x3e\r\n\t\t\t\t\x3cspan aria-hidden\x3d"true" class\x3d"esri-icon-right"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e',
"url:widgets/AddData/search/templates/ResultCount.html":'\x3cdiv class\x3d"search-result-count"\x3e\r\n  \x3cspan class\x3d"search-count" data-dojo-attach-point\x3d"messageNode"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',"url:widgets/AddData/search/templates/AddFromUrlPane.html":'\x3cdiv class\x3d"secondary-pane add-url-pane"\x3e\r\n  \x3cdiv class\x3d"add-url-pane-container"\x3e\r\n    \x3cdiv class\x3d"add-url-pane-container--inner"\x3e\r\n      \x3clabel for\x3d"${id}_select"\x3e${i18n.addFromUrl.type}\x3c/label\x3e\r\n      \x3cselect id\x3d"${id}_select"\r\n        data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"typeSelect"\x3e\r\n        \x3coption value\x3d"ArcGIS" selected\x3d"selected"\x3e${i18n.addFromUrl.types.ArcGIS}\x3c/option\x3e\r\n        \x3coption value\x3d"WMS"\x3e${i18n.addFromUrl.types.WMS}\x3c/option\x3e\r\n        \x3c!--not yet supported \x3coption value\x3d"WMTS"\x3e${i18n.addFromUrl.types.WMTS}\x3c/option\x3e --\x3e\r\n        \x3c!--not yet supported \x3coption value\x3d"WFS"\x3e${i18n.addFromUrl.types.WFS}\x3c/option\x3e --\x3e\r\n        \x3coption value\x3d"KML"\x3e${i18n.addFromUrl.types.KML}\x3c/option\x3e\r\n        \x3coption value\x3d"GeoRSS"\x3e${i18n.addFromUrl.types.GeoRSS}\x3c/option\x3e\r\n        \x3coption value\x3d"CSV"\x3e${i18n.addFromUrl.types.CSV}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n      \x3clabel for\x3d"${id}_url"\x3e${i18n.addFromUrl.url}\x3c/label\x3e\r\n      \x3cinput id\x3d"${id}_url" type\x3d"text" class\x3d"url-textbox jimu-input"\r\n          data-dojo-attach-point\x3d"urlTextBox"\x3e\r\n      \x3cdiv class\x3d"action-bar"\x3e\r\n        \x3ca class\x3d"jimu-float-leading" href\x3d"javascript:void(0)"\r\n          data-dojo-attach-point\x3d"examplesExpander"\r\n          data-dojo-attach-event\x3d"onClick: examplesExpanderClicked"\r\n          \x3e${i18n.addFromUrl.samplesHint}\x3c/a\x3e\r\n        \x3ca class\x3d"jimu-btn"\r\n          href\x3d"javascript:void(0)"\r\n          data-dojo-attach-point\x3d"addButton"\r\n          data-dojo-attach-event\x3d"onClick: addClicked"\r\n          \x3e${i18n.search.item.actions.add}\r\n        \x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"examples" data-dojo-attach-point\x3d"examplesNode"\x3e\r\n        \x3cdiv data-examples-type\x3d"ArcGIS"\x3e\r\n          \x3cdiv\x3ehttp://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Cities/FeatureServer/0\x3c/div\x3e\r\n          \x3cdiv\x3ehttp://services.arcgisonline.com/ArcGIS/rest/services/Demographics/USA_Tapestry/MapServer\x3c/div\x3e\r\n          \x3cdiv\x3ehttp://imagery.arcgisonline.com/ArcGIS/rest/services/LandsatGLS/VegetationAnalysis/ImageServer\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-examples-type\x3d"WMS"\x3e\r\n          \x3cdiv\x3ehttp://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi?service\x3dWMS\x26amp;request\x3dGetCapabilities\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-examples-type\x3d"KML"\x3e\r\n          \x3cdiv\x3ehttp://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month_age_animated.kml\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-examples-type\x3d"GeoRSS"\x3e\r\n          \x3cdiv\x3ehttp://www.gdacs.org/xml/rss.xml\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-examples-type\x3d"CSV"\x3e\r\n          \x3cdiv\x3ehttp://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.csv\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/AddFromFilePane.html":'\x3cdiv class\x3d"secondary-pane add-file-pane"\x3e\r\n\r\n  \x3cdiv class\x3d"generalize-options"\x3e\r\n    \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n      data-dojo-attach-point\x3d"generalizeCheckBox"\r\n      data-dojo-props\x3d"checked:true,label:\'${i18n.addFromFile.generalizeOn}\'"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"browse-or-drop"\x3e\r\n    \x3cdiv class\x3d"drop-container" data-dojo-attach-point\x3d"dropContainer"\x3e\r\n      \x3cdiv class\x3d"drop-area" data-dojo-attach-point\x3d"dropArea"\x3e\r\n        \x3cdiv class\x3d"supported-file-types" data-dojo-attach-point\x3d"supportedFileTypes"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"or"\x3e${i18n.addFromFile.dropOrBrowse}\x3c/div\x3e\r\n        \x3cform class\x3d"file-form" enctype\x3d"multipart/form-data" method\x3d"post"\r\n          data-dojo-attach-point\x3d"fileForm"\x3e\r\n          \x3clabel for\x3d"${id}_file" class\x3d"jimu-btn"\r\n            data-dojo-attach-point\x3d"uploadLabel"\x3e${i18n.addFromFile.browse}\x3c/label\x3e\r\n          \x3cinput id\x3d"${id}_file" name\x3d"file" type\x3d"file" style\x3d"display:none"\r\n            data-dojo-attach-point\x3d"fileNode" /\x3e\r\n        \x3c/form\x3e\r\n        \x3ca href\x3d"#" class\x3d"drop-area-hint" data-dojo-attach-point\x3d"hintButton"\x3e\r\n          \x3ci class\x3d"esri-icon-question"\x3e\x3c/i\x3e\r\n        \x3c/a\x3e\r\n        \x3cspan class\x3d"upload-arrow"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/search/templates/LayerListPane.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"add-data-layerlist--mask"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"add-data-layerlist--container" data-dojo-attach-point\x3d"_container"\x3e\r\n    \x3ch2 data-dojo-attach-point\x3d"_title"\x3e\x3c/h2\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_layerlist"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"add-data-layerlist--footer jimu-widget-add-data-footer" data-dojo-attach-point\x3d"_footer"\x3e\r\n    \x3ca href\x3d"#" class\x3d"back-button" data-dojo-attach-point\x3d"_backButton"\x3e\r\n      ${i18n.layerList.back}\x3ci class\x3d"esri-icon-collapse"\x3e\x3c/i\x3e\r\n    \x3c/a\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/AddData/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tabsNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"searchNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"urlNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"fileNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/AddData/css/style.css":'.jimu-widget-add-data .jimu-tab3 {height: 100%;}.jimu-widget-add-data .search-pane,.jimu-widget-add-data .secondary-pane {height: 100%; width: 100%; background-color: #f8f8f8; position: relative;}.jimu-widget-add-data .search-pane \x3e *,.jimu-widget-add-data .secondary-pane \x3e * {width: 100%;}.jimu-widget-add-data .search-pane-content {position: absolute; top: 140px; bottom: 0; overflow: auto; background-color: #efefef;}.jimu-widget-add-data .search-pane .search-bar {padding: 10px 15px; line-height: 20px;}.jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn {min-width: 40px; padding-top: 10px; padding-bottom: 13px; background-color: transparent; border: 0; border-bottom: 2px solid transparent; margin-left: 5px; margin-right: 5px; color: #898989; font-size: 12px; font-weight: bold; font-family: inherit;}.jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active,.jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active:active,.jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active:hover {background-color: transparent !important; color: #000 !important; border-bottom-color: #24b5cc; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;}.jimu-widget-add-data .search-pane .search-bar.main-search-bar {background-color: #fff; padding-bottom: 0; position: relative;}.jimu-widget-add-data .search-pane .search-bar.search-scope-bar .search-sort-options {margin-top: 5px;}.jimu-widget-add-data .search-pane .search-bar-secondary {background-color: #f8f8f8; padding-top: 5px; padding-bottom: 5px; font-size: 11px;}.jimu-widget-add-data .search-pane .search-pane-header {border-bottom: 1px solid #cccccc;}.jimu-widget-add-data .search-pane .search-pane-header:before,.jimu-widget-add-data .search-pane .search-pane-header:after {content: " "; display: table;}.jimu-widget-add-data .search-pane .search-pane-header:after {clear: both;}.jimu-widget-add-data .search-pane .search-bar:before,.jimu-widget-add-data .search-pane .search-bar:after {content: " "; display: table;}.jimu-widget-add-data .search-pane .search-bar:after {clear: both;}.jimu-widget-add-data .search-pane .search-data-type-options {margin-right: 15px;}.jimu-widget-add-data .search-pane .search-curated-option {display: inline-block; margin-left: 30px;}.jimu-widget-add-data .search-pane .search-bar-separator {border-bottom: 1px solid #e7e7e7;}.jimu-widget-add-data .search-pane .search-pane-default .search-bar {text-align: right; margin-bottom: 24px;}.jimu-widget-add-data .search-pane .search-results-pane {padding: 10px 5px;}.jimu-widget-add-data .search-pane .search-results-pane:after {content: ""; display: table; clear: both;}.jimu-widget-add-data .search-pane .item-card {float: left; width: 100%; padding-left: 5px; padding-right: 5px; -webkit-transition: width 0.1s ease; -moz-transition: width 0.1s ease; -o-transition: width 0.1s ease; transition: width 0.1s ease;}.jimu-widget-add-data .search-pane .item-card .item-card-inner {height: 70px; background: #ffffff; border: 1px solid #e0e0e0; border-bottom-color: #cccccc; padding: 5px; margin-bottom: 10px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}.jimu-widget-add-data .search-pane .item-card .thumbnail {float: left; margin-right: 10px;}.jimu-widget-add-data .search-pane .item-card .thumbnail img {height: 60px; width: 90px;}.jimu-widget-add-data .search-pane .item-card h3.title {margin: 0 5px; padding: 0; font-size: 12px; font-weight: bold; color: #4c4c4c; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-add-data .search-pane .item-card div.info {color: #898989; font-size: 10px; overflow: hidden; white-space: nowrap; padding-top: 3px;}.jimu-widget-add-data .search-pane .item-card .action-bar,.jimu-widget-add-data .secondary-pane .action-bar {text-align: right;}.jimu-rtl .jimu-widget-add-data .search-pane .item-card .action-bar,.jimu-rtl .jimu-widget-add-data .secondary-pane .action-bar {text-align: left;}.jimu-widget-add-data .secondary-pane {padding: 20px 15px; overflow: auto;}.jimu-widget-add-data .secondary-pane label {color: #898989; display: block; margin-bottom: 10px;}.jimu-widget-add-data .secondary-pane .dijit {margin-bottom: 10px;}.jimu-widget-add-data .secondary-pane div.action-bar {margin-top: 20px;}.jimu-widget-add-data .secondary-pane .jimu-btn {color: #fff; line-height: 20px; text-decoration: none;}.jimu-widget-add-data .secondary-pane .jimu-btn:active {}.jimu-widget-add-data .search-pane .item-card .action-bar a,.jimu-widget-add-data .add-url-pane .action-bar a,.jimu-widget-add-data .add-file-pane .file-form label {display: inline-block; font-size: 11px; text-transform: uppercase; padding: 5px; margin-right: 5px;}.jimu-widget-add-data .search-pane .item-card .action-bar a.disabled,.jimu-widget-add-data .add-url-pane .action-bar a.disabled,.jimu-widget-add-data .add-file-pane .file-form label.disabled,.jimu-widget-add-data .add-file-pane .drop-area.disabled {opacity: 0.3;}.jimu-widget-add-data .search-pane .item-card .action-bar .message {font-size: 10px; font-style: italic; margin-left: 4px; margin-right: 4px;}.jimu-widget-add-data .add-url-pane .action-bar .jimu-btn,.jimu-widget-add-data .add-file-pane .file-form label {margin-right: 0; min-width: 180px; white-space: normal;}.jimu-widget-add-data .add-url-pane {padding: 0;}.jimu-widget-add-data .add-url-pane-container {background-color: #fff; border-bottom: 1px solid #ccc; padding: 15px 15px 35px;}.jimu-widget-add-data .add-url-pane-container--inner {max-width: 960px; margin: 0 auto;}.jimu-widget-add-data .add-file-pane .intro ul {font-size: 10px; margin: 0; padding: 2px 0 2px 20px;}.jimu-widget-add-data .add-file-pane .intro ul .note {font-style: italic;}.jimu-rtl .jimu-widget-add-data .add-file-pane .intro ul {padding: 2px 20px 2px 0;}.jimu-widget-add-data .add-file-pane .generalize-options .jimu-checkbox .checkbox {margin-top: 0; vertical-align: middle;}.jimu-widget-add-data .add-file-pane .generalize-options .jimu-checkbox .label {font-size: 12px; vertical-align: middle; cursor: pointer;}.jimu-widget-add-data .add-file-pane .browse-or-drop {}.jimu-widget-add-data .add-file-pane .or {display: block; margin: 20px auto; font-size: 11px; color: #898989; width: 90%; max-width: 400px; line-height: 20px; position: relative;}.jimu-widget-add-data .add-file-pane .or:before,.jimu-widget-add-data .add-file-pane .or:after {content: ""; display: block; height: 1px; width: 35%; background: #eee; position: absolute; top: 9px; left: 0;}.jimu-widget-add-data .add-file-pane .or:after {right: 0; left: auto;}.jimu-widget-add-data .add-file-pane .or b {display: inline-block; padding-right: 5px;}.jimu-widget-add-data .add-file-pane .drop-area {width: 100%; background: #fff; margin: 10px auto 0; padding: 25px 50px 35px; border: 1px dashed #ccc; color: #898989; font-size: 12px; text-align: center; line-height: 1.75; text-transform: uppercase; position: relative; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; -webkit-transition: opacity ease-in-out 0.15s; -moz-transition: opacity ease-in-out 0.15s; -o-transition: opacity ease-in-out 0.15s; transition: opacity ease-in-out 0.15s;}.jimu-widget-add-data .add-file-pane .drop-area i {color: #485566; font-style: normal;}.jimu-widget-add-data .add-file-pane .drop-area a.drop-area-hint {position: absolute; top: 0; right: 0; margin: 5px; padding: 10px; font-size: 14px; line-height: 1;}.jimu-widget-add-data .add-file-pane .drop-area.hit {background: #f9f9f9; border-color: #24b5cc;}.jimu-widget-add-data .add-file-pane .drop-area.hit \x3e * {pointer-events: none; display: none;}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types {display: block;}.jimu-widget-add-data .add-file-pane .drop-area.hit .upload-arrow {display: block; width: 48px; height: 48px; background: url(images/arrow_up.png) no-repeat; margin: 0 auto; -moz-animation: updload-arrow-animation 1s infinite; -webkit-animation: updload-arrow-animation 1s infinite; animation: updload-arrow-animation 1s infinite;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types {margin: 15px 0 35px; opacity: .5; pointer-events: none; -webkit-transition: opacity ease-in-out 0.15s; -moz-transition: opacity ease-in-out 0.15s; -o-transition: opacity ease-in-out 0.15s; transition: opacity ease-in-out 0.15s;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types img {width: 45px; margin-left: -5px; position: relative; -webkit-transition: all ease-in-out 0.2s; -moz-transition: all ease-in-out 0.2s; -o-transition: all ease-in-out 0.2s; transition: all ease-in-out 0.2s;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types img.first-type-icon {-moz-transform: rotate(-8deg); -moz-transform-origin: right bottom; -webkit-transform: rotate(-8deg); -webkit-transform-origin: right bottom; -o-transform: rotate(-8deg); -o-transform-origin: right bottom; transform: rotate(-8deg); transform-origin: right bottom; bottom: -1px;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types img.second-first-type-icon {-moz-transform: rotate(-3deg); -moz-transform-origin: right bottom; -webkit-transform: rotate(-3deg); -webkit-transform-origin: right bottom; -o-transform: rotate(-3deg); -o-transform-origin: right bottom; transform: rotate(-3deg); transform-origin: right bottom;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types img.second-last-type-icon {-moz-transform: rotate(3deg); -moz-transform-origin: left bottom; -webkit-transform: rotate(3deg); -webkit-transform-origin: left bottom; -o-transform: rotate(3deg); -o-transform-origin: left bottom; transform: rotate(3deg); transform-origin: left bottom;}.jimu-widget-add-data .add-file-pane .drop-area .supported-file-types img.last-type-icon {-moz-transform: rotate(8deg); -moz-transform-origin: left bottom; -webkit-transform: rotate(8deg); -webkit-transform-origin: left bottom; -o-transform: rotate(8deg); -o-transform-origin: left bottom; transform: rotate(8deg); transform-origin: left bottom; bottom: -1px;}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types {opacity: 1;}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types img {margin-left: 0px;}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types img.first-type-icon {-moz-transform: rotate(-12deg); -webkit-transform: rotate(-12deg); -o-transform: rotate(-12deg); transform: rotate(-12deg); bottom: -3px;}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types img.second-first-type-icon {-moz-transform: rotate(-5deg); -webkit-transform: rotate(-5deg); -o-transform: rotate(-5deg); transform: rotate(-5deg);}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types img.second-last-type-icon {-moz-transform: rotate(5deg); -webkit-transform: rotate(5deg); -o-transform: rotate(5deg); transform: rotate(5deg);}.jimu-widget-add-data .add-file-pane .drop-area.hit .supported-file-types img.last-type-icon {-moz-transform: rotate(12deg); -webkit-transform: rotate(12deg); -o-transform: rotate(12deg); transform: rotate(12deg); bottom: -3px;}.jimu-widget-add-data .add-file-pane .file-form {display: inline-block;}.jimu-widget-add-data .search-box2 {display: inline-block;}.jimu-widget-add-data .search-box2 {float: right;}.jimu-widget-add-data .search-box2 .search-textbox {vertical-align: middle; height: 30px; width: 200px; padding: 5px 10px; font-size: 12px; line-height: 1.5; background-color: #ffffff; background-image: none; border: 1px solid #cccccc; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -moz-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;}.jimu-widget-add-data .search-box2 .btn {display: inline-block; height: 30px; margin-left: -1px; margin-bottom: 0; font-weight: normal; text-align: center; vertical-align: middle; touch-action: manipulation; cursor: pointer; color: #196fa6; background-color: #ffffff; background-image: none; border: 1px solid #cccccc; padding: 5px 10px; white-space: nowrap; font-size: 12px; line-height: 1.5; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}.jimu-widget-add-data.width-small .search-box2 .search-textbox {width: 150px;}.jimu-widget-add-data.width-small .add-file-pane .or:before,.jimu-widget-add-data.width-small .add-file-pane .or:after {width: 25%;}.jimu-widget-add-data.width-medium .search-box2 .search-textbox {width: 140px;}.jimu-widget-add-data.width-medium .filter-wrapper .sort-prompt,.jimu-widget-add-data.width-small .filter-wrapper .sort-prompt {display: none;}.jimu-widget-add-data.width-medium .search-pane .search-results-pane {padding: 5px 0;}.jimu-widget-add-data.width-medium .search-pane .item-card .item-card-inner {margin-bottom: 5px;}.jimu-widget-add-data.height-small .add-file-pane {padding-top: 15px; padding-bottom: 15px;}.jimu-widget-add-data.height-small .add-file-pane .drop-area {padding-top: 15px; padding-bottom: 25px;}.jimu-widget-add-data.height-small .add-file-pane .drop-area .supported-file-types {margin-bottom: 20px;}.jimu-widget-add-data .search-bbox-option .checkbox-inline,.jimu-widget-add-data .search-bbox-option .checkbox-inline input,.jimu-widget-add-data .search-pane .filter-placeholder {cursor: pointer;}.jimu-widget-add-data.width-small .search-bbox-option {max-width: 120px; font-size: 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-add-data.width-small .search-bbox-option .switch-toggle-group {overflow: hidden; text-overflow: ellipsis;}.jimu-widget-add-data .search-pane .search-bbox-option .checkbox-inline {padding-left: 38px; margin-right: 25px;}.jimu-widget-add-data .search-pane .search-box .input-group {position: relative; display: table; border-collapse: separate;}.jimu-widget-add-data .search-pane .search-box .input-group \x3e * {display: table-cell; vertical-align: middle;}.jimu-widget-add-data .search-pane .search-box .search-textbox {height: 30px; width: 200px; padding: 5px 10px; font-size: 12px; line-height: 1.5; background-color: #ffffff; background-image: none; border: 1px solid #cccccc; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -moz-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;}.jimu-widget-add-data .search-pane .search-box .btn {display: inline-block; margin-left: -1px; margin-bottom: 0; font-weight: normal; text-align: center; vertical-align: middle; touch-action: manipulation; cursor: pointer; color: #196fa6; background-color: #ffffff; background-image: none; border: 1px solid #cccccc; padding: 5px 10px; white-space: nowrap; font-size: 12px; line-height: 1.5; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}.jimu-widget-add-data .search-pane .search-box .btn-clear {border-color: transparent; background: transparent; position: absolute; left: -32px;}.jimu-widget-add-data .search-pane .search-box-placeholder,.jimu-widget-add-data .search-pane .filter-placeholder,.jimu-widget-add-data .search-pane .scope-placeholder {display: none;}.jimu-widget-add-data .search-pane .search-sort-options \x3e * {vertical-align: middle;}.jimu-widget-add-data .search-pane .search-sort-options label {font-weight: normal; font-size: 11px; color: #898989;}.jimu-widget-add-data .search-pane .search-sort-options .sort-order-icon {float: right; width: 24px; height: 24px; margin: 3px 0;}.jimu-widget-add-data .search-pane .search-sort-options .dropdown-toggle .sort-order-icon {float: none; padding: 0 5px;}.jimu-widget-add-data .search-pane .sort-order-icon {background-image: url("images/down-arrow.png"); background-position: center center; background-repeat: no-repeat; width: 16px; height: 16px; background-image: url("images/sort-down-arrow.png");}.jimu-widget-add-data .search-pane .sort-order-icon.descending {background-image: url("images/sort-up-arrow.png");}.jimu-widget-add-data .search-pane .scope-options \x3e * {display: inline-block;}.jimu-widget-add-data .search-pane .checkbox-inline,.jimu-widget-add-data .search-pane .radio-inline {position: relative; padding-left: 21px; margin-right: 10px;}.jimu-widget-add-data .search-pane .checkbox-inline .dijitCheckBox,.jimu-widget-add-data .search-pane .radio-inline .dijitCheckBox {}.jimu-widget-add-data .search-pane .search-item-ratings-comments-views {display: block; padding: 5px;}.jimu-widget-add-data .search-pane .search-item-ratings-comments-views [class*\x3d"gd-icon-"] {margin-right: 10px; vertical-align: middle;}.jimu-widget-add-data .search-pane .search-paging .pagination {margin: 0;}.jimu-widget-add-data .search-pane .search-paging,.jimu-widget-add-data .search-pane .search-result-count {display: inline-block; vertical-align: middle; line-height: 1;}.jimu-widget-add-data .search-pane .pagination \x3e li \x3e span,.jimu-widget-add-data .search-pane .pagination \x3e li \x3e span:focus,.jimu-widget-add-data .search-pane .pagination \x3e li \x3e span:hover {color: inherit; border-color: transparent; background-color: transparent;}.jimu-widget-add-data .search-pane .pagination \x3e li.current-page \x3e span {padding-left: 15px; padding-right: 15px;}.jimu-widget-add-data .search-pane .pagination [class*\x3d" esri-icon-"],.jimu-widget-add-data .search-pane .pagination [class^\x3d"esri-icon-"] {position: relative; top: 1px;}.jimu-widget-add-data .search-pane .search-result-count {margin: 0 10px;}.jimu-widget-add-data.width-768 .item-card {width: 50%;}.jimu-widget-add-data.width-1200 .item-card {width: 33.3333333333%;}.jimu-widget-add-data.width-medium .search-pane .search-bar,.jimu-widget-add-data.width-small .search-pane .search-bar {padding-left: 5px; padding-right: 5px;}.jimu-widget-add-data.width-medium .search-pane .search-bar .btn-group \x3e .btn,.jimu-widget-add-data.width-small .search-pane .search-bar .btn-group \x3e .btn {margin-left: 0;}.jimu-rtl .jimu-widget-add-data.width-medium .search-pane .search-bar .btn-group \x3e .btn,.jimu-rtl .jimu-widget-add-data.width-small .search-pane .search-bar .btn-group \x3e .btn {margin-left: auto; margin-right: 0;}.jimu-widget-add-data.width-medium .search-box-placeholder,.jimu-widget-add-data.width-small .search-box-placeholder,.jimu-widget-add-data.filter-placeholder-on .filter-placeholder {display: block; height: 30px; width: 30px; background-image: url("images/search.png"); background-position: center center; background-repeat: no-repeat; background-size: 12px;}.jimu-widget-add-data.width-medium .search-box,.jimu-widget-add-data.width-small .search-box {display: none; padding: 10px; position: absolute; top: 0; left: 0; right: 40px; background: #ffffff;}.jimu-widget-add-data.width-small .search-box {padding-top: 8px; padding-bottom: 8px;}.jimu-widget-add-data.width-medium .search-box .input-group,.jimu-widget-add-data.width-small .search-box .input-group {width: 100%;}.jimu-widget-add-data.width-medium .search-box .search-textbox,.jimu-widget-add-data.width-small .search-box .search-textbox {width: 100%;}.jimu-widget-add-data.width-medium .search-box .search-btn,.jimu-widget-add-data.width-small .search-box .search-btn {width: 1%; position: relative;}.jimu-widget-add-data.width-medium .search-box.show,.jimu-widget-add-data.width-small .search-box.show {display: block;}.jimu-widget-add-data.width-medium .search-box-placeholder,.jimu-widget-add-data.width-small .search-box-placeholder {margin: 0 0 8px;}.jimu-widget-add-data.width-medium .search-box-placeholder.opened,.jimu-widget-add-data.width-small .search-box-placeholder.opened {background-image: url("images/close.png");}.jimu-widget-add-data.width-medium .filter-placeholder,.jimu-widget-add-data.width-small .filter-placeholder {background-image: url("images/menu.png");}.jimu-widget-add-data.width-medium .scope-placeholder,.jimu-widget-add-data.width-small .scope-placeholder {display: block; padding: 5px 10px 15px; color: #196fa6; font-weight: bold;}.jimu-widget-add-data.width-medium .scope-placeholder:focus,.jimu-widget-add-data.width-small .scope-placeholder:focus {text-decoration: none;}.jimu-widget-add-data.width-medium .scope-placeholder \x3e *,.jimu-widget-add-data.width-small .scope-placeholder \x3e * {vertical-align: middle;}.jimu-widget-add-data.width-medium .scope-placeholder .dropdown-arrow,.jimu-widget-add-data.width-small .scope-placeholder .dropdown-arrow {display: inline-block; background-image: url("images/down-arrow.png"); background-position: center center; background-repeat: no-repeat; width: 16px; height: 16px;}.jimu-widget-add-data.width-medium .btn-group,.jimu-widget-add-data.filter-placeholder-on .filter-wrapper,.jimu-widget-add-data.width-small .btn-group {display: none;}.jimu-widget-add-data.width-medium .filter-wrapper.show,.jimu-widget-add-data.width-medium .btn-group.show,.jimu-widget-add-data.width-small .filter-wrapper.show,.jimu-widget-add-data.width-small .btn-group.show {display: block; position: absolute; right: 0; top: 91px; z-index: 10; padding: 5px 10px; background: #ffffff; border: 1px solid #cccccc; -webkit-box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.2); box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.2);}.jimu-rtl .jimu-widget-add-data.width-medium .filter-wrapper.show,.jimu-rtl .jimu-widget-add-data.width-medium .btn-group.show,.jimu-rtl .jimu-widget-add-data.width-small .filter-wrapper.show,.jimu-rtl .jimu-widget-add-data.width-small .btn-group.show {left: 0; right: auto;}.jimu-widget-add-data.width-medium .btn-group.show,.jimu-widget-add-data.width-small .btn-group.show {top: 48px; left: 0; padding: 0; right: auto; min-width: 50%;}.jimu-rtl .jimu-widget-add-data.width-medium .btn-group.show,.jimu-rtl .jimu-widget-add-data.width-small .btn-group.show {left: auto; right: 0;}.jimu-widget-add-data.width-medium .btn-group.show .btn,.jimu-widget-add-data.width-small .btn-group.show .btn {display: block; width: 100%; padding: 10px 15px; border: 0; font-weight: normal;}.jimu-widget-add-data.width-medium .btn-group.show .btn:hover,.jimu-widget-add-data.width-small .btn-group.show .btn:hover {background-color: #f4f4f4;}.jimu-widget-add-data.width-medium .btn-group.show .btn.active,.jimu-widget-add-data.width-medium .btn-group.show .btn.active:hover,.jimu-widget-add-data.width-small .btn-group.show .btn.active,.jimu-widget-add-data.width-small .btn-group.show .btn.active:hover {background-color: #196fa6 !important; color: #fff !important;}.jimu-widget-add-data.width-small .jimu-tab3 .tab-item-td {padding-left: 20px; padding-right: 20px;}.jimu-widget-add-data.width-small .search-pane .search-bar {padding-top: 5px; padding-left: 5px; padding-right: 5px;}.jimu-widget-add-data.width-small .search-pane .search-bar .btn-group \x3e .btn {margin: 0; padding-left: 5px; padding-right: 5px; font-size: 11px;}.jimu-widget-add-data.width-small .search-pane .search-results-pane {padding: 0; overflow: hidden;}.jimu-widget-add-data.width-small .search-pane .item-card {padding-left: 0; padding-right: 0;}.jimu-widget-add-data.width-small .search-pane .item-card .item-card-inner {margin-bottom: 0; border-top: 0; border-left: 0; border-right: 0; border-bottom-color: #e0e0e0;}.add-data-widget-popup .search-type-option {display: block; margin-bottom: 10px;}.add-data-widget-popup .search-type-option,.add-data-widget-popup .search-type-option input {cursor: pointer;}.jimu-widget-add-data {position: absolute; top: 0; bottom: 0; left: 0; right: 0; padding-top: 5px;}.jimu-widget-add-data .btn.hidden {visibility: hidden;}.jimu-widget-add-data .search-bbox-option,.jimu-widget-add-data .search-box {display: inline-block;}.jimu-widget-add-data .search-box,.jimu-widget-add-data .search-box-placeholder {float: right;}.jimu-widget-add-data .search-scope-options,.jimu-widget-add-data .search-sort-options {display: inline-block;}.jimu-widget-add-data .search-data-type-options {float: left;}.jimu-widget-add-data .filter-wrapper,.jimu-widget-add-data .filter-placeholder {float: right;}.jimu-widget-add-data .search-scope-options button.active {background-color: #cce6ff;}.jimu-widget-add-data .search-results-pane {overflow-y: auto;}.jimu-widget-add-data .search-paging,.jimu-widget-add-data .search-result-count {display: inline-block;}.jimu-widget-add-data .search-paging ul {margin: 0; padding: 0;}.jimu-widget-add-data .search-paging li {display: inline-block;}.jimu-widget-add-data .search-paging li.disabled a,.jimu-widget-add-data .search-paging li.disabled a:hover,.jimu-widget-add-data .search-paging li.disabled a:active,.jimu-widget-add-data .search-paging li.disabled a:focus {cursor: default; opacity: 0.35;}.jimu-widget-add-data .search-item-card .action-bar {margin-left: 20px;}.jimu-widget-add-data .search-item-card .action-bar a {margin-right: 8px;}.jimu-widget-add-data .dijitDropDownButton {margin: 0;}.jimu-widget-add-data .dijitSelect,.jimu-widget-add-data .dijitDropDownButton .dijitButtonNode {background: transparent; border: 0; padding: 7px 5px; color: #196fa6; font-weight: bold; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;}.jimu-widget-add-data .dijitSelect .dijitButtonContents,.jimu-widget-add-data .dijitDropDownButton .dijitButtonNode .dijitButtonContents {border-color: transparent;}.jimu-widget-add-data .dijitSelect .dijitInputField,.jimu-widget-add-data .dijitDropDownButton .dijitButtonNode .dijitInputField {padding: 0 5px;}.jimu-widget-add-data .dijitSelect .dijitArrowButton,.jimu-widget-add-data .dijitDropDownButton .dijitButtonNode .dijitArrowButton {background: transparent; border: 0;}.jimu-widget-add-data .dijitSelect.dijitSelectFocused .dijitArrowButton,.jimu-widget-add-data .dijitDropDownButton .dijitButtonNode.dijitSelectFocused .dijitArrowButton {padding: 0;}.jimu-widget-add-data .dijitSelect .dijitArrowButton .dijitArrowButtonInner,.jimu-widget-add-data .dijitSelectHover .dijitArrowButton .dijitArrowButtonInner,.jimu-widget-add-data .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-image: url("images/down-arrow.png"); background-position: center center; background-repeat: no-repeat; width: 16px; height: 16px;}.jimu-widget-add-data .dijitDropDownButton .dijitArrowButtonInner {background-image: url("images/down-arrow.png"); background-position: center center; background-repeat: no-repeat; width: 16px; height: 16px;}.jimu-widget-add-data-dialog {background-color: #FFFFFF !important; border-color: #555555 !important; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.35) !important; -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.35) !important; box-shadow: 0 0 5px rgba(0, 0, 0, 0.35) !important;}.jimu-widget-add-data-dialog .dijitDialogPaneContent {border-top: 1px solid #cccccc;}.jimu-widget-add-data-dialog .dijitDialogTitleBar {background: none repeat scroll 0 0 rgba(0, 0, 0, 0); background-color: #FFFFFF; -moz-border-radius: 3px 3px 0 0; -webkit-border-radius: 3px 3px 0 0; border-radius: 3px 3px 0 0;}.jimu-widget-add-data-dialog .dijitDialogTitle {background-color: #FFFFFF; color: #000000; font-size: 16px; font-weight: bold;}.jimu-widget-add-data-dialog div.gap {margin-top: 20px;}.jimu-widget-add-data-dialog div.small-gap {margin-top: 4px;}.jimu-widget-add-data-dialog div.action-bar {margin-top: 10px;}.jimu-widget-add-data-dialog .url-textbox {height: 30px; width: 200px; padding: 5px 10px; font-size: 12px; line-height: 1.5; background-color: #ffffff; background-image: none; border: 1px solid #cccccc; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -moz-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;}.jimu-widget-add-data-dialog .url-textbox-wide {width: 500px;}.jimu-widget-add-data-dialog .examples {font-size: 9px; font-style: italic; margin-top: 4px; margin-left: 4px; opacity: 0.5;}.jimu-widget-add-data .btn-link {color: #196fa6 !important;}.jimu-widget-add-data .switch-toggle-group {padding: 5px;}.jimu-widget-add-data .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-add-data .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-add-data .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #e04f1d; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-add-data .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 2px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-add-data .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-add-data .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-add-data .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 14px;}.jimu-widget-add-data .panel-default \x3e .panel-heading {background-color: transparent; border-color: #e0e0e0;}.jimu-widget-add-data .panel-title {font-size: 16px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-add-data .panel-footer .btn + .btn {margin-left: 10px;}.jimu-widget-add-data .gp-panel {width: 300px;}.jimu-widget-add-data .gp-panel \x3e .panel-heading {background-color: transparent; border-left: 1px solid rgba(0, 0, 0, 0.35); color: #efefef; height: 40px;}.jimu-widget-add-data .gp-panel \x3e .panel-heading .panel-title {font-weight: normal; line-height: 1.5;}.jimu-widget-add-data .gp-panel \x3e .panel-heading [class^\x3d"esri-icon-"],.jimu-widget-add-data .gp-panel \x3e .panel-heading [class*\x3d" esri-icon-"] {display: inline-block; margin-right: 10px; position: relative; top: 1px;}.jimu-widget-add-data .gp-panel \x3e .panel-heading .btn-icon {width: 20px; padding: 0; color: #efefef; float: right; margin-right: 0; font-size: 16px; line-height: 1.25; line-height: 20px; text-align: center;}.jimu-widget-add-data .gp-panel \x3e .panel-body {background-color: #f8f8f8; border-left: 1px solid #cccccc; position: absolute; top: 40px; bottom: 0; width: 100%; overflow: auto; padding: 0;}.jimu-widget-add-data .gp-panel .panel-section {background-color: #ffffff;}.jimu-widget-add-data .panel-section {border-bottom: 1px solid #cccccc;}.jimu-widget-add-data .panel-section .section-header {display: block; font-size: 16px; line-height: 1.25; line-height: 20px; padding: 10px 15px;}.jimu-widget-add-data .panel-section .section-header:after {content: ""; display: block; clear: both;}.jimu-widget-add-data .panel-section .section-header [class^\x3d"esri-icon-"],.jimu-widget-add-data .panel-section .section-header [class*\x3d" esri-icon-"],.jimu-widget-add-data .panel-section .section-header .btn {margin: 0 5px; float: right;}.jimu-widget-add-data .panel-section .section-header .btn {margin: 0; min-width: 80px;}.jimu-widget-add-data .panel-section .btn.section-header {border: 0; text-align: left; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-transition: all 0.25s ease; -moz-transition: all 0.25s ease; -o-transition: all 0.25s ease; transition: all 0.25s ease;}.jimu-widget-add-data .panel-section .btn.section-header:hover {background-color: #e2f1fb; text-decoration: none;}.jimu-widget-add-data .panel-section .btn.section-header:active,.jimu-widget-add-data .panel-section .btn.section-header:focus {background-color: #aadbfa; text-decoration: none;}.jimu-widget-add-data .panel-section .section-body {padding: 10px 15px;}.jimu-widget-add-data a, .add-url-pane a {display: block; color: #196fa6; text-decoration: none; line-height: 20px; padding: 10px 5px;}.jimu-widget-add-data .btn.hidden {visibility: hidden;}.jimu-widget-add-data .search-bbox-option, .search-box {display: inline-block;}.jimu-widget-add-data .search-box,.jimu-widget-add-data .search-box-placeholder {float: right;}.jimu-widget-add-data .search-scope-options,.jimu-widget-add-data .search-sort-options {display: inline-block;}.jimu-widget-add-data .search-data-type-options {float: left;}.jimu-widget-add-data .filter-wrapper,.jimu-widget-add-data .filter-placeholder {float: right;}.jimu-widget-add-data .search-scope-options button.active {background-color: #cce6ff;}.jimu-widget-add-data .search-results-pane {overflow-y: auto;}.jimu-widget-add-data .search-paging,.jimu-widget-add-data .search-result-count {display: inline-block;}.jimu-widget-add-data .search-paging ul {margin: 0; padding: 0;}.jimu-widget-add-data .search-paging li {display: inline-block;}.jimu-rtl .jimu-widget-add-data .search-paging li {-moz-transform: rotate(180deg); -webkit-transform: rotate(180deg); -o-transform: rotate(180deg); transform: rotate(180deg);}.jimu-rtl .jimu-widget-add-data .search-paging li.current-page {-moz-transform: rotate(0); -webkit-transform: rotate(0); -o-transform: rotate(0); transform: rotate(0);}.jimu-widget-add-data .search-item-card .action-bar {margin-left: 20px;}.jimu-widget-add-data .search-item-card .action-bar a {margin-right: 8px;}.jimu-widget-add-data .add-url-pane .url-textbox {width: 100%; font-size: 12px; color: #000000;}.jimu-widget-add-data .add-url-pane .examples {display: none; margin: 15px -15px 0; padding: 15px; font-size: 12px; color: #898989; word-wrap: break-word;}.jimu-widget-add-data .add-url-pane .examples \x3e div \x3e div {margin-bottom: 15px;}.jimu-widget-add-data .add-url-pane .examples.show {display: block;}.jimu-widget-add-data .jimu-tab3 \x3e .jimu-viewstack {position: absolute; top: 39px; left: 0px; right: 0; bottom: 0; padding-bottom: 40px;}.jimu-widget-add-data-footer {height: 40px; overflow: hidden; background-color: #f8f8f8; border-top: 1px solid #ccc; padding: 0 15px; color: #898989; font-size: 11px;}.jimu-widget-add-data-footer [class^\x3d"esri-icon-"],.jimu-widget-add-data-footer [class*\x3d" esri-icon-"] {line-height: 20px;}.jimu-widget-add-data-footer .layerlist-button {text-transform: uppercase;}.jimu-widget-add-data-footer .layerlist-button .esri-icon-layers {margin: 0 5px; vertical-align: middle; display: inline-block;}.jimu-widget-add-data-footer .message {display: block; color: #898989; line-height: 20px; padding: 10px 10px 10px 0; text-overflow: ellipsis; overflow: hidden; word-break: break-all; white-space: nowrap;}.jimu-widget-add-data.layerlist-show {overflow: hidden;}.jimu-widget-add-data.layerlist-show .jimu-tab3 {-webkit-filter: blur(5px); filter: blur(5px);}.jimu-widget-add-data.layerlist-show .add-data-layerlist--container {-moz-animation: slide-from-right .4s; -webkit-animation: slide-from-right .4s; animation: slide-from-right .4s;}.add-data-widget-layers {width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); position: absolute; top: 0; right: 0; z-index: 1;}.add-data-widget-layers {display: none;}.add-data-widget-layers.show {display: block;}.add-data-widget-layers .add-data-layerlist--container {background: #fff; position: absolute; top: 0; right: 0; width: 320px; height: 100%; -webkit-transition: width 0.4s ease; -moz-transition: width 0.4s ease; -o-transition: width 0.4s ease; transition: width 0.4s ease;}.width-small .add-data-widget-layers .add-data-layerlist--container {width: 100%;}.add-data-widget-layers .add-data-layerlist--container h2 {margin: 0; padding: 7px 15px; border-bottom: 1px solid #ccc; color: #898989; font-size: 14px; font-weight: normal; line-height: 2;}.add-data-layerlist--list {width: 100%; padding: 10px 15px; line-height: 20px; position: absolute; top: 45px; bottom: 40px; overflow: auto;}.add-data-layerlist--listitem {margin-bottom: 5px;}.add-data-layerlist--listitem:after {content: ""; display: table; clear: both;}.add-data-layerlist--listitem .remove-button {float: right; padding: 5px 10px;}.add-data-layerlist--listitem .layer-name {display: block; padding-top: 5px;}.add-data-widget-layers .add-data-layerlist--footer {width: 100%; position: absolute; bottom: 0;}.add-data-widget-layers .back-button {float: right; text-transform: uppercase;}.add-data-widget-layers .back-button i {display: inline-block; margin-left: 5px;}.add-data-widget-layers .no-data-message {color: #898989; padding: 25px; text-align: center;}.add-data-widget-popup {padding: 0;}.add-data-widget-popup .dijitTooltipConnector {display: none;}.add-data-widget-popup .dijitTooltipContainer {padding: 10px; border-color: #ccc; -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);}.add-data-widget-popup.dijitMenuPopup {-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);}.add-data-widget-popup .dijitMenu {border-color: #ccc;}.add-data-widget-popup .dijitMenu .dijitMenuItem td {padding: 10px 15px; border: 0;}.add-data-widget-popup .dijitMenu .dijitMenuItemHover td,.add-data-widget-popup .dijitMenu .dijitMenuItemActive td,.add-data-widget-popup .dijitMenu .dijitMenuItemSelected td {background-color: #f4f4f4; background-image: none;}.add-data-widget-popup .dijitMenu .dijitSelectSelectedOption td,.add-data-widget-popup .dijitMenu .dijitSelectSelectedOption.dijitMenuItemHover td,.add-data-widget-popup .dijitMenu .dijitSelectSelectedOption.dijitMenuItemSelected td {background-color: #196fa6; background-image: none; color: #fff; font-weight: normal;}.LaunchpadTheme .jimu-widget-add-data.jimu-widget {position: absolute;}.LaunchpadTheme .jimu-widget-add-data .search-pane .item-card h3.title {height: auto; width: auto; position: static;}.LaunchpadTheme .jimu-widget-add-data .dijitSelect.dijitSelectFocused .dijitArrowButton,.LaunchpadTheme .jimu-widget-add-data .dijitDropDownButton .dijitButtonNode.dijitSelectFocused .dijitArrowButton {padding: 5px;}.LaunchpadTheme .jimu-widget-add-data .dijitButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitDropDownButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitComboButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitToggleButton .dijitButtonNode {color: #196fa6; font-size: inherit; letter-spacing: 0;}.LaunchpadTheme .jimu-widget-add-data .dijitSelect,.LaunchpadTheme .jimu-widget-add-data .dijitButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitDropDownButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitComboButton .dijitButtonNode,.LaunchpadTheme .jimu-widget-add-data .dijitToggleButton .dijitButtonNode {background-color: transparent; border: 0;}.LaunchpadTheme .jimu-widget-add-data .secondary-pane .jimu-btn {background-color: #3b8fc4; border: 0;}.LaunchpadTheme .jimu-widget-add-data .secondary-pane .jimu-btn:hover {background-color: #2c6b93;}.DartTheme .jimu-widget-add-data .search-pane {background-color: transparent;}.DartTheme .jimu-widget-add-data .search-pane .search-bar {background-color: transparent;}.DartTheme .jimu-widget-add-data .search-pane .search-bar-secondary {background: #3a3a3a;}.DartTheme .jimu-widget-add-data .secondary-pane {background-color: transparent;}.DartTheme .jimu-widget-add-data .search-pane-content {background-color: #222;}.DartTheme .jimu-tab3 .tab-item-td.jimu-state-active {background: #4C4C4C;}.DartTheme .jimu-widget-add-data .search-pane .search-bar-separator,.DartTheme .jimu-widget-add-data .search-pane .search-pane-header {border-bottom: 1px solid #262626;}.DartTheme .jimu-widget-add-data .search-box2 .search-textbox {background: #393939; border: 0; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px;}.DartTheme .jimu-widget-add-data.width-small .search-box2 .search-textbox {width: 100px;}.DartTheme .jimu-widget-add-data .search-box2 .btn {background: #393939; border: 0;}.DartTheme .jimu-widget-add-data .search-pane .item-card .item-card-inner {background: #4c4c4c; border-color: #787878;}.DartTheme .jimu-widget-add-data .search-pane .item-card h3.title {height: auto; width: auto; position: static;}.DartTheme .jimu-widget-add-data.width-medium .filter-wrapper.show,.DartTheme .jimu-widget-add-data.width-medium .btn-group.show,.DartTheme .jimu-widget-add-data.width-small .filter-wrapper.show,.DartTheme .jimu-widget-add-data.width-small .btn-group.show {background: #393939; border: 1px solid #7f8183; -webkit-box-shadow: 0 2px 3px rgba(0,0,0,0.15); -moz-box-shadow: 0 2px 3px rgba(0,0,0,0.15); box-shadow: 0 2px 3px rgba(0,0,0,0.15);}.DartTheme .jimu-widget-add-data.width-medium .btn-group.show .btn:hover,.DartTheme .jimu-widget-add-data.width-small .btn-group.show .btn:hover {background-color: #222;}.DartTheme .jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active,.DartTheme .jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active:active,.DartTheme .jimu-widget-add-data .search-pane .search-bar .btn-group \x3e .btn.active:hover {color: #f8f8f8 !important;}.DartTheme .jimu-widget-add-data .search-pane .search-sort-options label {color: #a7a7a7 !important;}.DartTheme .jimu-widget-add-data .secondary-pane {border-bottom: 0;}.DartTheme .jimu-widget-add-data .search-pane .item-card div.info {color: #ddd !important;}.DartTheme .jimu-widget-add-data .search-pane .item-card .action-bar a,.DartTheme .jimu-widget-add-data .add-url-pane .action-bar a,.DartTheme .jimu-widget-add-data .add-file-pane .file-form label {color: #15a4fa !important;}.DartTheme .jimu-widget-add-data .dijitDropDownButton .dijitButtonNode {padding: 7px;}.DartTheme .jimu-widget-add-data .dijitSelect {background-color: transparent; border: 0;}.DartTheme .jimu-widget-add-data .dijitSelect .dijitArrowButton {background-color: transparent; border: 0;}.DartTheme .jimu-widget-add-data.width-medium .scope-placeholder .dropdown-arrow,.DartTheme .jimu-widget-add-data.width-small .scope-placeholder .dropdown-arrow,.DartTheme .jimu-widget-add-data .dijitDropDownButton .dijitArrowButtonInner,.DartTheme .jimu-widget-add-data .dijitSelect .dijitArrowButton .dijitArrowButtonInner,.DartTheme .jimu-widget-add-data .dijitSelectHover .dijitArrowButton .dijitArrowButtonInner,.DartTheme .jimu-widget-add-data .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-image: url("images/down-arrow_white.png");}.DartTheme .jimu-widget-add-data.width-medium .search-box-placeholder,.DartTheme .jimu-widget-add-data.width-medium .filter-placeholder,.DartTheme .jimu-widget-add-data.width-small .search-box-placeholder,.DartTheme .jimu-widget-add-data.width-small .filter-placeholder {background-image: url("images/search_white.png");}.DartTheme .jimu-widget-add-data.width-medium .filter-placeholder,.DartTheme .jimu-widget-add-data.width-small .filter-placeholder {background-image: url("images/menu_white.png");}.DartTheme .jimu-widget-add-data.width-medium .search-box-placeholder.opened,.DartTheme .jimu-widget-add-data.width-small .search-box-placeholder.opened {background-image: url("images/close_white.png");}.DartTheme.add-data-widget-popup .dijitTooltipContainer {color: #f8f8f8; background: #4c4c4c; border: 1px solid #7f8183; -webkit-box-shadow: 0 2px 3px rgba(0,0,0,0.15); -moz-box-shadow: 0 2px 3px rgba(0,0,0,0.15); box-shadow: 0 2px 3px rgba(0,0,0,0.15);}.DartTheme .add-data-widget-layers .add-data-layerlist--container {background-color: #4c4c4c;}.DartTheme .add-data-widget-layers .add-data-layerlist--container h2 {border-color: #262626;}.DartTheme .jimu-widget-add-data-footer,.DartTheme .add-data-widget-layers .add-data-layerlist--footer {background-color: transparent; border-top-color: #262626;}.DartTheme .jimu-widget-add-data .add-url-pane-container {background-color: transparent; border-color: transparent;}.DartTheme .jimu-widget-add-data .add-url-pane .action-bar a {padding-top: 0; padding-bottom: 0;}.DartTheme .jimu-widget-add-data .add-url-pane .action-bar .jimu-btn {min-width: 140px;}.DartTheme .jimu-widget-add-data .add-file-pane .drop-area {background: transparent; border-color: #ccc;}.DartTheme .jimu-widget-add-data.height-small .add-file-pane .drop-area {padding-left: 15px; padding-right: 15px;}.jimu-rtl .jimu-widget-add-data .search-pane .item-card {float: right;}.jimu-rtl .jimu-widget-add-data .search-pane .item-card .thumbnail {float: right; margin-left: 10px; margin-right: 0;}.jimu-rtl .jimu-widget-add-data .search-pane .search-bbox-option .checkbox-inline {padding-left: auto; padding-right: 38px; margin-right: auto; margin-left: 25px;}.jimu-rtl .jimu-widget-add-data .search-box2 {float: left;}.jimu-rtl .jimu-widget-add-data .search-box2 .btn {margin-left: auto; margin-right: -1px;}.jimu-rtl .jimu-widget-add-data .search-pane .search-sort-options .sort-order-icon {float: left;}.jimu-rtl .jimu-widget-add-data .search-box, .search-box-placeholder {float: left;}.jimu-rtl .jimu-widget-add-data .search-data-type-options {float: right;}.jimu-rtl .jimu-widget-add-data .filter-wrapper,.jimu-rtl .jimu-widget-add-data .filter-placeholder {float: left;}.jimu-rtl .jimu-widget-add-data .switch-toggle-group .checkbox-inline {padding-left: auto; padding-right: 36px;}.jimu-rtl .jimu-widget-add-data .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: auto; margin-right: -36px;}.jimu-rtl .jimu-widget-add-data .gp-panel \x3e .panel-heading .btn-icon {float: left;}.jimu-rtl .jimu-widget-add-data .panel-section .section-header [class^\x3d"esri-icon-"],.jimu-rtl .jimu-widget-add-data .panel-section .section-header [class*\x3d" esri-icon-"],.jimu-rtl .jimu-widget-add-data .panel-section .section-header .btn {float: left;}.jimu-rtl .jimu-widget-add-data .search-box,.jimu-rtl .jimu-widget-add-data .search-box-placeholder {float: left;}.jimu-rtl .jimu-widget-add-data .search-data-type-options {float: right;}.jimu-rtl .jimu-widget-add-data .filter-wrapper,.jimu-rtl .jimu-widget-add-data .filter-placeholder {float: left;}.jimu-widget-add-data .add-file-pane .or b {padding-left: 5px; padding-right: 0;}.jimu-rtl .jimu-widget-add-data .add-file-pane .drop-area a.drop-area-hint {left: 0; right: auto;}.jimu-rtl .add-data-widget-layers .add-data-layerlist--container {left: 0; right: auto;}.jimu-rtl .jimu-widget-add-data.layerlist-show .add-data-layerlist--container {-moz-animation: slide-from-left .4s; -webkit-animation: slide-from-left .4s; animation: slide-from-left .4s;}.jimu-rtl .add-data-layerlist--listitem .remove-button {float: left;}.jimu-rtl .add-data-widget-layers .back-button {float: left;}.jimu-rtl .add-data-widget-layers .back-button i {margin-left: 0; margin-right: 5px;}.jimu-rtl .add-data-widget-layers .back-button i.esri-icon-collapse:before {content: "\\e631";}@-moz-keyframes updload-arrow-animation {0% {-moz-transform: translateY(0px);} 50% {-moz-transform: translateY(-10px);} 100% {-moz-transform: translateY(0px);}}@-webkit-keyframes updload-arrow-animation {0% {-webkit-transform: translateY(0px);} 50% {-webkit-transform: translateY(-10px);} 100% {-webkit-transform: translateY(0px);}}@keyframes updload-arrow-animation {0% {transform: translateY(0px);} 50% {transform: translateY(-10px);} 100% {transform: translateY(0px);}}@-moz-keyframes slide-from-right {0% {-moz-transform: translateX(50%); opacity: 0.5;} 100% {-moz-transform: translateX(0%); opacity: 1;}}@-webkit-keyframes slide-from-right {0% {-webkit-transform: translateX(50%); opacity: 0.5;} 100% {-webkit-transform: translateX(0%); opacity: 1;}}@keyframes slide-from-right {0% {transform: translateX(50%); opacity: 0.5;} 100% {transform: translateX(0%); opacity: 1;}}@-moz-keyframes slide-from-left {0% {-moz-transform: translateX(-50%); opacity: 0.5;} 100% {-moz-transform: translateX(0%); opacity: 1;}}@-webkit-keyframes slide-from-left {0% {-webkit-transform: translateX(-50%); opacity: 0.5;} 100% {-webkit-transform: translateX(0%); opacity: 1;}}@keyframes slide-from-left {0% {transform: translateX(-50%); opacity: 0.5;} 100% {transform: translateX(0%); opacity: 1;}}',
"*now":function(m){m(['dojo/i18n!*preload*widgets/AddData/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/on dojo/aspect dojo/Deferred dojo/dom-class jimu/portalUrlUtils jimu/portalUtils jimu/tokenUtils jimu/BaseWidget jimu/dijit/TabContainer3 dijit/_WidgetsInTemplateMixin ./search/SearchContext ./search/util ./search/SearchPane ./search/AddFromUrlPane ./search/AddFromFilePane ./search/LayerListPane".split(" "),function(m,d,l,e,k,t,b,r,n,w,E,v,z,C,A,B,D,c){return m([w,v],{name:"AddData",baseClass:"jimu-widget-add-data",_isOpen:!1,_searchOnOpen:!1,tabContainer:null,
searchPane:null,addFromUrlPane:null,addFromFilePane:null,postCreate:function(){this.inherited(arguments)},startup:function(){if(!this._started){var b=this,c=arguments;this._getUser().then(function(c){b._checkConfig();b._initTabs();return b._initContext(c)}).then(function(){b.inherited(c);b.tabContainer?b.tabContainer.startup():b.searchPane?b.searchPane.startup():b.addFromUrlPane?b.addFromUrlPane.startup():b.addFromFilePane&&b.addFromFilePane.startup();b._initFooter(b.tabContainer,{searchWidget:b.searchPane,
addFromUrlWidget:b.addFromUrlPane,addFromFileWidget:b.addFromFilePane});b._initListeners();b.resize()}).otherwise(function(d){console.warn("AddData.startup error:",d);b.inherited(c);b.resize()})}},_checkConfig:function(){this.config||(this.config={});var b=function(b,c){var e=b[c];e||(e=b[c]={allow:!0,label:null});"boolean"!==typeof e.allow&&(e.allow=!0);if("Curated"===c&&("string"!==typeof e.filter||0===d.trim(e.filter).length))e.allow=!1},c=this.config;c.scopeOptions||(c.scopeOptions={});var e=
c.scopeOptions;b(e,"MyContent");b(e,"MyOrganization");b(e,"Curated");b(e,"ArcGISOnline");b(c,"addFromUrl");b(c,"addFromFile")},getSharingUrl:function(){var c=r.getPortal(this.appConfig.portalUrl);return b.getSharingUrl(c.portalUrl)},_getUser:function(){var b=new k,c=this.appConfig.portalUrl;n.userHaveSignInPortal(c)?r.getPortal(c).getUser().then(function(c){b.resolve(c)}).otherwise(function(c){console.warn("AddData._getUser error:",c);b.resolve(null)}):b.resolve(null);return b},_initContext:function(b){var c=
new k,d=!0,e=C.checkMixedContent("http://www.arcgis.com"),l=this.config.scopeOptions,m=b&&"string"===typeof b.username&&0<b.username.length,n=new z,a=r.getPortal(this.appConfig.portalUrl);n.portal=a;b&&("string"===typeof b.orgId&&0<b.orgId.length)&&(n.orgId=b.orgId);m?n.username=b.username:l.MyContent.allow=!1;this.searchPane&&(this.searchPane.searchContext=n,this.searchPane.portal=a);var g=this.nls.search.loadError+e,q=l.ArcGISOnline;n.allowArcGISOnline=q.allow;if(a.isPortal&&n.allowArcGISOnline){var h=
r.getPortal(e);h?h.helperServices||(d=!1,h.loadSelfInfo().then(function(){h.helperServices?n.arcgisOnlinePortal=h:(console.warn(g),n.allowArcGISOnline=!1,q.allow=!1);c.resolve()}).otherwise(function(a){n.allowArcGISOnline=!1;q.allow=!1;console.warn(g);console.warn(a);c.resolve()})):(console.warn(g),n.allowArcGISOnline=!1,q.allow=!1)}else!m&&!a.isPortal&&(l.MyOrganization.allow&&l.ArcGISOnline.allow)&&(l.MyOrganization.allow=!1);d&&c.resolve();return c},_initFooter:function(b,c){if(b){var e=c.searchWidget,
k=!1;e&&(e.footerNode&&e.footerNode.nodeName)&&(k=!0);var m=this.footerContainer=document.createElement("DIV");m.className=this.baseClass+"-footer";k&&m.appendChild(e.footerNode);var n=document.createElement("A");n.className="layerlist-button jimu-float-trailing";n.href="#";n.innerHTML="\x3cspan class\x3d'esri-icon-layers'\x3e\x3c/span\x3e"+this.nls.layerList.caption;this.own(l(n,"click",d.hitch(this,function(a){a.preventDefault();this.showLayers()})));m.appendChild(n);var r=this.messageNode=document.createElement("SPAN");
r.className="message";m.appendChild(r);n=b.containerNode||b.domNode||b;n.nodeName&&n.appendChild(m);this.own(l(this.tabContainer,"tabChanged",d.hitch(this,function(a){this._setStatus("");k&&(e.footerNode.style.display=a===this.nls.tabs.search?"":"none");this.nls.tabs.search===a?(k&&(e.footerNode.style.display=""),r.style.display="none"):(k&&(e.footerNode.style.display="none"),r.style.display="")})))}},_initListeners:function(){var b=this;this.map&&this.own(this.map.on("extent-change",function(){try{b.searchPane&&
b.searchPane.bboxOption.bboxToggle.get("checked")&&(b._isOpen?b.searchPane.search():b._searchOnOpen=!0)}catch(c){console.warn(c)}}))},_initTabs:function(){var b=this.config,c=[],d=!(!window.File||!window.FileReader||!window.FormData),k=!1,l=b.scopeOptions,m=function(a){k||l&&(l[a]&&l[a].allow)&&(k=!0)};m("MyContent");m("MyOrganization");m("Curated");m("ArcGISOnline");k&&(this.searchPane=new A({wabWidget:this},this.searchNode),c.push({title:this.nls.tabs.search,content:this.searchPane.domNode}));b.addFromUrl&&
b.addFromUrl.allow&&(this.addFromUrlPane=new B({wabWidget:this},this.urlNode),c.push({title:this.nls.tabs.url,content:this.addFromUrlPane.domNode}));d&&(b.addFromFile&&b.addFromFile.allow)&&(this.addFromFilePane=new D({wabWidget:this},this.fileNode),c.push({title:this.nls.tabs.file,content:this.addFromFilePane.domNode}));var n=this;1<c.length?(this.tabContainer=new E({average:!0,tabs:c},this.tabsNode),this.own(e.after(this.tabContainer,"selectTab",function(a){n.searchPane&&a===n.nls.tabs.search&&
n.searchPane.resize()},!0))):0===c.length&&this.tabsNode.appendChild(document.createTextNode(this.nls.noOptionsConfigured))},_setStatus:function(b){C.setNodeText(this.messageNode,b);this.messageNode.title=b},onClose:function(){this._isOpen=!1},onOpen:function(){var b=this.searchPane&&this._searchOnOpen;this._isOpen=!0;this._searchOnOpen=!1;this.resize();b&&this.searchPane.search()},resize:function(){var b=this.domNode.clientWidth,c=this.domNode.clientHeight;1E3<b?(t.remove(this.domNode,"width-768"),
t.add(this.domNode,"width-1200")):768<b?(t.remove(this.domNode,"width-1200"),t.add(this.domNode,"width-768")):t.remove(this.domNode,["width-768","width-1200"]);420>b?(t.remove(this.domNode,"width-medium"),t.add(this.domNode,"width-small")):750>b?(t.remove(this.domNode,"width-small"),t.add(this.domNode,"width-medium")):t.remove(this.domNode,["width-small","width-medium"]);340>b?t.add(this.domNode,"filter-placeholder-on"):t.remove(this.domNode,"filter-placeholder-on");400>c?t.add(this.domNode,"height-small"):
t.remove(this.domNode,"height-small");this.searchPane&&this.searchPane.resize()},showLayers:function(){this.layerListPane||(this.layerListPane=new c({wabWidget:this}),this.layerListPane.placeAt(this.domNode));this.layerListPane.show()}})});