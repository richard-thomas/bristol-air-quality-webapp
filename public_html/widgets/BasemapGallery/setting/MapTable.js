// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/BasemapGallery/setting/MapTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"maps-section" data-dojo-attach-point\x3d"allMapsSection"\x3e\r\n\t\t\x3cdiv class\x3d"maps-table-div" data-dojo-attach-point\x3d"allMapsTableDiv"\x3e\r\n\t\t\t\x3cdiv class\x3d"maps-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allMapsTable"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section hidden" data-dojo-attach-point\x3d"searchNoneTipSection"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-basemaptip"\x3e${nls.noBasemaps}\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"search-none-tip"\x3e${nls.noBasemapAvailable}\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allMapsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./MapTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator ../BasemapItem ../utils".split(" "),function(g,h,k,l,m,n,c,d,b,p,q,v,r,w,s,t,x,f,u){return g([h,k,l,n],{templateString:m,baseClass:"basemap-table",query:null,portalUrl:null,nls:null,type:"",
multiple:!1,spatialReference:null,basemaps:[],postMixInProperties:function(){this.nls=c.mixin(this.nls,window.jimuNls.itemSelector)},postCreate:function(){this.inherited(arguments);this.basemaps=[];this.portalUrl&&(this.portalUrl=t.getStandardPortalUrl(this.portalUrl));this.search()},search:function(a){a&&(this.query=c.clone(a),this.clear());this.portalUrl&&this.query&&(a=s.getPortal(this.portalUrl),this.allMapsShelter.show(),b.addClass(this.searchNoneTipSection,"hidden"),a.queryItems(this.query).then(c.hitch(this,
function(a){this._createMapItems(a).then(c.hitch(this,function(){this.allMapsShelter.hide();this._filterMapCallback()}))}),c.hitch(this,function(a){console.error(a);this.domNode&&(this.allMapsShelter.hide(),this._filterMapCallback())})))},_filterMapCallback:function(){0<this.basemaps.length?(b.removeClass(this.allMapsTableDiv,"hidden"),b.addClass(this.searchNoneTipSection,"hidden")):(b.addClass(this.allMapsTableDiv,"hidden"),b.removeClass(this.searchNoneTipSection,"hidden"))},clear:function(){this.basemaps=
[];b.empty(this.allMapsTable)},_createMapItems:function(a){var b=[],e=new p;a=d.filter(a.results,c.hitch(this,function(a){return a.type.toLowerCase()===this.type.toLowerCase()}));if(0===a.length)return e.resolve(),e;d.forEach(a,function(a){b.push(u.getBasemapInfo(a.portalUrl,a.id))});q(b).then(c.hitch(this,function(a){d.forEach(a,c.hitch(this,function(a){this.spatialReference.equals(a.spatialReference)&&this._createMapItem(a)}));e.resolve()}));return e},_createMapItem:function(a){a=new f({appConfig:this.appConfig,
basemap:a,folderUrl:this.folderUrl,spatialReference:this.spatialReference,nls:this.nls,mode:f.MODE_SELECT});this.basemaps.push(a);0===this.basemaps.length%4&&b.addClass(a.domNode,"no-margin");b.place(a.domNode,this.allMapsTable);this.own(r(a,"selected",c.hitch(this,function(a){this.emit("selectionChange")})))},getSelectedMapItems:function(){return d.filter(this.basemaps,function(a){return a.isSelected()})}})});